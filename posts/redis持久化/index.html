<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='Redis ÁöÑËØªÂÜôÈÉΩÊòØÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÊâÄ‰ª•ÂÆÉÁöÑÊÄßËÉΩËæÉÈ´òÔºå‰ΩÜÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆ‰ºöÈöèÁùÄÊúçÂä°Âô®ÁöÑÈáçÂêØËÄå‰∏¢Â§±Ôºå‰∏∫‰∫Ü‰øùËØÅÊï∞ÊçÆ‰∏ç‰∏¢Â§±ÔºåÊàë‰ª¨ÈúÄË¶ÅÂ∞ÜÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÂ≠òÂÇ®Âà∞Á£ÅÁõòÔºå‰ª•‰æø Redis ÈáçÂêØÊó∂ËÉΩÂ§ü‰ªéÁ£ÅÁõò‰∏≠ÊÅ¢Â§çÂéüÊúâÁöÑÊï∞ÊçÆÔºåËÄåÊï¥‰∏™ËøáÁ®ãÂ∞±Âè´ÂÅö Redis ÊåÅ‰πÖÂåñ„ÄÇ
Redis ÊåÅ‰πÖÂåñ‰πüÊòØ Redis Âíå Memcached ÁöÑ‰∏ªË¶ÅÂå∫Âà´‰πã‰∏ÄÔºåÂõ†‰∏∫ Memcached ‰∏çÂÖ∑Â§áÊåÅ‰πÖÂåñÂäüËÉΩ„ÄÇ
ÊåÅ‰πÖÂåñÁöÑÂá†ÁßçÊñπÂºè Redis ÊåÅ‰πÖÂåñÊã•Êúâ‰ª•‰∏ã‰∏âÁßçÊñπÂºèÔºö
Âø´ÁÖßÊñπÂºèÔºàRDB, Redis DataBaseÔºâÂ∞ÜÊüê‰∏Ä‰∏™Êó∂ÂàªÁöÑÂÜÖÂ≠òÊï∞ÊçÆÔºå‰ª•‰∫åËøõÂà∂ÁöÑÊñπÂºèÂÜôÂÖ•Á£ÅÁõòÔºõ Êñá‰ª∂ËøΩÂä†ÊñπÂºèÔºàAOF, Append Only FileÔºâÔºåËÆ∞ÂΩïÊâÄÊúâÁöÑÊìç‰ΩúÂëΩ‰ª§ÔºåÂπ∂‰ª•ÊñáÊú¨ÁöÑÂΩ¢ÂºèËøΩÂä†Âà∞Êñá‰ª∂‰∏≠Ôºõ Ê∑∑ÂêàÊåÅ‰πÖÂåñÊñπÂºèÔºåRedis 4.0 ‰πãÂêéÊñ∞Â¢ûÁöÑÊñπÂºèÔºåÊ∑∑ÂêàÊåÅ‰πÖÂåñÊòØÁªìÂêà‰∫Ü RDB Âíå AOF ÁöÑ‰ºòÁÇπÔºåÂú®ÂÜôÂÖ•ÁöÑÊó∂ÂÄôÔºåÂÖàÊääÂΩìÂâçÁöÑÊï∞ÊçÆ‰ª• RDB ÁöÑÂΩ¢ÂºèÂÜôÂÖ•Êñá‰ª∂ÁöÑÂºÄÂ§¥ÔºåÂÜçÂ∞ÜÂêéÁª≠ÁöÑÊìç‰ΩúÂëΩ‰ª§‰ª• AOF ÁöÑÊ†ºÂºèÂ≠òÂÖ•Êñá‰ª∂ÔºåËøôÊ†∑Êó¢ËÉΩ‰øùËØÅ Redis ÈáçÂêØÊó∂ÁöÑÈÄüÂ∫¶ÔºåÂèàËÉΩÂáè‰ΩéÊï∞ÊçÆ‰∏¢Â§±ÁöÑÈ£éÈô©„ÄÇ Âõ†‰∏∫ÊØèÁßçÊåÅ‰πÖÂåñÊñπÊ°àÔºåÈÉΩÊúâÁâπÂÆöÁöÑ‰ΩøÁî®Âú∫ÊôØÔºåËÆ©Êàë‰ª¨ÂÖà‰ªé RDB ÊåÅ‰πÖÂåñËØ¥Ëµ∑Âêß„ÄÇ
RedisÊåÅ‰πÖÂåñ&amp;ndash;RDB RDBÔºàRedis DataBaseÔºâÊòØÂ∞ÜÊüê‰∏Ä‰∏™Êó∂ÂàªÁöÑÂÜÖÂ≠òÂø´ÁÖßÔºàSnapshotÔºâÔºå‰ª•‰∫åËøõÂà∂ÁöÑÊñπÂºèÂÜôÂÖ•Á£ÅÁõòÁöÑËøáÁ®ã„ÄÇ
ÊåÅ‰πÖÂåñËß¶Âèë RDB ÁöÑÊåÅ‰πÖÂåñËß¶ÂèëÊñπÂºèÊúâ‰∏§Á±ªÔºö‰∏ÄÁ±ªÊòØÊâãÂä®Ëß¶ÂèëÔºåÂè¶‰∏ÄÁ±ªÊòØËá™Âä®Ëß¶Âèë„ÄÇ
ÊâãÂä®Ëß¶Âèë ÊâãÂä®Ëß¶ÂèëÊåÅ‰πÖÂåñÁöÑÊìç‰ΩúÊúâ‰∏§‰∏™Ôºö save Âíå bgsave ÔºåÂÆÉ‰ª¨‰∏ªË¶ÅÂå∫Âà´‰ΩìÁé∞Âú®ÔºöÊòØÂê¶ÈòªÂ°û Redis ‰∏ªÁ∫øÁ®ãÁöÑÊâßË°å„ÄÇ
save ÂëΩ‰ª§ Âú®ÂÆ¢Êà∑Á´Ø‰∏≠ÊâßË°å save ÂëΩ‰ª§ÔºåÂ∞±‰ºöËß¶Âèë Redis ÁöÑÊåÅ‰πÖÂåñÔºå‰ΩÜÂêåÊó∂‰πüÊòØ‰Ωø Redis Â§Ñ‰∫éÈòªÂ°ûÁä∂ÊÄÅÔºåÁõ¥Âà∞ RDB ÊåÅ‰πÖÂåñÂÆåÊàêÔºåÊâç‰ºöÂìçÂ∫îÂÖ∂‰ªñÂÆ¢Êà∑Á´ØÂèëÊù•ÁöÑÂëΩ‰ª§ÔºåÊâÄ‰ª•Âú®Áîü‰∫ßÁéØÂ¢É‰∏ÄÂÆöË¶ÅÊÖéÁî®„ÄÇ
save ÂëΩ‰ª§‰ΩøÁî®Â¶Ç‰∏ãÔºö‰ªéÂõæÁâáÂèØ‰ª•ÁúãÂá∫ÔºåÂΩìÊâßË°åÂÆå save ÂëΩ‰ª§‰πãÂêéÔºåÊåÅ‰πÖÂåñÊñá‰ª∂ dump.'><title>RedisÊåÅ‰πÖÂåñ</title>

<link rel='canonical' href='https://ahao.ink/posts/redis%E6%8C%81%E4%B9%85%E5%8C%96/'>

<link rel="stylesheet" href="/scss/style.min.baba905ab2d1209de74a1930c487a8a663c37860af6aa1c26588d298bf620306.css"><meta property='og:title' content='RedisÊåÅ‰πÖÂåñ'>
<meta property='og:description' content='Redis ÁöÑËØªÂÜôÈÉΩÊòØÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÊâÄ‰ª•ÂÆÉÁöÑÊÄßËÉΩËæÉÈ´òÔºå‰ΩÜÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆ‰ºöÈöèÁùÄÊúçÂä°Âô®ÁöÑÈáçÂêØËÄå‰∏¢Â§±Ôºå‰∏∫‰∫Ü‰øùËØÅÊï∞ÊçÆ‰∏ç‰∏¢Â§±ÔºåÊàë‰ª¨ÈúÄË¶ÅÂ∞ÜÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÂ≠òÂÇ®Âà∞Á£ÅÁõòÔºå‰ª•‰æø Redis ÈáçÂêØÊó∂ËÉΩÂ§ü‰ªéÁ£ÅÁõò‰∏≠ÊÅ¢Â§çÂéüÊúâÁöÑÊï∞ÊçÆÔºåËÄåÊï¥‰∏™ËøáÁ®ãÂ∞±Âè´ÂÅö Redis ÊåÅ‰πÖÂåñ„ÄÇ
Redis ÊåÅ‰πÖÂåñ‰πüÊòØ Redis Âíå Memcached ÁöÑ‰∏ªË¶ÅÂå∫Âà´‰πã‰∏ÄÔºåÂõ†‰∏∫ Memcached ‰∏çÂÖ∑Â§áÊåÅ‰πÖÂåñÂäüËÉΩ„ÄÇ
ÊåÅ‰πÖÂåñÁöÑÂá†ÁßçÊñπÂºè Redis ÊåÅ‰πÖÂåñÊã•Êúâ‰ª•‰∏ã‰∏âÁßçÊñπÂºèÔºö
Âø´ÁÖßÊñπÂºèÔºàRDB, Redis DataBaseÔºâÂ∞ÜÊüê‰∏Ä‰∏™Êó∂ÂàªÁöÑÂÜÖÂ≠òÊï∞ÊçÆÔºå‰ª•‰∫åËøõÂà∂ÁöÑÊñπÂºèÂÜôÂÖ•Á£ÅÁõòÔºõ Êñá‰ª∂ËøΩÂä†ÊñπÂºèÔºàAOF, Append Only FileÔºâÔºåËÆ∞ÂΩïÊâÄÊúâÁöÑÊìç‰ΩúÂëΩ‰ª§ÔºåÂπ∂‰ª•ÊñáÊú¨ÁöÑÂΩ¢ÂºèËøΩÂä†Âà∞Êñá‰ª∂‰∏≠Ôºõ Ê∑∑ÂêàÊåÅ‰πÖÂåñÊñπÂºèÔºåRedis 4.0 ‰πãÂêéÊñ∞Â¢ûÁöÑÊñπÂºèÔºåÊ∑∑ÂêàÊåÅ‰πÖÂåñÊòØÁªìÂêà‰∫Ü RDB Âíå AOF ÁöÑ‰ºòÁÇπÔºåÂú®ÂÜôÂÖ•ÁöÑÊó∂ÂÄôÔºåÂÖàÊääÂΩìÂâçÁöÑÊï∞ÊçÆ‰ª• RDB ÁöÑÂΩ¢ÂºèÂÜôÂÖ•Êñá‰ª∂ÁöÑÂºÄÂ§¥ÔºåÂÜçÂ∞ÜÂêéÁª≠ÁöÑÊìç‰ΩúÂëΩ‰ª§‰ª• AOF ÁöÑÊ†ºÂºèÂ≠òÂÖ•Êñá‰ª∂ÔºåËøôÊ†∑Êó¢ËÉΩ‰øùËØÅ Redis ÈáçÂêØÊó∂ÁöÑÈÄüÂ∫¶ÔºåÂèàËÉΩÂáè‰ΩéÊï∞ÊçÆ‰∏¢Â§±ÁöÑÈ£éÈô©„ÄÇ Âõ†‰∏∫ÊØèÁßçÊåÅ‰πÖÂåñÊñπÊ°àÔºåÈÉΩÊúâÁâπÂÆöÁöÑ‰ΩøÁî®Âú∫ÊôØÔºåËÆ©Êàë‰ª¨ÂÖà‰ªé RDB ÊåÅ‰πÖÂåñËØ¥Ëµ∑Âêß„ÄÇ
RedisÊåÅ‰πÖÂåñ&amp;ndash;RDB RDBÔºàRedis DataBaseÔºâÊòØÂ∞ÜÊüê‰∏Ä‰∏™Êó∂ÂàªÁöÑÂÜÖÂ≠òÂø´ÁÖßÔºàSnapshotÔºâÔºå‰ª•‰∫åËøõÂà∂ÁöÑÊñπÂºèÂÜôÂÖ•Á£ÅÁõòÁöÑËøáÁ®ã„ÄÇ
ÊåÅ‰πÖÂåñËß¶Âèë RDB ÁöÑÊåÅ‰πÖÂåñËß¶ÂèëÊñπÂºèÊúâ‰∏§Á±ªÔºö‰∏ÄÁ±ªÊòØÊâãÂä®Ëß¶ÂèëÔºåÂè¶‰∏ÄÁ±ªÊòØËá™Âä®Ëß¶Âèë„ÄÇ
ÊâãÂä®Ëß¶Âèë ÊâãÂä®Ëß¶ÂèëÊåÅ‰πÖÂåñÁöÑÊìç‰ΩúÊúâ‰∏§‰∏™Ôºö save Âíå bgsave ÔºåÂÆÉ‰ª¨‰∏ªË¶ÅÂå∫Âà´‰ΩìÁé∞Âú®ÔºöÊòØÂê¶ÈòªÂ°û Redis ‰∏ªÁ∫øÁ®ãÁöÑÊâßË°å„ÄÇ
save ÂëΩ‰ª§ Âú®ÂÆ¢Êà∑Á´Ø‰∏≠ÊâßË°å save ÂëΩ‰ª§ÔºåÂ∞±‰ºöËß¶Âèë Redis ÁöÑÊåÅ‰πÖÂåñÔºå‰ΩÜÂêåÊó∂‰πüÊòØ‰Ωø Redis Â§Ñ‰∫éÈòªÂ°ûÁä∂ÊÄÅÔºåÁõ¥Âà∞ RDB ÊåÅ‰πÖÂåñÂÆåÊàêÔºåÊâç‰ºöÂìçÂ∫îÂÖ∂‰ªñÂÆ¢Êà∑Á´ØÂèëÊù•ÁöÑÂëΩ‰ª§ÔºåÊâÄ‰ª•Âú®Áîü‰∫ßÁéØÂ¢É‰∏ÄÂÆöË¶ÅÊÖéÁî®„ÄÇ
save ÂëΩ‰ª§‰ΩøÁî®Â¶Ç‰∏ãÔºö‰ªéÂõæÁâáÂèØ‰ª•ÁúãÂá∫ÔºåÂΩìÊâßË°åÂÆå save ÂëΩ‰ª§‰πãÂêéÔºåÊåÅ‰πÖÂåñÊñá‰ª∂ dump.'>
<meta property='og:url' content='https://ahao.ink/posts/redis%E6%8C%81%E4%B9%85%E5%8C%96/'>
<meta property='og:site_name' content='ahao&#39;s Blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2021-09-26T13:36:41&#43;00:00'/><meta property='article:modified_time' content='2022-06-07T01:16:52&#43;00:00'/><meta property='og:image' content='https://ahao.ink/26.jpg' />
<meta name="twitter:title" content="RedisÊåÅ‰πÖÂåñ">
<meta name="twitter:description" content="Redis ÁöÑËØªÂÜôÈÉΩÊòØÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÊâÄ‰ª•ÂÆÉÁöÑÊÄßËÉΩËæÉÈ´òÔºå‰ΩÜÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆ‰ºöÈöèÁùÄÊúçÂä°Âô®ÁöÑÈáçÂêØËÄå‰∏¢Â§±Ôºå‰∏∫‰∫Ü‰øùËØÅÊï∞ÊçÆ‰∏ç‰∏¢Â§±ÔºåÊàë‰ª¨ÈúÄË¶ÅÂ∞ÜÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÂ≠òÂÇ®Âà∞Á£ÅÁõòÔºå‰ª•‰æø Redis ÈáçÂêØÊó∂ËÉΩÂ§ü‰ªéÁ£ÅÁõò‰∏≠ÊÅ¢Â§çÂéüÊúâÁöÑÊï∞ÊçÆÔºåËÄåÊï¥‰∏™ËøáÁ®ãÂ∞±Âè´ÂÅö Redis ÊåÅ‰πÖÂåñ„ÄÇ
Redis ÊåÅ‰πÖÂåñ‰πüÊòØ Redis Âíå Memcached ÁöÑ‰∏ªË¶ÅÂå∫Âà´‰πã‰∏ÄÔºåÂõ†‰∏∫ Memcached ‰∏çÂÖ∑Â§áÊåÅ‰πÖÂåñÂäüËÉΩ„ÄÇ
ÊåÅ‰πÖÂåñÁöÑÂá†ÁßçÊñπÂºè Redis ÊåÅ‰πÖÂåñÊã•Êúâ‰ª•‰∏ã‰∏âÁßçÊñπÂºèÔºö
Âø´ÁÖßÊñπÂºèÔºàRDB, Redis DataBaseÔºâÂ∞ÜÊüê‰∏Ä‰∏™Êó∂ÂàªÁöÑÂÜÖÂ≠òÊï∞ÊçÆÔºå‰ª•‰∫åËøõÂà∂ÁöÑÊñπÂºèÂÜôÂÖ•Á£ÅÁõòÔºõ Êñá‰ª∂ËøΩÂä†ÊñπÂºèÔºàAOF, Append Only FileÔºâÔºåËÆ∞ÂΩïÊâÄÊúâÁöÑÊìç‰ΩúÂëΩ‰ª§ÔºåÂπ∂‰ª•ÊñáÊú¨ÁöÑÂΩ¢ÂºèËøΩÂä†Âà∞Êñá‰ª∂‰∏≠Ôºõ Ê∑∑ÂêàÊåÅ‰πÖÂåñÊñπÂºèÔºåRedis 4.0 ‰πãÂêéÊñ∞Â¢ûÁöÑÊñπÂºèÔºåÊ∑∑ÂêàÊåÅ‰πÖÂåñÊòØÁªìÂêà‰∫Ü RDB Âíå AOF ÁöÑ‰ºòÁÇπÔºåÂú®ÂÜôÂÖ•ÁöÑÊó∂ÂÄôÔºåÂÖàÊääÂΩìÂâçÁöÑÊï∞ÊçÆ‰ª• RDB ÁöÑÂΩ¢ÂºèÂÜôÂÖ•Êñá‰ª∂ÁöÑÂºÄÂ§¥ÔºåÂÜçÂ∞ÜÂêéÁª≠ÁöÑÊìç‰ΩúÂëΩ‰ª§‰ª• AOF ÁöÑÊ†ºÂºèÂ≠òÂÖ•Êñá‰ª∂ÔºåËøôÊ†∑Êó¢ËÉΩ‰øùËØÅ Redis ÈáçÂêØÊó∂ÁöÑÈÄüÂ∫¶ÔºåÂèàËÉΩÂáè‰ΩéÊï∞ÊçÆ‰∏¢Â§±ÁöÑÈ£éÈô©„ÄÇ Âõ†‰∏∫ÊØèÁßçÊåÅ‰πÖÂåñÊñπÊ°àÔºåÈÉΩÊúâÁâπÂÆöÁöÑ‰ΩøÁî®Âú∫ÊôØÔºåËÆ©Êàë‰ª¨ÂÖà‰ªé RDB ÊåÅ‰πÖÂåñËØ¥Ëµ∑Âêß„ÄÇ
RedisÊåÅ‰πÖÂåñ&amp;ndash;RDB RDBÔºàRedis DataBaseÔºâÊòØÂ∞ÜÊüê‰∏Ä‰∏™Êó∂ÂàªÁöÑÂÜÖÂ≠òÂø´ÁÖßÔºàSnapshotÔºâÔºå‰ª•‰∫åËøõÂà∂ÁöÑÊñπÂºèÂÜôÂÖ•Á£ÅÁõòÁöÑËøáÁ®ã„ÄÇ
ÊåÅ‰πÖÂåñËß¶Âèë RDB ÁöÑÊåÅ‰πÖÂåñËß¶ÂèëÊñπÂºèÊúâ‰∏§Á±ªÔºö‰∏ÄÁ±ªÊòØÊâãÂä®Ëß¶ÂèëÔºåÂè¶‰∏ÄÁ±ªÊòØËá™Âä®Ëß¶Âèë„ÄÇ
ÊâãÂä®Ëß¶Âèë ÊâãÂä®Ëß¶ÂèëÊåÅ‰πÖÂåñÁöÑÊìç‰ΩúÊúâ‰∏§‰∏™Ôºö save Âíå bgsave ÔºåÂÆÉ‰ª¨‰∏ªË¶ÅÂå∫Âà´‰ΩìÁé∞Âú®ÔºöÊòØÂê¶ÈòªÂ°û Redis ‰∏ªÁ∫øÁ®ãÁöÑÊâßË°å„ÄÇ
save ÂëΩ‰ª§ Âú®ÂÆ¢Êà∑Á´Ø‰∏≠ÊâßË°å save ÂëΩ‰ª§ÔºåÂ∞±‰ºöËß¶Âèë Redis ÁöÑÊåÅ‰πÖÂåñÔºå‰ΩÜÂêåÊó∂‰πüÊòØ‰Ωø Redis Â§Ñ‰∫éÈòªÂ°ûÁä∂ÊÄÅÔºåÁõ¥Âà∞ RDB ÊåÅ‰πÖÂåñÂÆåÊàêÔºåÊâç‰ºöÂìçÂ∫îÂÖ∂‰ªñÂÆ¢Êà∑Á´ØÂèëÊù•ÁöÑÂëΩ‰ª§ÔºåÊâÄ‰ª•Âú®Áîü‰∫ßÁéØÂ¢É‰∏ÄÂÆöË¶ÅÊÖéÁî®„ÄÇ
save ÂëΩ‰ª§‰ΩøÁî®Â¶Ç‰∏ãÔºö‰ªéÂõæÁâáÂèØ‰ª•ÁúãÂá∫ÔºåÂΩìÊâßË°åÂÆå save ÂëΩ‰ª§‰πãÂêéÔºåÊåÅ‰πÖÂåñÊñá‰ª∂ dump."><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://ahao.ink/26.jpg' />
    <link rel="shortcut icon" href="img/avatar_hua8acc2063f8134c9d13980a8a63800c2_11114_300x0_resize_box_3.png" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="ÂàáÊç¢ËèúÂçï">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hua8acc2063f8134c9d13980a8a63800c2_11114_300x0_resize_box_3.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üê∑</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">ahao&#39;s Blog</a></h1>
            <h2 class="site-description">ÈÅìÈòª‰∏îÈïøÔºåË°åÂàôÂ∞ÜËá≥</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/'
                        target="_blank"
                        title="GitHub"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com'
                        target="_blank"
                        title="Twitter"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>‰∏ªÈ°µ / Home</span>
            </a>
        </li>
        
        

        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>ÂΩíÊ°£ / Archives</span>
            </a>
        </li>
        
        

        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>ÊêúÁ¥¢ / Search</span>
            </a>
        </li>
        
        

        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>ÂÖ≥‰∫é / About</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>ÊöóËâ≤Ê®°Âºè</span>
                </li>
            
        </div>
    </ol>
</aside>
<main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/posts/redis%E6%8C%81%E4%B9%85%E5%8C%96/">
                
                    <img src="/26.jpg" loading="lazy" alt="Featured image of post RedisÊåÅ‰πÖÂåñ" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/redis/" >
                Redis
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/posts/redis%E6%8C%81%E4%B9%85%E5%8C%96/">RedisÊåÅ‰πÖÂåñ</a>
        </h2>
    
        
    </div>

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2021Âπ¥9Êúà26Êó•</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    ÈòÖËØªÊó∂Èïø: 7 ÂàÜÈíü
                </time>
            </div>
        
    </footer>
    

    
</div>
</header>

    <section class="article-content">
    
    
    <blockquote>
<p>Redis ÁöÑËØªÂÜôÈÉΩÊòØÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÊâÄ‰ª•ÂÆÉÁöÑÊÄßËÉΩËæÉÈ´òÔºå‰ΩÜÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆ‰ºöÈöèÁùÄÊúçÂä°Âô®ÁöÑÈáçÂêØËÄå‰∏¢Â§±Ôºå‰∏∫‰∫Ü‰øùËØÅÊï∞ÊçÆ‰∏ç‰∏¢Â§±ÔºåÊàë‰ª¨ÈúÄË¶ÅÂ∞ÜÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÂ≠òÂÇ®Âà∞Á£ÅÁõòÔºå‰ª•‰æø Redis ÈáçÂêØÊó∂ËÉΩÂ§ü‰ªéÁ£ÅÁõò‰∏≠ÊÅ¢Â§çÂéüÊúâÁöÑÊï∞ÊçÆÔºåËÄåÊï¥‰∏™ËøáÁ®ãÂ∞±Âè´ÂÅö Redis ÊåÅ‰πÖÂåñ„ÄÇ</p>
</blockquote>
<p><img src="https://s2.loli.net/2021/12/13/ufiDXC4ahNzKklE.png"
	
	
	
	loading="lazy"
	
		alt="image.png"
	
	
></p>
<p>Redis ÊåÅ‰πÖÂåñ‰πüÊòØ Redis Âíå Memcached ÁöÑ‰∏ªË¶ÅÂå∫Âà´‰πã‰∏ÄÔºåÂõ†‰∏∫ Memcached ‰∏çÂÖ∑Â§áÊåÅ‰πÖÂåñÂäüËÉΩ„ÄÇ</p>
<h1 id="ÊåÅ‰πÖÂåñÁöÑÂá†ÁßçÊñπÂºè">ÊåÅ‰πÖÂåñÁöÑÂá†ÁßçÊñπÂºè</h1>
<p>Redis ÊåÅ‰πÖÂåñÊã•Êúâ‰ª•‰∏ã‰∏âÁßçÊñπÂºèÔºö</p>
<ul>
<li><strong>Âø´ÁÖßÊñπÂºè</strong>ÔºàRDB, Redis DataBaseÔºâÂ∞ÜÊüê‰∏Ä‰∏™Êó∂ÂàªÁöÑÂÜÖÂ≠òÊï∞ÊçÆÔºå‰ª•‰∫åËøõÂà∂ÁöÑÊñπÂºèÂÜôÂÖ•Á£ÅÁõòÔºõ</li>
<li><strong>Êñá‰ª∂ËøΩÂä†ÊñπÂºè</strong>ÔºàAOF, Append Only FileÔºâÔºåËÆ∞ÂΩïÊâÄÊúâÁöÑÊìç‰ΩúÂëΩ‰ª§ÔºåÂπ∂‰ª•ÊñáÊú¨ÁöÑÂΩ¢ÂºèËøΩÂä†Âà∞Êñá‰ª∂‰∏≠Ôºõ</li>
<li><strong>Ê∑∑ÂêàÊåÅ‰πÖÂåñÊñπÂºè</strong>ÔºåRedis 4.0 ‰πãÂêéÊñ∞Â¢ûÁöÑÊñπÂºèÔºåÊ∑∑ÂêàÊåÅ‰πÖÂåñÊòØÁªìÂêà‰∫Ü RDB Âíå AOF ÁöÑ‰ºòÁÇπÔºåÂú®ÂÜôÂÖ•ÁöÑÊó∂ÂÄôÔºåÂÖàÊääÂΩìÂâçÁöÑÊï∞ÊçÆ‰ª• RDB ÁöÑÂΩ¢ÂºèÂÜôÂÖ•Êñá‰ª∂ÁöÑÂºÄÂ§¥ÔºåÂÜçÂ∞ÜÂêéÁª≠ÁöÑÊìç‰ΩúÂëΩ‰ª§‰ª• AOF ÁöÑÊ†ºÂºèÂ≠òÂÖ•Êñá‰ª∂ÔºåËøôÊ†∑Êó¢ËÉΩ‰øùËØÅ Redis ÈáçÂêØÊó∂ÁöÑÈÄüÂ∫¶ÔºåÂèàËÉΩÂáè‰ΩéÊï∞ÊçÆ‰∏¢Â§±ÁöÑÈ£éÈô©„ÄÇ</li>
</ul>
<p>Âõ†‰∏∫ÊØèÁßçÊåÅ‰πÖÂåñÊñπÊ°àÔºåÈÉΩÊúâÁâπÂÆöÁöÑ‰ΩøÁî®Âú∫ÊôØÔºåËÆ©Êàë‰ª¨ÂÖà‰ªé RDB ÊåÅ‰πÖÂåñËØ¥Ëµ∑Âêß„ÄÇ</p>
<h1 id="redisÊåÅ‰πÖÂåñ--rdb">RedisÊåÅ‰πÖÂåñ&ndash;RDB</h1>
<p>RDBÔºàRedis DataBaseÔºâÊòØÂ∞ÜÊüê‰∏Ä‰∏™Êó∂ÂàªÁöÑÂÜÖÂ≠òÂø´ÁÖßÔºàSnapshotÔºâÔºå‰ª•‰∫åËøõÂà∂ÁöÑÊñπÂºèÂÜôÂÖ•Á£ÅÁõòÁöÑËøáÁ®ã„ÄÇ</p>
<h2 id="ÊåÅ‰πÖÂåñËß¶Âèë">ÊåÅ‰πÖÂåñËß¶Âèë</h2>
<p>RDB ÁöÑÊåÅ‰πÖÂåñËß¶ÂèëÊñπÂºèÊúâ‰∏§Á±ªÔºö‰∏ÄÁ±ªÊòØÊâãÂä®Ëß¶ÂèëÔºåÂè¶‰∏ÄÁ±ªÊòØËá™Âä®Ëß¶Âèë„ÄÇ</p>
<h3 id="ÊâãÂä®Ëß¶Âèë">ÊâãÂä®Ëß¶Âèë</h3>
<p>ÊâãÂä®Ëß¶ÂèëÊåÅ‰πÖÂåñÁöÑÊìç‰ΩúÊúâ‰∏§‰∏™Ôºö <code>save</code> Âíå <code>bgsave</code> ÔºåÂÆÉ‰ª¨‰∏ªË¶ÅÂå∫Âà´‰ΩìÁé∞Âú®ÔºöÊòØÂê¶ÈòªÂ°û Redis ‰∏ªÁ∫øÁ®ãÁöÑÊâßË°å„ÄÇ</p>
<h4 id="save-ÂëΩ‰ª§">save ÂëΩ‰ª§</h4>
<p>Âú®ÂÆ¢Êà∑Á´Ø‰∏≠ÊâßË°å <code>save</code> ÂëΩ‰ª§ÔºåÂ∞±‰ºöËß¶Âèë Redis ÁöÑÊåÅ‰πÖÂåñÔºå‰ΩÜÂêåÊó∂‰πüÊòØ‰Ωø Redis Â§Ñ‰∫éÈòªÂ°ûÁä∂ÊÄÅÔºåÁõ¥Âà∞ RDB ÊåÅ‰πÖÂåñÂÆåÊàêÔºåÊâç‰ºöÂìçÂ∫îÂÖ∂‰ªñÂÆ¢Êà∑Á´ØÂèëÊù•ÁöÑÂëΩ‰ª§ÔºåÊâÄ‰ª•<strong>Âú®Áîü‰∫ßÁéØÂ¢É‰∏ÄÂÆöË¶ÅÊÖéÁî®</strong>„ÄÇ</p>
<p><code>save</code> ÂëΩ‰ª§‰ΩøÁî®Â¶Ç‰∏ãÔºö<img src="https://s2.loli.net/2021/12/13/sSyYdZjqoxbFa9I.png"
	
	
	
	loading="lazy"
	
		alt="image.png"
	
	
>‰ªéÂõæÁâáÂèØ‰ª•ÁúãÂá∫ÔºåÂΩìÊâßË°åÂÆå <code>save</code> ÂëΩ‰ª§‰πãÂêéÔºåÊåÅ‰πÖÂåñÊñá‰ª∂ <code>dump.rdb</code> ÁöÑ‰øÆÊîπÊó∂Èó¥Â∞±Âèò‰∫ÜÔºåËøôÂ∞±Ë°®Á§∫ <code>save</code> ÊàêÂäüÁöÑËß¶Âèë‰∫Ü RDB ÊåÅ‰πÖÂåñ„ÄÇ <code>save</code> ÂëΩ‰ª§ÊâßË°åÊµÅÁ®ãÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/13/Zu17OH6QVMKaoIx.png"
	
	
	
	loading="lazy"
	
		alt="image.png"
	
	
></p>
<h4 id="bgsave-ÂëΩ‰ª§">bgsave ÂëΩ‰ª§</h4>
<p>bgsaveÔºàbackground saveÔºâÊó¢ÂêéÂè∞‰øùÂ≠òÁöÑÊÑèÊÄùÔºå ÂÆÉÂíå <code>save</code> ÂëΩ‰ª§ÊúÄÂ§ßÁöÑÂå∫Âà´Â∞±ÊòØ <code>bgsave</code> ‰ºö fork() ‰∏Ä‰∏™Â≠êËøõÁ®ãÊù•ÊâßË°åÊåÅ‰πÖÂåñÔºåÊï¥‰∏™ËøáÁ®ã‰∏≠Âè™ÊúâÂú® fork() Â≠êËøõÁ®ãÊó∂ÊúâÁü≠ÊöÇÁöÑÈòªÂ°ûÔºåÂΩìÂ≠êËøõÁ®ãË¢´ÂàõÂª∫‰πãÂêéÔºåRedis ÁöÑ‰∏ªËøõÁ®ãÂ∞±ÂèØ‰ª•ÂìçÂ∫îÂÖ∂‰ªñÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±Ç‰∫ÜÔºåÁõ∏ÂØπ‰∫éÊï¥‰∏™ÊµÅÁ®ãÈÉΩÈòªÂ°ûÁöÑ <code>save</code> ÂëΩ‰ª§Êù•ËØ¥ÔºåÊòæÁÑ∂ <code>bgsave</code> ÂëΩ‰ª§Êõ¥ÈÄÇÂêàÊàë‰ª¨‰ΩøÁî®„ÄÇ <code>bgsave</code> ÂëΩ‰ª§‰ΩøÁî®ÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/13/qIsaFWgD1AoEVcp.png"
	
	
	
	loading="lazy"
	
		alt="image.png"
	
	
></p>
<p><code>bgsave</code> ÊâßË°åÊµÅÁ®ãÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/13/mA4JU8edhRCOgw7.png"
	
	
	
	loading="lazy"
	
		alt="image.png"
	
	
></p>
<h3 id="Ëá™Âä®Ëß¶Âèë">Ëá™Âä®Ëß¶Âèë</h3>
<p>ËØ¥ÂÆå‰∫Ü RDB ÁöÑÊâãÂä®Ëß¶ÂèëÊñπÂºèÔºå‰∏ãÈù¢Êù•ÁúãÂ¶Ç‰ΩïËá™Âä®Ëß¶Âèë RDB ÊåÅ‰πÖÂåñÔºü RDB Ëá™Âä®ÊåÅ‰πÖÂåñ‰∏ªË¶ÅÊù•Ê∫ê‰∫é‰ª•‰∏ãÂá†ÁßçÊÉÖÂÜµ„ÄÇ</p>
<h4 id="save-m-n">save m n</h4>
<p><code>save m n</code> ÊòØÊåáÂú® m ÁßíÂÜÖÔºåÂ¶ÇÊûúÊúâ n ‰∏™ÈîÆÂèëÁîüÊîπÂèòÔºåÂàôËá™Âä®Ëß¶ÂèëÊåÅ‰πÖÂåñ„ÄÇ ÂèÇÊï∞ m Âíå n ÂèØ‰ª•Âú® Redis ÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠ÊâæÂà∞Ôºå‰æãÂ¶ÇÔºå<code>save 60 1</code> ÂàôË°®ÊòéÂú® 60 ÁßíÂÜÖÔºåËá≥Â∞ëÊúâ‰∏Ä‰∏™ÈîÆÂèëÁîüÊîπÂèòÔºåÂ∞±‰ºöËß¶Âèë RDB ÊåÅ‰πÖÂåñ„ÄÇ Ëá™Âä®Ëß¶ÂèëÊåÅ‰πÖÂåñÔºåÊú¨Ë¥®ÊòØ Redis ÈÄöËøáÂà§Êñ≠ÔºåÂ¶ÇÊûúÊª°Ë∂≥ËÆæÁΩÆÁöÑËß¶ÂèëÊù°‰ª∂ÔºåËá™Âä®ÊâßË°å‰∏ÄÊ¨° <code>bgsave</code> ÂëΩ‰ª§„ÄÇ Ê≥®ÊÑèÔºöÂΩìËÆæÁΩÆÂ§ö‰∏™ save m n ÂëΩ‰ª§Êó∂ÔºåÊª°Ë∂≥‰ªªÊÑè‰∏Ä‰∏™Êù°‰ª∂ÈÉΩ‰ºöËß¶ÂèëÊåÅ‰πÖÂåñ„ÄÇ ‰æãÂ¶ÇÔºåÊàë‰ª¨ËÆæÁΩÆ‰∫Ü‰ª•‰∏ã‰∏§‰∏™ save m n ÂëΩ‰ª§Ôºö</p>
<ul>
<li>save 60 10</li>
<li>save 600 1</li>
</ul>
<p>ÂΩì 60s ÂÜÖÂ¶ÇÊûúÊúâ 10 Ê¨° Redis ÈîÆÂÄºÂèëÁîüÊîπÂèòÔºåÂ∞±‰ºöËß¶ÂèëÊåÅ‰πÖÂåñÔºõÂ¶ÇÊûú 60s ÂÜÖ Redis ÁöÑÈîÆÂÄºÊîπÂèòÊ¨°Êï∞Â∞ë‰∫é 10 Ê¨°ÔºåÈÇ£‰πà Redis Â∞±‰ºöÂà§Êñ≠ 600s ÂÜÖÔºåRedis ÁöÑÈîÆÂÄºÊòØÂê¶Ëá≥Â∞ëË¢´‰øÆÊîπ‰∫Ü‰∏ÄÊ¨°ÔºåÂ¶ÇÊûúÊª°Ë∂≥Âàô‰ºöËß¶ÂèëÊåÅ‰πÖÂåñ„ÄÇ</p>
<h4 id="flushall">flushall</h4>
<p><code>flushall</code> ÂëΩ‰ª§Áî®‰∫éÊ∏ÖÁ©∫ Redis Êï∞ÊçÆÂ∫ìÔºåÂú®Áîü‰∫ßÁéØÂ¢É‰∏ã‰∏ÄÂÆöÊÖéÁî®ÔºåÂΩì Redis ÊâßË°å‰∫Ü <code>flushall</code> ÂëΩ‰ª§‰πãÂêéÔºåÂàô‰ºöËß¶ÂèëËá™Âä®ÊåÅ‰πÖÂåñÔºåÊää RDB Êñá‰ª∂Ê∏ÖÁ©∫„ÄÇ ÊâßË°åÁªìÊûúÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/13/YDK4vj25S3mRCqd.png"
	
	
	
	loading="lazy"
	
		alt="image.png"
	
	
></p>
<h3 id="‰∏ª‰ªéÂêåÊ≠•Ëß¶Âèë">‰∏ª‰ªéÂêåÊ≠•Ëß¶Âèë</h3>
<p>Âú® Redis ‰∏ª‰ªéÂ§çÂà∂‰∏≠ÔºåÂΩì‰ªéËäÇÁÇπÊâßË°åÂÖ®ÈáèÂ§çÂà∂Êìç‰ΩúÊó∂Ôºå‰∏ªËäÇÁÇπ‰ºöÊâßË°å <code>bgsave</code> ÂëΩ‰ª§ÔºåÂπ∂Â∞Ü RDB Êñá‰ª∂ÂèëÈÄÅÁªô‰ªéËäÇÁÇπÔºåËØ•ËøáÁ®ã‰ºöËá™Âä®Ëß¶Âèë Redis ÊåÅ‰πÖÂåñ„ÄÇ</p>
<h2 id="ÈÖçÁΩÆËØ¥Êòé">ÈÖçÁΩÆËØ¥Êòé</h2>
<p>ÂêàÁêÜÁöÑËÆæÁΩÆ RDB ÁöÑÈÖçÁΩÆÔºåÂèØ‰ª•‰øùÈöú Redis È´òÊïà‰∏îÁ®≥ÂÆöÁöÑËøêË°åÔºå‰∏ãÈù¢‰∏ÄËµ∑Êù•Áúã RDB ÁöÑÈÖçÁΩÆÈ°πÈÉΩÊúâÂì™‰∫õÔºü</p>
<p>RDB ÈÖçÁΩÆÂèÇÊï∞ÂèØ‰ª•Âú® Redis ÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠ÊâæËßÅÔºåÂÖ∑‰ΩìÂÜÖÂÆπÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># RDB ‰øùÂ≠òÁöÑÊù°‰ª∂
</span></span><span class="line"><span class="cl">save 900 1
</span></span><span class="line"><span class="cl">save 300 10
</span></span><span class="line"><span class="cl">save 60 10000
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># bgsave Â§±Ë¥•‰πãÂêéÔºåÊòØÂê¶ÂÅúÊ≠¢ÊåÅ‰πÖÂåñÊï∞ÊçÆÂà∞Á£ÅÁõòÔºåyes Ë°®Á§∫ÂÅúÊ≠¢ÊåÅ‰πÖÂåñÔºåno Ë°®Á§∫ÂøΩÁï•ÈîôËØØÁªßÁª≠ÂÜôÊñá‰ª∂„ÄÇ
</span></span><span class="line"><span class="cl">stop-writes-on-bgsave-error yes
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># RDB Êñá‰ª∂ÂéãÁº©
</span></span><span class="line"><span class="cl">rdbcompression yes
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># ÂÜôÂÖ•Êñá‰ª∂ÂíåËØªÂèñÊñá‰ª∂Êó∂ÊòØÂê¶ÂºÄÂêØ RDB Êñá‰ª∂Ê£ÄÊü•ÔºåÊ£ÄÊü•ÊòØÂê¶ÊúâÊó†ÊçüÂùèÔºåÂ¶ÇÊûúÂú®ÂêØÂä®ÊòØÊ£ÄÊü•ÂèëÁé∞ÊçüÂùèÔºåÂàôÂÅúÊ≠¢ÂêØÂä®„ÄÇ
</span></span><span class="line"><span class="cl">rdbchecksum yes
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># RDB Êñá‰ª∂Âêç
</span></span><span class="line"><span class="cl">dbfilename dump.rdb
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># RDB Êñá‰ª∂ÁõÆÂΩï
</span></span><span class="line"><span class="cl">dir ./
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÖ∂‰∏≠ÊØîËæÉÈáçË¶ÅÁöÑÂèÇÊï∞Â¶Ç‰∏ãÂàóË°®Ôºö <strong>‚ë† save ÂèÇÊï∞</strong> ÂÆÉÊòØÁî®Êù•ÈÖçÁΩÆËß¶Âèë RDB ÊåÅ‰πÖÂåñÊù°‰ª∂ÁöÑÂèÇÊï∞ÔºåÊª°Ë∂≥‰øùÂ≠òÊù°‰ª∂Êó∂Â∞Ü‰ºöÊääÊï∞ÊçÆÊåÅ‰πÖÂåñÂà∞Á°¨Áõò„ÄÇ ÈªòËÆ§ÈÖçÁΩÆËØ¥ÊòéÂ¶Ç‰∏ãÔºö</p>
<ul>
<li>save 900 1ÔºöË°®Á§∫ 900 ÁßíÂÜÖÂ¶ÇÊûúËá≥Â∞ëÊúâ 1 ‰∏™ key ÂÄºÂèòÂåñÔºåÂàôÊääÊï∞ÊçÆÊåÅ‰πÖÂåñÂà∞Á°¨ÁõòÔºõ</li>
<li>save 300 10ÔºöË°®Á§∫ 300 ÁßíÂÜÖÂ¶ÇÊûúËá≥Â∞ëÊúâ 10 ‰∏™ key ÂÄºÂèòÂåñÔºåÂàôÊääÊï∞ÊçÆÊåÅ‰πÖÂåñÂà∞Á°¨ÁõòÔºõ</li>
<li>save 60 10000ÔºöË°®Á§∫ 60 ÁßíÂÜÖÂ¶ÇÊûúËá≥Â∞ëÊúâ 10000 ‰∏™ key ÂÄºÂèòÂåñÔºåÂàôÊääÊï∞ÊçÆÊåÅ‰πÖÂåñÂà∞Á°¨Áõò„ÄÇ</li>
</ul>
<p><strong>‚ë° rdbcompression ÂèÇÊï∞</strong> ÂÆÉÁöÑÈªòËÆ§ÂÄºÊòØ <code>yes</code> Ë°®Á§∫ÂºÄÂêØ RDB Êñá‰ª∂ÂéãÁº©ÔºåRedis ‰ºöÈááÁî® LZF ÁÆóÊ≥ïËøõË°åÂéãÁº©„ÄÇÂ¶ÇÊûú‰∏çÊÉ≥Ê∂àËÄó CPU ÊÄßËÉΩÊù•ËøõË°åÊñá‰ª∂ÂéãÁº©ÁöÑËØùÔºåÂèØ‰ª•ËÆæÁΩÆ‰∏∫ÂÖ≥Èó≠Ê≠§ÂäüËÉΩÔºåËøôÊ†∑ÁöÑÁº∫ÁÇπÊòØÈúÄË¶ÅÊõ¥Â§öÁöÑÁ£ÅÁõòÁ©∫Èó¥Êù•‰øùÂ≠òÊñá‰ª∂„ÄÇ <strong>‚ë¢ rdbchecksum ÂèÇÊï∞</strong> ÂÆÉÁöÑÈªòËÆ§ÂÄº‰∏∫ <code>yes</code> Ë°®Á§∫ÂÜôÂÖ•Êñá‰ª∂ÂíåËØªÂèñÊñá‰ª∂Êó∂ÊòØÂê¶ÂºÄÂêØ RDB Êñá‰ª∂Ê£ÄÊü•ÔºåÊ£ÄÊü•ÊòØÂê¶ÊúâÊó†ÊçüÂùèÔºåÂ¶ÇÊûúÂú®ÂêØÂä®ÊòØÊ£ÄÊü•ÂèëÁé∞ÊçüÂùèÔºåÂàôÂÅúÊ≠¢ÂêØÂä®„ÄÇ</p>
<h2 id="ÈÖçÁΩÆÊü•ËØ¢">ÈÖçÁΩÆÊü•ËØ¢</h2>
<p>Redis ‰∏≠ÂèØ‰ª•‰ΩøÁî®ÂëΩ‰ª§Êü•ËØ¢ÂΩìÂâçÈÖçÁΩÆÂèÇÊï∞„ÄÇÊü•ËØ¢ÂëΩ‰ª§ÁöÑÊ†ºÂºè‰∏∫Ôºö<code>config get xxx</code> Ôºå‰æãÂ¶ÇÔºåÊÉ≥Ë¶ÅËé∑Âèñ RDB Êñá‰ª∂ÁöÑÂ≠òÂÇ®ÂêçÁß∞ËÆæÁΩÆÔºåÂèØ‰ª•‰ΩøÁî® <code>config get dbfilename</code> ÔºåÊâßË°åÊïàÊûúÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/13/AvDxyGWZjgbYPCi.png"
	
	
	
	loading="lazy"
	
		alt="image.png"
	
	
></p>
<p>Êü•ËØ¢ RDB ÁöÑÊñá‰ª∂ÁõÆÂΩïÔºåÂèØ‰ΩøÁî®ÂëΩ‰ª§ <code>config get dir</code> ÔºåÊâßË°åÊïàÊûúÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/13/tboEm6qycvLUfAl.png"
	
	
	
	loading="lazy"
	
		alt="image.png"
	
	
></p>
<h2 id="ÈÖçÁΩÆËÆæÁΩÆ">ÈÖçÁΩÆËÆæÁΩÆ</h2>
<p>ËÆæÁΩÆ RDB ÁöÑÈÖçÁΩÆÔºåÂèØ‰ª•ÈÄöËøá‰ª•‰∏ã‰∏§ÁßçÊñπÂºèÔºö</p>
<ul>
<li>ÊâãÂä®‰øÆÊîπ Redis ÈÖçÁΩÆÊñá‰ª∂Ôºõ</li>
<li>‰ΩøÁî®ÂëΩ‰ª§Ë°åËÆæÁΩÆÔºå‰æãÂ¶ÇÔºå‰ΩøÁî® <code>config set dir &quot;/usr/data&quot;</code> Â∞±ÊòØÁî®‰∫é‰øÆÊîπ RDB ÁöÑÂ≠òÂÇ®ÁõÆÂΩï„ÄÇ</li>
</ul>
<p><strong>Ê≥®ÊÑè</strong>ÔºöÊâãÂä®‰øÆÊîπ Redis ÈÖçÁΩÆÊñá‰ª∂ÁöÑÊñπÂºèÊòØÂÖ®Â±ÄÁîüÊïàÁöÑÔºåÂç≥ÈáçÂêØ Redis ÊúçÂä°Âô®ËÆæÁΩÆÂèÇÊï∞‰πü‰∏ç‰ºö‰∏¢Â§±ÔºåËÄå‰ΩøÁî®ÂëΩ‰ª§‰øÆÊîπÁöÑÊñπÂºèÔºåÂú® Redis ÈáçÂêØ‰πãÂêéÂ∞±‰ºö‰∏¢Â§±„ÄÇ‰ΩÜÊâãÂä®‰øÆÊîπ Redis ÈÖçÁΩÆÊñá‰ª∂ÔºåÊÉ≥Ë¶ÅÁ´ãÂç≥ÁîüÊïàÈúÄË¶ÅÈáçÂêØ Redis ÊúçÂä°Âô®ÔºåËÄåÂëΩ‰ª§ÁöÑÊñπÂºèÂàô‰∏çÈúÄË¶ÅÈáçÂêØ Redis ÊúçÂä°Âô®„ÄÇ</p>
<blockquote>
<p>Â∞èË¥¥Â£´ÔºöRedis ÁöÑÈÖçÁΩÆÊñá‰ª∂‰Ωç‰∫é Redis ÂÆâË£ÖÁõÆÂΩïÁöÑÊ†πË∑ØÂæÑ‰∏ãÔºåÈªòËÆ§ÂêçÁß∞‰∏∫ redis.conf„ÄÇ</p>
</blockquote>
<h2 id="rdb-Êñá‰ª∂ÊÅ¢Â§ç">RDB Êñá‰ª∂ÊÅ¢Â§ç</h2>
<p>ÂΩì Redis ÊúçÂä°Âô®ÂêØÂä®Êó∂ÔºåÂ¶ÇÊûú Redis Ê†πÁõÆÂΩïÂ≠òÂú® RDB Êñá‰ª∂ dump.rdbÔºåRedis Â∞±‰ºöËá™Âä®Âä†ËΩΩ RDB Êñá‰ª∂ÊÅ¢Â§çÊåÅ‰πÖÂåñÊï∞ÊçÆ„ÄÇ Â¶ÇÊûúÊ†πÁõÆÂΩïÊ≤°Êúâ dump.rdb Êñá‰ª∂ÔºåËØ∑ÂÖàÂ∞Ü dump.rdb Êñá‰ª∂ÁßªÂä®Âà∞ Redis ÁöÑÊ†πÁõÆÂΩï„ÄÇ <strong>È™åËØÅ RDB Êñá‰ª∂ÊòØÂê¶Ë¢´Âä†ËΩΩ</strong> Redis Âú®ÂêØÂä®Êó∂ÊúâÊó•Âøó‰ø°ÊÅØÔºå‰ºöÊòæÁ§∫ÊòØÂê¶Âä†ËΩΩ‰∫Ü RDB Êñá‰ª∂ÔºåÊàë‰ª¨ÊâßË°å Redis ÂêØÂä®ÂëΩ‰ª§Ôºö<code>src/redis-server redis.conf</code> ÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/13/xgKkor47MyWFVdq.png"
	
	
	
	loading="lazy"
	
		alt="image.png"
	
	
>‰ªéÊó•Âøó‰∏äÂèØ‰ª•ÁúãÂá∫Ôºå Redis ÊúçÂä°Âú®ÂêØÂä®Êó∂Â∑≤ÁªèÊ≠£Â∏∏Âä†ËΩΩ‰∫Ü RDB Êñá‰ª∂„ÄÇ</p>
<blockquote>
<p>Â∞èË¥¥Â£´ÔºöRedis ÊúçÂä°Âô®Âú®ËΩΩÂÖ• RDB Êñá‰ª∂ÊúüÈó¥Ôºå‰ºö‰∏ÄÁõ¥Â§Ñ‰∫éÈòªÂ°ûÁä∂ÊÄÅÔºåÁõ¥Âà∞ËΩΩÂÖ•Â∑•‰ΩúÂÆåÊàê‰∏∫Ê≠¢„ÄÇ</p>
</blockquote>
<h2 id="rdb-‰ºòÁº∫ÁÇπ">RDB ‰ºòÁº∫ÁÇπ</h2>
<h3 id="rdb-‰ºòÁÇπ">RDB ‰ºòÁÇπ</h3>
<ul>
<li>RDB ÁöÑÂÜÖÂÆπ‰∏∫‰∫åËøõÂà∂ÁöÑÊï∞ÊçÆÔºåÂç†Áî®ÂÜÖÂ≠òÊõ¥Â∞èÔºåÊõ¥Á¥ßÂáëÔºåÊõ¥ÈÄÇÂêàÂÅö‰∏∫Â§á‰ªΩÊñá‰ª∂Ôºõ</li>
<li>RDB ÂØπÁÅæÈöæÊÅ¢Â§çÈùûÂ∏∏ÊúâÁî®ÔºåÂÆÉÊòØ‰∏Ä‰∏™Á¥ßÂáëÁöÑÊñá‰ª∂ÔºåÂèØ‰ª•Êõ¥Âø´ÁöÑ‰º†ËæìÂà∞ËøúÁ®ãÊúçÂä°Âô®ËøõË°å Redis ÊúçÂä°ÊÅ¢Â§çÔºõ</li>
<li>RDB ÂèØ‰ª•Êõ¥Â§ßÁ®ãÂ∫¶ÁöÑÊèêÈ´ò Redis ÁöÑËøêË°åÈÄüÂ∫¶ÔºåÂõ†‰∏∫ÊØèÊ¨°ÊåÅ‰πÖÂåñÊó∂ Redis ‰∏ªËøõÁ®ãÈÉΩ‰ºö fork() ‰∏Ä‰∏™Â≠êËøõÁ®ãÔºåËøõË°åÊï∞ÊçÆÊåÅ‰πÖÂåñÂà∞Á£ÅÁõòÔºåRedis ‰∏ªËøõÁ®ãÂπ∂‰∏ç‰ºöÊâßË°åÁ£ÅÁõò I/O Á≠âÊìç‰ΩúÔºõ</li>
<li>‰∏é AOF Ê†ºÂºèÁöÑÊñá‰ª∂Áõ∏ÊØîÔºåRDB Êñá‰ª∂ÂèØ‰ª•Êõ¥Âø´ÁöÑÈáçÂêØ„ÄÇ</li>
</ul>
<h3 id="rdb-Áº∫ÁÇπ">RDB Áº∫ÁÇπ</h3>
<ul>
<li>Âõ†‰∏∫ RDB Âè™ËÉΩ‰øùÂ≠òÊüê‰∏™Êó∂Èó¥Èó¥ÈöîÁöÑÊï∞ÊçÆÔºåÂ¶ÇÊûú‰∏≠ÈÄî Redis ÊúçÂä°Ë¢´ÊÑèÂ§ñÁªàÊ≠¢‰∫ÜÔºåÂàô‰ºö‰∏¢Â§±‰∏ÄÊÆµÊó∂Èó¥ÂÜÖÁöÑ Redis Êï∞ÊçÆÔºõ</li>
<li>RDB ÈúÄË¶ÅÁªèÂ∏∏ fork() ÊâçËÉΩ‰ΩøÁî®Â≠êËøõÁ®ãÂ∞ÜÂÖ∂ÊåÅ‰πÖÂåñÂú®Á£ÅÁõò‰∏ä„ÄÇÂ¶ÇÊûúÊï∞ÊçÆÈõÜÂæàÂ§ßÔºåfork() ÂèØËÉΩÂæàËÄóÊó∂ÔºåÂπ∂‰∏îÂ¶ÇÊûúÊï∞ÊçÆÈõÜÂæàÂ§ß‰∏î CPU ÊÄßËÉΩ‰∏ç‰Ω≥ÔºåÂàôÂèØËÉΩÂØºËá¥ Redis ÂÅúÊ≠¢‰∏∫ÂÆ¢Êà∑Á´ØÊúçÂä°Âá†ÊØ´ÁßíÁîöËá≥‰∏ÄÁßíÈíü„ÄÇ</li>
</ul>
<h2 id="Á¶ÅÁî®ÊåÅ‰πÖÂåñ">Á¶ÅÁî®ÊåÅ‰πÖÂåñ</h2>
<p>Á¶ÅÁî®ÊåÅ‰πÖÂåñÂèØ‰ª•ÊèêÈ´ò Redis ÁöÑÊâßË°åÊïàÁéáÔºåÂ¶ÇÊûúÂØπÊï∞ÊçÆ‰∏¢Â§±‰∏çÊïèÊÑüÁöÑÊÉÖÂÜµ‰∏ãÔºåÂèØ‰ª•Âú®ËøûÊé•ÂÆ¢Êà∑Á´ØÁöÑÊÉÖÂÜµ‰∏ãÔºåÊâßË°å <code>config set save &quot;&quot;</code> ÂëΩ‰ª§Âç≥ÂèØÁ¶ÅÁî® Redis ÁöÑÊåÅ‰πÖÂåñÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/13/mRnuNCIKEVb9kso.png"
	
	
	
	loading="lazy"
	
		alt="image.png"
	
	
></p>
<h2 id="Â∞èÁªì">Â∞èÁªì</h2>
<p>ÈÄöËøáÊú¨ÊñáÊàë‰ª¨ÂèØ‰ª•ÂæóÁü•ÔºåRDB ÊåÅ‰πÖÂåñÂàÜ‰∏∫ÊâãÂä®Ëß¶ÂèëÂíåËá™Âä®Ëß¶Âèë‰∏§ÁßçÊñπÂºèÔºåÂÆÉÁöÑ‰ºòÁÇπÊòØÂ≠òÂÇ®Êñá‰ª∂Â∞èÔºåRedis ÂêØÂä® Êó∂ÊÅ¢Â§çÊï∞ÊçÆÊØîËæÉÂø´ÔºåÁº∫ÁÇπÊòØÊúâ‰∏¢Â§±Êï∞ÊçÆÁöÑÈ£éÈô©„ÄÇRDB Êñá‰ª∂ÁöÑÊÅ¢Â§ç‰πüÂæàÁÆÄÂçïÔºåÂè™ÈúÄË¶ÅÊää RDB Êñá‰ª∂ÊîæÂà∞ Redis ÁöÑÊ†πÁõÆÂΩïÔºåÂú® Redis ÂêØÂä®Êó∂Â∞±‰ºöËá™Âä®Âä†ËΩΩÂπ∂ÊÅ¢Â§çÊï∞ÊçÆ„ÄÇ</p>
<h1 id="redisÊåÅ‰πÖÂåñ--aof">RedisÊåÅ‰πÖÂåñ&ndash;AOF</h1>
<p>‰ΩøÁî® RDB ÊåÅ‰πÖÂåñÊúâ‰∏Ä‰∏™È£éÈô©ÔºåÂÆÉÂèØËÉΩ‰ºöÈÄ†ÊàêÊúÄÊñ∞Êï∞ÊçÆ‰∏¢Â§±ÁöÑÈ£éÈô©„ÄÇÂõ†‰∏∫ RDB ÁöÑÊåÅ‰πÖÂåñÊúâ‰∏ÄÂÆöÁöÑÊó∂Èó¥Èó¥ÈöîÔºåÂú®Ëøô‰∏™Êó∂Èó¥ÊÆµÂÜÖÂ¶ÇÊûú Redis ÊúçÂä°ÊÑèÂ§ñÁªàÊ≠¢ÁöÑËØùÔºåÂ∞±‰ºöÈÄ†ÊàêÊúÄÊñ∞ÁöÑÊï∞ÊçÆÂÖ®ÈÉ®‰∏¢Â§±„ÄÇ</p>
<p>ÂèØËÉΩ‰ºöÊìç‰Ωú Redis ÊúçÂä°ÊÑèÂ§ñÁªàÊ≠¢ÁöÑÊù°‰ª∂Ôºö</p>
<ul>
<li>ÂÆâË£Ö Redis ÁöÑÊú∫Âô®ÂÅúÊ≠¢ËøêË°åÔºåËìùÂ±èÊàñËÄÖÁ≥ªÁªüÂ¥©Ê∫ÉÔºõ</li>
<li>ÂÆâË£Ö Redis ÁöÑÊú∫Âô®Âá∫Áé∞ÁîµÊ∫êÊïÖÈöúÔºå‰æãÂ¶ÇÁ™ÅÁÑ∂Êñ≠ÁîµÔºõ</li>
<li>‰ΩøÁî® <code>kill -9 Redis_PID</code> Á≠â„ÄÇ</li>
</ul>
<p>ÈÇ£‰πàÂ¶Ç‰ΩïËß£ÂÜ≥‰ª•‰∏äÁöÑËøô‰∫õÈóÆÈ¢òÂë¢ÔºüRedis ‰∏∫Êàë‰ª¨Êèê‰æõ‰∫ÜÂè¶‰∏ÄÁßçÊåÅ‰πÖÂåñÁöÑÊñπÊ°à‚Äî‚ÄîAOF„ÄÇ</p>
<h2 id="ÁÆÄ‰ªã">ÁÆÄ‰ªã</h2>
<p>AOFÔºàAppend Only FileÔºâ‰∏≠ÊñáÊòØÈôÑÂä†Âà∞Êñá‰ª∂ÔºåÈ°æÂêçÊÄù‰πâ AOF ÂèØ‰ª•Êää Redis ÊØè‰∏™ÈîÆÂÄºÂØπÊìç‰ΩúÈÉΩËÆ∞ÂΩïÂà∞Êñá‰ª∂Ôºàappendonly.aofÔºâ‰∏≠„ÄÇ</p>
<h2 id="ÊåÅ‰πÖÂåñÊü•ËØ¢ÂíåËÆæÁΩÆ">ÊåÅ‰πÖÂåñÊü•ËØ¢ÂíåËÆæÁΩÆ</h2>
<h3 id="Êü•ËØ¢-aof-ÂêØÂä®Áä∂ÊÄÅ">Êü•ËØ¢ AOF ÂêØÂä®Áä∂ÊÄÅ</h3>
<p>‰ΩøÁî® <code>config get appendonly</code> ÂëΩ‰ª§ÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/13/lisbUCv97jf6DVG.png"
	
	
	
	loading="lazy"
	
		alt="image.png"
	
	
></p>
<p>ÂÖ∂‰∏≠ÔºåÁ¨¨‰∏ÄË°å‰∏∫ AOF Êñá‰ª∂ÁöÑÂêçÁß∞ÔºåËÄåÊúÄÂêé‰∏ÄË°åË°®Á§∫ AOF ÂêØÂä®ÁöÑÁä∂ÊÄÅÔºåyes Ë°®Á§∫Â∑≤ÂêØÂä®Ôºåno Ë°®Á§∫Êú™ÂêØÂä®„ÄÇ</p>
<h3 id="ÂºÄÂêØ-aof-ÊåÅ‰πÖÂåñ">ÂºÄÂêØ AOF ÊåÅ‰πÖÂåñ</h3>
<p>Redis ÈªòËÆ§ÊòØÂÖ≥Èó≠ AOF ÊåÅ‰πÖÂåñÁöÑÔºåÊÉ≥Ë¶ÅÂºÄÂêØ AOF ÊåÅ‰πÖÂåñÔºåÊúâ‰ª•‰∏ã‰∏§ÁßçÊñπÂºèÔºö</p>
<ul>
<li>ÈÄöËøáÂëΩ‰ª§Ë°åÁöÑÊñπÂºèÔºõ</li>
<li>ÈÄöËøá‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂ÁöÑÊñπÂºèÔºàredis.confÔºâ„ÄÇ</li>
</ul>
<p>‰∏ãÈù¢ÂàÜÂà´Êù•Áúã‰ª•‰∏ä‰∏§ÁßçÊñπÂºèÁöÑÂÆûÁé∞„ÄÇ</p>
<h4 id="ÂëΩ‰ª§Ë°åÂêØÂä®-aof">ÂëΩ‰ª§Ë°åÂêØÂä® AOF</h4>
<p>ÂëΩ‰ª§Ë°åÂêØÂä® AOFÔºå‰ΩøÁî® <code>config set appendonly yes</code> ÂëΩ‰ª§ÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/13/gv42tnQEfeAKLhF.png"
	
	
	
	loading="lazy"
	
		alt="image.png"
	
	
></p>
<p><strong>ÂëΩ‰ª§Ë°åÂêØÂä® AOF ÁöÑ‰ºòÁº∫ÁÇπ</strong>ÔºöÂëΩ‰ª§Ë°åÂêØÂä®‰ºòÁÇπÊòØÊó†ÈúÄÈáçÂêØ Redis ÊúçÂä°ÔºåÁº∫ÁÇπÊòØÂ¶ÇÊûú Redis ÊúçÂä°ÈáçÂêØÔºåÂàô‰πãÂâç‰ΩøÁî®ÂëΩ‰ª§Ë°åËÆæÁΩÆÁöÑÈÖçÁΩÆÂ∞±‰ºöÂ§±Êïà„ÄÇ</p>
<h4 id="ÈÖçÁΩÆÊñá‰ª∂ÂêØÂä®-aof">ÈÖçÁΩÆÊñá‰ª∂ÂêØÂä® AOF</h4>
<p>Redis ÁöÑÈÖçÁΩÆÊñá‰ª∂Âú®ÂÆÉÁöÑÊ†πË∑ØÂæÑ‰∏ãÁöÑ redis.conf Êñá‰ª∂‰∏≠ÔºåËé∑Âèñ Redis ÁöÑÊ†πÁõÆÂΩïÂèØ‰ª•‰ΩøÁî®ÂëΩ‰ª§ <code>config get dir</code> Ëé∑ÂèñÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/13/Sk2ItMY5AJ9deh3.png"
	
	
	
	loading="lazy"
	
		alt="image.png"
	
	
></p>
<p>Âè™ÈúÄË¶ÅÂú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠ËÆæÁΩÆ <code>appendonly yes</code> Âç≥ÂèØÔºåÈªòËÆ§ <code>appendonly no</code> Ë°®Á§∫ÂÖ≥Èó≠ AOF ÊåÅ‰πÖÂåñ„ÄÇ <strong>ÈÖçÁΩÆÊñá‰ª∂ÂêØÂä® AOF ÁöÑ‰ºòÁº∫ÁÇπ</strong>Ôºö‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂ÁöÑÁº∫ÁÇπÊòØÊØèÊ¨°‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂ÈÉΩË¶ÅÈáçÂêØ Redis ÊúçÂä°ÊâçËÉΩÁîüÊïàÔºå‰ºòÁÇπÊòØÊó†ËÆ∫ÈáçÂêØÂ§öÂ∞ëÊ¨° Redis ÊúçÂä°ÔºåÈÖçÁΩÆÊñá‰ª∂‰∏≠ËÆæÁΩÆÁöÑÈÖçÁΩÆ‰ø°ÊÅØÈÉΩ‰∏ç‰ºöÂ§±Êïà„ÄÇ</p>
<h2 id="Ëß¶ÂèëÊåÅ‰πÖÂåñ">Ëß¶ÂèëÊåÅ‰πÖÂåñ</h2>
<p>AOF ÊåÅ‰πÖÂåñÂºÄÂêØ‰πãÂêéÔºåÂè™Ë¶ÅÊª°Ë∂≥‰∏ÄÂÆöÊù°‰ª∂ÔºåÂ∞±‰ºöËß¶Âèë AOF ÊåÅ‰πÖÂåñ„ÄÇAOF ÁöÑËß¶ÂèëÊù°‰ª∂ÂàÜ‰∏∫‰∏§ÁßçÔºöËá™Âä®Ëß¶ÂèëÂíåÊâãÂä®Ëß¶Âèë„ÄÇ</p>
<h3 id="Ëá™Âä®Ëß¶Âèë-1">Ëá™Âä®Ëß¶Âèë</h3>
<p>Êúâ‰∏§ÁßçÊÉÖÂÜµÂèØ‰ª•Ëá™Âä®Ëß¶Âèë AOF ÊåÅ‰πÖÂåñÔºåÂàÜ‰∏∫ÊòØÔºö<strong>Êª°Ë∂≥ AOF ËÆæÁΩÆÁöÑÁ≠ñÁï•Ëß¶Âèë</strong>Âíå**Êª°Ë∂≥ AOF ÈáçÂÜôËß¶Âèë„ÄÇ**ÂÖ∂‰∏≠ÔºåAOF ÈáçÂÜôËß¶Âèë‰ºöÂú®Êú¨ÊñáÁöÑÂêéÂçäÈÉ®ÂàÜËØ¶ÁªÜ‰ªãÁªçÔºåËøôÈáåÈáçÁÇπÊù•ËØ¥ AOF ÊåÅ‰πÖÂåñÁ≠ñÁï•ÈÉΩÊúâÂì™‰∫õ„ÄÇ AOF ÊåÅ‰πÖÂåñÁ≠ñÁï•ÔºåÂàÜ‰∏∫‰ª•‰∏ã‰∏âÁßçÔºö</p>
<ul>
<li>alwaysÔºöÊØèÊù° Redis Êìç‰ΩúÂëΩ‰ª§ÈÉΩ‰ºöÂÜôÂÖ•Á£ÅÁõòÔºåÊúÄÂ§ö‰∏¢Â§±‰∏ÄÊù°Êï∞ÊçÆÔºõ</li>
<li>everysecÔºöÊØèÁßíÈíüÂÜôÂÖ•‰∏ÄÊ¨°Á£ÅÁõòÔºåÊúÄÂ§ö‰∏¢Â§±‰∏ÄÁßíÁöÑÊï∞ÊçÆÔºõ</li>
<li>noÔºö‰∏çËÆæÁΩÆÂÜôÂÖ•Á£ÅÁõòÁöÑËßÑÂàôÔºåÊ†πÊçÆÂΩìÂâçÊìç‰ΩúÁ≥ªÁªüÊù•ÂÜ≥ÂÆö‰ΩïÊó∂ÂÜôÂÖ•Á£ÅÁõòÔºåLinux ÈªòËÆ§ 30s ÂÜôÂÖ•‰∏ÄÊ¨°Êï∞ÊçÆËá≥Á£ÅÁõò„ÄÇ</li>
</ul>
<p>Ëøô‰∏âÁßçÈÖçÁΩÆÂèØ‰ª•Âú® Redis ÁöÑÈÖçÁΩÆÊñá‰ª∂Ôºàredis.confÔºâ‰∏≠ËÆæÁΩÆÔºåÂ¶Ç‰∏ã‰ª£Á†ÅÊâÄÁ§∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># ÂºÄÂêØÊØèÁßíÂÜôÂÖ•‰∏ÄÊ¨°ÁöÑÊåÅ‰πÖÂåñÁ≠ñÁï•
</span></span><span class="line"><span class="cl">appendfsync everysec
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>Â∞èË¥¥Â£´ÔºöÂõ†‰∏∫ÊØèÊ¨°ÂÜôÂÖ•Á£ÅÁõòÈÉΩ‰ºöÂØπ Redis ÁöÑÊÄßËÉΩÈÄ†Êàê‰∏ÄÂÆöÁöÑÂΩ±ÂìçÔºåÊâÄ‰ª•Ë¶ÅÊ†πÊçÆÁî®Êà∑ÁöÑÂÆûÈôÖÊÉÖÂÜµËÆæÁΩÆÁõ∏Â∫îÁöÑÁ≠ñÁï•Ôºå‰∏ÄËà¨ËÆæÁΩÆÊØèÁßíÂÜôÂÖ•‰∏ÄÊ¨°Á£ÅÁõòÁöÑÈ¢ëÁéáÂ∞±ÂèØ‰ª•Êª°Ë∂≥Â§ßÈÉ®ÂàÜÁöÑ‰ΩøÁî®Âú∫ÊôØ‰∫Ü„ÄÇ</p>
</blockquote>
<p>Ëß¶ÂèëËá™Âä®ÊåÅ‰πÖÂåñÁöÑ‰∏§ÁßçÊÉÖÂÜµÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/13/VKqGQcexHNJiMBh.png"
	
	
	
	loading="lazy"
	
		alt="image.png"
	
	
></p>
<h3 id="ÊâãÂä®Ëß¶Âèë-1">ÊâãÂä®Ëß¶Âèë</h3>
<p>Âú®ÂÆ¢Êà∑Á´ØÊâßË°å <code>bgrewriteaof</code> ÂëΩ‰ª§Â∞±ÂèØ‰ª•ÊâãÂä®Ëß¶Âèë AOF ÊåÅ‰πÖÂåñÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/13/fqz6kOD5SLlbyvh.png"
	
	
	
	loading="lazy"
	
		alt="5.png"
	
	
>ÂèØ‰ª•ÁúãÂá∫ÊâßË°åÂÆå <code>bgrewriteaof</code> ÂëΩ‰ª§‰πãÂêéÔºåAOF ÊåÅ‰πÖÂåñÂ∞±‰ºöË¢´Ëß¶Âèë„ÄÇ</p>
<h2 id="aof-Êñá‰ª∂ÈáçÂÜô">AOF Êñá‰ª∂ÈáçÂÜô</h2>
<p>AOF ÊòØÈÄöËøáËÆ∞ÂΩï Redis ÁöÑÊâßË°åÂëΩ‰ª§Êù•ÊåÅ‰πÖÂåñÔºà‰øùÂ≠òÔºâÊï∞ÊçÆÁöÑÔºåÊâÄ‰ª•ÈöèÁùÄÊó∂Èó¥ÁöÑÊµÅÈÄù AOF Êñá‰ª∂‰ºöË∂äÊù•Ë∂äÂ§öÔºåËøôÊ†∑‰∏ç‰ªÖÂ¢ûÂä†‰∫ÜÊúçÂä°Âô®ÁöÑÂ≠òÂÇ®ÂéãÂäõÔºå‰πü‰ºöÈÄ†Êàê Redis ÈáçÂêØÈÄüÂ∫¶ÂèòÊÖ¢Ôºå‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò Redis Êèê‰æõ‰∫Ü AOF ÈáçÂÜôÁöÑÂäüËÉΩ„ÄÇ</p>
<h3 id="‰ªÄ‰πàÊòØ-aof-ÈáçÂÜô">‰ªÄ‰πàÊòØ AOF ÈáçÂÜôÔºü</h3>
<p>AOF ÈáçÂÜôÊåáÁöÑÊòØÂÆÉ‰ºöÁõ¥Êé•ËØªÂèñ Redis ÊúçÂä°Âô®ÂΩìÂâçÁöÑÁä∂ÊÄÅÔºåÂπ∂ÂéãÁº©‰øùÂ≠ò‰∏∫ AOF Êñá‰ª∂„ÄÇ‰æãÂ¶ÇÔºåÊàë‰ª¨Â¢ûÂä†‰∫Ü‰∏Ä‰∏™ËÆ°Êï∞Âô®ÔºåÂπ∂ÂØπÂÆÉÂÅö‰∫Ü 99 Ê¨°‰øÆÊîπÔºåÂ¶ÇÊûú‰∏çÂÅö AOF ÈáçÂÜôÁöÑËØùÔºåÈÇ£‰πàÊåÅ‰πÖÂåñÊñá‰ª∂‰∏≠Â∞±‰ºöÊúâ 100 Êù°ËÆ∞ÂΩïÊâßË°åÂëΩ‰ª§ÁöÑ‰ø°ÊÅØÔºåËÄå AOF ÈáçÂÜô‰πãÂêéÔºå‰πãÂêéËÆ∞ÂΩï‰∏ÄÊù°Ê≠§ËÆ°Êï∞Âô®ÊúÄÁªàÁöÑÁªìÊûú‰ø°ÊÅØÔºåËøôÊ†∑Â∞±ÂéªÈô§‰∫ÜÊâÄÊúâÁöÑÊó†Êïà‰ø°ÊÅØ„ÄÇ</p>
<h3 id="aof-ÈáçÂÜôÂÆûÁé∞">AOF ÈáçÂÜôÂÆûÁé∞</h3>
<p>Ëß¶Âèë AOF Êñá‰ª∂ÈáçÂÜôÔºåË¶ÅÊª°Ë∂≥‰∏§‰∏™Êù°‰ª∂ÔºåËøô‰∏§‰∏™Êù°‰ª∂‰πüÊòØÈÖçÁΩÆÂú® Redis ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑÔºåÂÆÉ‰ª¨ÂàÜÂà´Ôºö</p>
<ul>
<li>auto-aof-rewrite-min-sizeÔºöÂÖÅËÆ∏ AOF ÈáçÂÜôÁöÑÊúÄÂ∞èÊñá‰ª∂ÂÆπÈáèÔºåÈªòËÆ§ÊòØ 64mb „ÄÇ</li>
<li>auto-aof-rewrite-percentageÔºöAOF Êñá‰ª∂ÈáçÂÜôÁöÑÂ§ßÂ∞èÊØî‰æãÔºåÈªòËÆ§ÂÄºÊòØ 100ÔºåË°®Á§∫ 100%Ôºå‰πüÂ∞±ÊòØÂè™ÊúâÂΩìÂâç AOF Êñá‰ª∂ÔºåÊØîÊúÄÂêé‰∏ÄÊ¨°Ôºà‰∏äÊ¨°ÔºâÁöÑ AOF Êñá‰ª∂Â§ß‰∏ÄÂÄçÊó∂ÔºåÊâç‰ºöÂêØÂä® AOF Êñá‰ª∂ÈáçÂÜô„ÄÇ</li>
</ul>
<p>Êü•ËØ¢ auto-aof-rewrite-min-size Âíå auto-aof-rewrite-percentage ÁöÑÂÄºÔºåÂèØ‰ΩøÁî® <code>config get xxx</code> ÂëΩ‰ª§ÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/13/rgkG3EoSVAPLvBm.png"
	
	
	
	loading="lazy"
	
		alt="6.png"
	
	
></p>
<blockquote>
<p>Â∞èË¥¥Â£´ÔºöÂè™ÊúâÂêåÊó∂Êª°Ë∂≥ auto-aof-rewrite-min-size Âíå auto-aof-rewrite-percentage ËÆæÁΩÆÁöÑÊù°‰ª∂ÔºåÊâç‰ºöËß¶Âèë AOF Êñá‰ª∂ÈáçÂÜô„ÄÇ</p>
</blockquote>
<p><strong>Ê≥®ÊÑè</strong>Ôºö‰ΩøÁî® <code>bgrewriteaof</code> ÂëΩ‰ª§ÔºåÂèØ‰ª•Ëá™Âä®Ëß¶Âèë AOF Êñá‰ª∂ÈáçÂÜô„ÄÇ</p>
<h3 id="aof-ÈáçÂÜôÊµÅÁ®ã">AOF ÈáçÂÜôÊµÅÁ®ã</h3>
<p>AOF Êñá‰ª∂ÈáçÂÜôÊòØÁîüÊàê‰∏Ä‰∏™ÂÖ®Êñ∞ÁöÑÊñá‰ª∂ÔºåÂπ∂ÊääÂΩìÂâçÊï∞ÊçÆÁöÑÊúÄÂ∞ëÊìç‰ΩúÂëΩ‰ª§‰øùÂ≠òÂà∞Êñ∞Êñá‰ª∂‰∏äÔºåÂΩìÊääÊâÄÊúâÁöÑÊï∞ÊçÆÈÉΩ‰øùÂ≠òËá≥Êñ∞Êñá‰ª∂‰πãÂêéÔºåRedis ‰ºö‰∫§Êç¢‰∏§‰∏™Êñá‰ª∂ÔºåÂπ∂ÊääÊúÄÊñ∞ÁöÑÊåÅ‰πÖÂåñÊìç‰ΩúÂëΩ‰ª§ËøΩÂä†Âà∞Êñ∞Êñá‰ª∂‰∏ä„ÄÇ</p>
<h2 id="ÈÖçÁΩÆËØ¥Êòé-1">ÈÖçÁΩÆËØ¥Êòé</h2>
<p>ÂêàÁêÜÁöÑËÆæÁΩÆ AOF ÁöÑÈÖçÁΩÆÔºåÂèØ‰ª•‰øùÈöú Redis È´òÊïà‰∏îÁ®≥ÂÆöÁöÑËøêË°åÔºå‰ª•‰∏ãÊòØ AOF ÁöÑÂÖ®ÈÉ®ÈÖçÁΩÆ‰ø°ÊÅØÂíåËØ¥Êòé„ÄÇ</p>
<p>AOF ÁöÑÈÖçÁΩÆÂèÇÊï∞Âú® Redis ÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠Ôºå‰πüÂ∞±ÊòØ Redis Ê†πË∑ØÂæÑ‰∏ãÁöÑ <code>redis.conf</code> Êñá‰ª∂‰∏≠ÔºåÈÖçÁΩÆÂèÇÊï∞ÂíåËØ¥ÊòéÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># ÊòØÂê¶ÂºÄÂêØ AOFÔºåyes ‰∏∫ÂºÄÂêØÔºåÈªòËÆ§ÊòØÂÖ≥Èó≠
</span></span><span class="line"><span class="cl">appendonly no
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># AOF ÈªòËÆ§Êñá‰ª∂Âêç
</span></span><span class="line"><span class="cl">appendfilename &#34;appendonly.aof&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># AOF ÊåÅ‰πÖÂåñÁ≠ñÁï•ÈÖçÁΩÆ
</span></span><span class="line"><span class="cl"># appendfsync always
</span></span><span class="line"><span class="cl">appendfsync everysec
</span></span><span class="line"><span class="cl"># appendfsync no
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># AOF Êñá‰ª∂ÈáçÂÜôÁöÑÂ§ßÂ∞èÊØî‰æãÔºåÈªòËÆ§ÂÄºÊòØ 100ÔºåË°®Á§∫ 100%Ôºå‰πüÂ∞±ÊòØÂè™ÊúâÂΩìÂâç AOF Êñá‰ª∂ÔºåÊØîÊúÄÂêé‰∏ÄÊ¨°ÁöÑ AOF Êñá‰ª∂Â§ß‰∏ÄÂÄçÊó∂ÔºåÊâç‰ºöÂêØÂä® AOF Êñá‰ª∂ÈáçÂÜô„ÄÇ
</span></span><span class="line"><span class="cl">auto-aof-rewrite-percentage 100
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># ÂÖÅËÆ∏ AOF ÈáçÂÜôÁöÑÊúÄÂ∞èÊñá‰ª∂ÂÆπÈáè
</span></span><span class="line"><span class="cl">auto-aof-rewrite-min-size 64mb
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># ÊòØÂê¶ÂºÄÂêØÂêØÂä®Êó∂Âä†ËΩΩ AOF Êñá‰ª∂ÊïàÈ™åÔºåÈªòËÆ§ÂÄºÊòØ yesÔºåË°®Á§∫Â∞ΩÂèØËÉΩÁöÑÂä†ËΩΩ AOF Êñá‰ª∂ÔºåÂøΩÁï•ÈîôËØØÈÉ®ÂàÜ‰ø°ÊÅØÔºåÂπ∂ÂêØÂä® Redis ÊúçÂä°„ÄÇ
</span></span><span class="line"><span class="cl"># Â¶ÇÊûúÂÄº‰∏∫ noÔºåÂàôË°®Á§∫ÔºåÂÅúÊ≠¢ÂêØÂä® RedisÔºåÁî®Êà∑ÂøÖÈ°ªÊâãÂä®‰øÆÂ§ç AOF Êñá‰ª∂ÊâçËÉΩÊ≠£Â∏∏ÂêØÂä® Redis ÊúçÂä°„ÄÇ
</span></span><span class="line"><span class="cl">aof-load-truncated yes
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÖ∂‰∏≠ÊØîËæÉÈáçË¶ÅÁöÑÊòØ appendfsync ÂèÇÊï∞ÔºåÁî®ÂÆÉÊù•ËÆæÁΩÆ AOF ÁöÑÊåÅ‰πÖÂåñÁ≠ñÁï•ÔºåÂèØ‰ª•ÈÄâÊã©ÊåâÊó∂Èó¥Èó¥ÈöîÊàñËÄÖÊìç‰ΩúÊ¨°Êï∞Êù•Â≠òÂÇ® AOF Êñá‰ª∂ÔºåËøô‰∏™ÂèÇÊï∞ÁöÑ‰∏â‰∏™ÂÄºÂú®ÊñáÁ´†ÂºÄÂ§¥ÊúâËØ¥ÊòéÔºåËøôÈáåÂ∞±‰∏çÂÜçÂ§çËø∞‰∫Ü„ÄÇ</p>
<h2 id="Êï∞ÊçÆÊÅ¢Â§ç">Êï∞ÊçÆÊÅ¢Â§ç</h2>
<h3 id="Ê≠£Â∏∏Êï∞ÊçÆÊÅ¢Â§ç">Ê≠£Â∏∏Êï∞ÊçÆÊÅ¢Â§ç</h3>
<p>Ê≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºåÂè™Ë¶ÅÂºÄÂêØ‰∫Ü AOF ÊåÅ‰πÖÂåñÔºåÂπ∂‰∏îÊèê‰æõ‰∫ÜÊ≠£Â∏∏ÁöÑ appendonly.aof Êñá‰ª∂ÔºåÂú® Redis ÂêØÂä®Êó∂Â∞±‰ºöËá™ÂÆöÂä†ËΩΩ AOF Êñá‰ª∂Âπ∂ÂêØÂä®ÔºåÊâßË°åÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/13/KzmOItHseNYlur8.png"
	
	
	
	loading="lazy"
	
		alt="7.png"
	
	
>ÂÖ∂‰∏≠ <code>DB loaded from append only file......</code> Ë°®Á§∫ Redis ÊúçÂä°Âô®Âú®ÂêØÂä®Êó∂ÔºåÂÖàÂéªÂä†ËΩΩ‰∫Ü AOF ÊåÅ‰πÖÂåñÊñá‰ª∂„ÄÇ</p>
<blockquote>
<p>Â∞èË¥¥Â£´ÔºöÈªòËÆ§ÊÉÖÂÜµ‰∏ã appendonly.aof Êñá‰ª∂‰øùÂ≠òÂú® Redis ÁöÑÊ†πÁõÆÂΩï‰∏ã„ÄÇ</p>
</blockquote>
<p><strong>ÊåÅ‰πÖÂåñÊñá‰ª∂Âä†ËΩΩËßÑÂàô</strong></p>
<ul>
<li>Â¶ÇÊûúÂè™ÂºÄÂêØ‰∫Ü AOF ÊåÅ‰πÖÂåñÔºåRedis ÂêØÂä®Êó∂Âè™‰ºöÂä†ËΩΩ AOF Êñá‰ª∂Ôºàappendonly.aofÔºâÔºåËøõË°åÊï∞ÊçÆÊÅ¢Â§çÔºõ</li>
<li>Â¶ÇÊûúÂè™ÂºÄÂêØ‰∫Ü RDB ÊåÅ‰πÖÂåñÔºåRedis ÂêØÂä®Êó∂Âè™‰ºöÂä†ËΩΩ RDB Êñá‰ª∂Ôºàdump.rdbÔºâÔºåËøõË°åÊï∞ÊçÆÊÅ¢Â§çÔºõ</li>
<li>Â¶ÇÊûúÂêåÊó∂ÂºÄÂêØ‰∫Ü RDB Âíå AOF ÊåÅ‰πÖÂåñÔºåRedis ÂêØÂä®Êó∂Âè™‰ºöÂä†ËΩΩ AOF Êñá‰ª∂Ôºàappendonly.aofÔºâÔºåËøõË°åÊï∞ÊçÆÊÅ¢Â§ç„ÄÇ</li>
</ul>
<p>Âú® AOF ÂºÄÂêØÁöÑÊÉÖÂÜµ‰∏ãÔºåÂç≥‰Ωø AOF Êñá‰ª∂‰∏çÂ≠òÂú®ÔºåÂè™Êúâ RDB Êñá‰ª∂Ôºå‰πü‰∏ç‰ºöÂä†ËΩΩ RDB Êñá‰ª∂„ÄÇ AOF Âíå RDB ÁöÑÂä†ËΩΩÊµÅÁ®ãÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/13/hj3UL1aKWNMciPo.png"
	
	
	
	loading="lazy"
	
		alt="8.png"
	
	
></p>
<h3 id="ÁÆÄÂçïÂºÇÂ∏∏Êï∞ÊçÆÊÅ¢Â§ç">ÁÆÄÂçïÂºÇÂ∏∏Êï∞ÊçÆÊÅ¢Â§ç</h3>
<p>Âú® AOF ÂÜôÂÖ•Êñá‰ª∂Êó∂Â¶ÇÊûúÊúçÂä°Âô®Â¥©Ê∫ÉÔºåÊàñËÄÖÊòØ AOF Â≠òÂÇ®Â∑≤Êª°ÁöÑÊÉÖÂÜµ‰∏ãÔºåAOF ÁöÑÊúÄÂêé‰∏ÄÊù°ÂëΩ‰ª§ÂèØËÉΩË¢´Êà™Êñ≠ÔºåËøôÂ∞±ÊòØÂºÇÂ∏∏ÁöÑ AOF Êñá‰ª∂„ÄÇ</p>
<p>Âú® AOF Êñá‰ª∂ÂºÇÂ∏∏ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇÊûú‰∏∫‰øÆÊîπ Redis ÁöÑÈÖçÁΩÆÊñá‰ª∂Ôºå‰πüÂ∞±ÊòØ‰ΩøÁî® <code>aof-load-truncated</code> Á≠â‰∫é <code>yes</code> ÁöÑÈÖçÁΩÆÔºåRedis Âú®ÂêØÂä®Êó∂‰ºöÂøΩÁï•ÊúÄÂêé‰∏ÄÊù°ÂëΩ‰ª§ÔºåÂπ∂È°∫Âà©ÂêØÂä® RedisÔºåÊâßË°åÁªìÊûúÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">* Reading RDB preamble from AOF file...
</span></span><span class="line"><span class="cl">* Reading the remaining AOF tail...
</span></span><span class="line"><span class="cl"># !!! Warning: short read while loading the AOF file !!!
</span></span><span class="line"><span class="cl"># !!! Truncating the AOF at offset 439 !!!
</span></span><span class="line"><span class="cl"># AOF loaded anyway because aof-load-truncated is enabled
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Â§çÊùÇÂºÇÂ∏∏Êï∞ÊçÆÊÅ¢Â§ç">Â§çÊùÇÂºÇÂ∏∏Êï∞ÊçÆÊÅ¢Â§ç</h3>
<p>AOF Êñá‰ª∂ÂèØËÉΩÂá∫Áé∞Êõ¥Á≥üÁ≥ïÁöÑÊÉÖÂÜµÔºåÂΩì AOF Êñá‰ª∂‰∏ç‰ªÖË¢´Êà™Êñ≠ÔºåËÄå‰∏î‰∏≠Èó¥ÁöÑÂëΩ‰ª§‰πüË¢´Á†¥ÂùèÔºåËøô‰∏™Êó∂ÂÄôÂÜçÂêØÂä® Redis ‰ºöÊèêÁ§∫ÈîôËØØ‰ø°ÊÅØÂπ∂‰∏≠Ê≠¢ËøêË°åÔºåÈîôËØØ‰ø°ÊÅØÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">* Reading the remaining AOF tail...
</span></span><span class="line"><span class="cl"># Bad file format reading the append only file: make a backup of your AOF file, then use ./redis-check-aof --fix &lt;filename&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âá∫Áé∞Ê≠§Á±ªÈóÆÈ¢òÁöÑËß£ÂÜ≥ÊñπÊ°àÂ¶Ç‰∏ãÔºö</p>
<ol>
<li>È¶ñÂÖà‰ΩøÁî® AOF ‰øÆÂ§çÂ∑•ÂÖ∑ÔºåÊ£ÄÊµãÂá∫Áé∞ÁöÑÈóÆÈ¢òÔºåÂú®ÂëΩ‰ª§Ë°å‰∏≠ËæìÂÖ• <code>redis-check-aof</code> ÂëΩ‰ª§ÔºåÂÆÉ‰ºöË∑≥ËΩ¨Âà∞Âá∫Áé∞ÈóÆÈ¢òÁöÑÂëΩ‰ª§Ë°åÔºåËøô‰∏™Êó∂ÂÄôÂèØ‰ª•Â∞ùËØïÊâãÂä®‰øÆÂ§çÊ≠§Êñá‰ª∂Ôºõ</li>
<li>Â¶ÇÊûúÊó†Ê≥ïÊâãÂä®‰øÆÂ§çÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî® <code>redis-check-aof --fix</code> Ëá™Âä®‰øÆÂ§ç AOF ÂºÇÂ∏∏Êñá‰ª∂Ôºå‰∏çËøáÊâßË°åÊ≠§ÂëΩ‰ª§ÔºåÂèØËÉΩ‰ºöÂØºËá¥ÂºÇÂ∏∏ÈÉ®ÂàÜËá≥Êñá‰ª∂Êú´Â∞æÁöÑÊï∞ÊçÆÂÖ®ÈÉ®Ë¢´‰∏¢ÂºÉ„ÄÇ</li>
</ol>
<h2 id="‰ºòÁº∫ÁÇπ">‰ºòÁº∫ÁÇπ</h2>
<h3 id="aof-‰ºòÁÇπ">AOF ‰ºòÁÇπ</h3>
<ul>
<li>AOF ÊåÅ‰πÖÂåñ‰øùÂ≠òÁöÑÊï∞ÊçÆÊõ¥Âä†ÂÆåÊï¥ÔºåAOF Êèê‰æõ‰∫Ü‰∏âÁßç‰øùÂ≠òÁ≠ñÁï•ÔºöÊØèÊ¨°Êìç‰Ωú‰øùÂ≠ò„ÄÅÊØèÁßíÈíü‰øùÂ≠ò‰∏ÄÊ¨°„ÄÅË∑üÈöèÁ≥ªÁªüÁöÑÊåÅ‰πÖÂåñÁ≠ñÁï•‰øùÂ≠òÔºåÂÖ∂‰∏≠ÊØèÁßí‰øùÂ≠ò‰∏ÄÊ¨°Ôºå‰ªéÊï∞ÊçÆÁöÑÂÆâÂÖ®ÊÄßÂíåÊÄßËÉΩ‰∏§ÊñπÈù¢ËÄÉËôëÊòØ‰∏Ä‰∏™‰∏çÈîôÁöÑÈÄâÊã©Ôºå‰πüÊòØ AOF ÈªòËÆ§ÁöÑÁ≠ñÁï•ÔºåÂç≥‰ΩøÂèëÁîü‰∫ÜÊÑèÂ§ñÊÉÖÂÜµÔºåÊúÄÂ§öÂè™‰ºö‰∏¢Â§± 1s ÈíüÁöÑÊï∞ÊçÆÔºõ</li>
<li>AOF ÈááÁî®ÁöÑÊòØÂëΩ‰ª§ËøΩÂä†ÁöÑÂÜôÂÖ•ÊñπÂºèÔºåÊâÄ‰ª•‰∏ç‰ºöÂá∫Áé∞Êñá‰ª∂ÊçüÂùèÁöÑÈóÆÈ¢òÔºåÂç≥‰ΩøÁî±‰∫éÊüê‰∫õÊÑèÂ§ñÂéüÂõ†ÔºåÂØºËá¥‰∫ÜÊúÄÂêéÊìç‰ΩúÁöÑÊåÅ‰πÖÂåñÊï∞ÊçÆÂÜôÂÖ•‰∫Ü‰∏ÄÂçäÔºå‰πüÂèØ‰ª•ÈÄöËøá redis-check-aof Â∑•ÂÖ∑ËΩªÊùæÁöÑ‰øÆÂ§çÔºõ</li>
<li>AOF ÊåÅ‰πÖÂåñÊñá‰ª∂ÔºåÈùûÂ∏∏ÂÆπÊòìÁêÜËß£ÂíåËß£ÊûêÔºåÂÆÉÊòØÊääÊâÄÊúâ Redis ÈîÆÂÄºÊìç‰ΩúÂëΩ‰ª§Ôºå‰ª•Êñá‰ª∂ÁöÑÊñπÂºèÂ≠òÂÖ•‰∫ÜÁ£ÅÁõò„ÄÇÂç≥‰Ωø‰∏çÂ∞èÂøÉ‰ΩøÁî® <code>flushall</code> ÂëΩ‰ª§Âà†Èô§‰∫ÜÊâÄÊúâÈîÆÂÄº‰ø°ÊÅØÔºåÂè™Ë¶Å‰ΩøÁî® AOF Êñá‰ª∂ÔºåÂà†Èô§ÊúÄÂêéÁöÑ <code>flushall</code> ÂëΩ‰ª§ÔºåÈáçÂêØ Redis Âç≥ÂèØÊÅ¢Â§ç‰πãÂâçËØØÂà†ÁöÑÊï∞ÊçÆ„ÄÇ</li>
</ul>
<h3 id="aof-Áº∫ÁÇπ">AOF Áº∫ÁÇπ</h3>
<ul>
<li>ÂØπ‰∫éÁõ∏ÂêåÁöÑÊï∞ÊçÆÈõÜÊù•ËØ¥ÔºåAOF Êñá‰ª∂Ë¶ÅÂ§ß‰∫é RDB Êñá‰ª∂Ôºõ</li>
<li>Âú® Redis Ë¥üËΩΩÊØîËæÉÈ´òÁöÑÊÉÖÂÜµ‰∏ãÔºåRDB ÊØî AOF ÊÄßËÉΩÊõ¥Â•ΩÔºõ</li>
<li>RDB ‰ΩøÁî®Âø´ÁÖßÁöÑÂΩ¢ÂºèÊù•ÊåÅ‰πÖÂåñÊï¥‰∏™ Redis Êï∞ÊçÆÔºåËÄå AOF Âè™ÊòØÂ∞ÜÊØèÊ¨°ÊâßË°åÁöÑÂëΩ‰ª§ËøΩÂä†Âà∞ AOF Êñá‰ª∂‰∏≠ÔºåÂõ†Ê≠§‰ªéÁêÜËÆ∫‰∏äËØ¥ÔºåRDB ÊØî AOF Êõ¥ÂÅ•Â£Æ„ÄÇ</li>
</ul>
<h2 id="Â∞èÁªì-1">Â∞èÁªì</h2>
<p>AOF ‰øùÂ≠òÊï∞ÊçÆÊõ¥Âä†ÂÆåÊï¥ÔºåÂÆÉÂèØ‰ª•ËÆ∞ÂΩïÊØèÊ¨° Redis ÁöÑÈîÆÂÄºÂèòÂåñÔºåÊàñËÄÖÊòØÈÄâÊã©ÊØèÁßí‰øùÂ≠ò‰∏ÄÊ¨°Êï∞ÊçÆ„ÄÇAOF ÁöÑÊåÅ‰πÖÂåñÊñá‰ª∂Êõ¥Âä†ÊòìËØªÔºå‰ΩÜÁõ∏ÊØî‰∏é‰∫åËøõÂà∂ÁöÑ RDB Êù•ËØ¥ÔºåÊâÄÂç†ÁöÑÂ≠òÂÇ®Á©∫Èó¥‰πüË∂äÂ§ßÔºå‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåAOF Êèê‰æõËá™Âä®ÂåñÈáçÂÜôÊú∫Âà∂ÔºåÊúÄÂ§ßÁ®ãÂ∫¶ÁöÑÂáèÂ∞ë‰∫Ü AOF Âç†Áî®Á©∫Èó¥Â§ßÁöÑÈóÆÈ¢ò„ÄÇÂêåÊó∂ AOF ‰πüÊèê‰æõ‰∫ÜÂæàÊñπ‰æøÁöÑÂºÇÂ∏∏Êñá‰ª∂ÊÅ¢Â§çÂëΩ‰ª§Ôºö <code>redis-check-aof --fix</code> Ôºå‰∏∫‰ΩøÁî® AOF Êèê‰æõ‰∫ÜÂæàÂ•ΩÁöÑ‰øùÈöú„ÄÇ</p>
<h1 id="redisÊåÅ‰πÖÂåñ--Ê∑∑ÂêàÊåÅ‰πÖÂåñ">RedisÊåÅ‰πÖÂåñ&ndash;Ê∑∑ÂêàÊåÅ‰πÖÂåñ</h1>
<p>RDB Âíå AOF ÊåÅ‰πÖÂåñÂêÑÊúâÂà©ÂºäÔºåRDB ÂèØËÉΩ‰ºöÂØºËá¥‰∏ÄÂÆöÊó∂Èó¥ÂÜÖÁöÑÊï∞ÊçÆ‰∏¢Â§±ÔºåËÄå AOF Áî±‰∫éÊñá‰ª∂ËæÉÂ§ßÂàô‰ºöÂΩ±Âìç Redis ÁöÑÂêØÂä®ÈÄüÂ∫¶Ôºå‰∏∫‰∫ÜËÉΩÂêåÊó∂‰ΩøÁî® RDB Âíå AOF ÂêÑÁßçÁöÑ‰ºòÁÇπÔºåRedis 4.0 ‰πãÂêéÊñ∞Â¢û‰∫ÜÊ∑∑ÂêàÊåÅ‰πÖÂåñÁöÑÊñπÂºè„ÄÇ</p>
<p>Âú®ÂºÄÂêØÊ∑∑ÂêàÊåÅ‰πÖÂåñÁöÑÊÉÖÂÜµ‰∏ãÔºåAOF ÈáçÂÜôÊó∂‰ºöÊää Redis ÁöÑÊåÅ‰πÖÂåñÊï∞ÊçÆÔºå‰ª• RDB ÁöÑÊ†ºÂºèÂÜôÂÖ•Âà∞ AOF Êñá‰ª∂ÁöÑÂºÄÂ§¥Ôºå‰πãÂêéÁöÑÊï∞ÊçÆÂÜç‰ª• AOF ÁöÑÊ†ºÂºèÂåñËøΩÂä†ÁöÑÊñá‰ª∂ÁöÑÊú´Â∞æ„ÄÇ</p>
<p>Ê∑∑ÂêàÊåÅ‰πÖÂåñÁöÑÊï∞ÊçÆÂ≠òÂÇ®ÁªìÊûÑÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/13/3cotY1HUeVmBTz9.png"
	
	
	
	loading="lazy"
	
		alt="1.png"
	
	
></p>
<h2 id="ÂºÄÂêØÊ∑∑ÂêàÊåÅ‰πÖÂåñ">ÂºÄÂêØÊ∑∑ÂêàÊåÅ‰πÖÂåñ</h2>
<p>Êü•ËØ¢ÊòØÂê¶ÂºÄÂêØÊ∑∑ÂêàÊåÅ‰πÖÂåñÂèØ‰ª•‰ΩøÁî® <code>config get aof-use-rdb-preamble</code> ÂëΩ‰ª§ÔºåÊâßË°åÁªìÊûúÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/13/JiAyCwT72amsGZW.png"
	
	
	
	loading="lazy"
	
		alt="2.png"
	
	
></p>
<p>ÂÖ∂‰∏≠ yes Ë°®Á§∫Â∑≤ÁªèÂºÄÂêØÊ∑∑ÂêàÊåÅ‰πÖÂåñÔºåno Ë°®Á§∫ÂÖ≥Èó≠ÔºåRedis 5.0 ÈªòËÆ§ÂÄº‰∏∫ yes„ÄÇ Â¶ÇÊûúÊòØÂÖ∂‰ªñÁâàÊú¨ÁöÑ Redis È¶ñÂÖàÈúÄË¶ÅÊ£ÄÊü•‰∏Ä‰∏ãÔºåÊòØÂê¶Â∑≤ÁªèÂºÄÂêØ‰∫ÜÊ∑∑ÂêàÊåÅ‰πÖÂåñÔºåÂ¶ÇÊûúÂÖ≥Èó≠ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂèØ‰ª•ÈÄöËøá‰ª•‰∏ã‰∏§ÁßçÊñπÂºèÂºÄÂêØÔºö</p>
<ul>
<li>ÈÄöËøáÂëΩ‰ª§Ë°åÂºÄÂêØ</li>
<li>ÈÄöËøá‰øÆÊîπ Redis ÈÖçÁΩÆÊñá‰ª∂ÂºÄÂêØ</li>
</ul>
<h3 id="ÈÄöËøáÂëΩ‰ª§Ë°åÂºÄÂêØ">ÈÄöËøáÂëΩ‰ª§Ë°åÂºÄÂêØ</h3>
<p>‰ΩøÁî®ÂëΩ‰ª§ <code>config set aof-use-rdb-preamble yes</code> ÊâßË°åÁªìÊûúÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/13/35XuvjFPskqHK1N.png"
	
	
	
	loading="lazy"
	
		alt="3.png"
	
	
></p>
<blockquote>
<p>Â∞èË¥¥Â£´ÔºöÂëΩ‰ª§Ë°åËÆæÁΩÆÈÖçÁΩÆÁöÑÁº∫ÁÇπÊòØÈáçÂêØ Redis ÊúçÂä°‰πãÂêéÔºåËÆæÁΩÆÁöÑÈÖçÁΩÆÂ∞±‰ºöÂ§±Êïà„ÄÇ</p>
</blockquote>
<h3 id="ÈÄöËøá‰øÆÊîπ-redis-ÈÖçÁΩÆÊñá‰ª∂ÂºÄÂêØ">ÈÄöËøá‰øÆÊîπ Redis ÈÖçÁΩÆÊñá‰ª∂ÂºÄÂêØ</h3>
<p>Âú® Redis ÁöÑÊ†πË∑ØÂæÑ‰∏ãÊâæÂà∞ redis.conf Êñá‰ª∂ÔºåÊääÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑ <code>aof-use-rdb-preamble no</code> Êîπ‰∏∫ <code>aof-use-rdb-preamble yes</code> Â¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/13/iRjq3npEXoUJ1Ms.png"
	
	
	
	loading="lazy"
	
		alt="4.png"
	
	
></p>
<h2 id="ÂÆû‰æãËøêË°å">ÂÆû‰æãËøêË°å</h2>
<p>ÂΩìÂú®Ê∑∑ÂêàÊåÅ‰πÖÂåñÂÖ≥Èó≠ÁöÑÊÉÖÂÜµ‰∏ãÔºå‰ΩøÁî® <code>bgrewriteaof</code> Ëß¶Âèë AOF Êñá‰ª∂ÈáçÂÜô‰πãÂêéÔºåÊü•Áúã appendonly.aof Êñá‰ª∂ÁöÑÊåÅ‰πÖÂåñÊó•ÂøóÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/13/3Iw8H2O9nG6heSd.png"
	
	
	
	loading="lazy"
	
		alt="5.png"
	
	
>ÂèØ‰ª•ÁúãÂá∫ÔºåÂΩìÊ∑∑ÂêàÊåÅ‰πÖÂåñÂÖ≥Èó≠ÁöÑÊÉÖÂÜµ‰∏ã AOF ÊåÅ‰πÖÂåñÊñá‰ª∂Â≠òÂÇ®ÁöÑ‰∏∫Ê†áÂáÜÁöÑ AOF Ê†ºÂºèÁöÑÊñá‰ª∂„ÄÇ ÂΩìÊ∑∑ÂêàÊåÅ‰πÖÂåñÂºÄÂêØÁöÑÊ®°Âºè‰∏ãÔºå‰ΩøÁî® <code>bgrewriteaof</code> ÂëΩ‰ª§Ëß¶Âèë AOF Êñá‰ª∂ÈáçÂÜôÔºåÂæóÂà∞ appendonly.aof ÁöÑÊñá‰ª∂ÂÜÖÂÆπÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/13/6vgK4qOG9RTrsQM.png"
	
	
	
	loading="lazy"
	
		alt="6.png"
	
	
>ÂèØ‰ª•ÁúãÂá∫ appendonly.aof Êñá‰ª∂Â≠òÂÇ®ÁöÑÂÜÖÂÆπÊòØ <code>REDIS</code> ÂºÄÂ§¥ÁöÑ RDB Ê†ºÂºèÁöÑÂÜÖÂÆπÔºåÂπ∂Èùû‰∏∫ AOF Ê†ºÂºèÁöÑÊó•Âøó„ÄÇ</p>
<h2 id="Êï∞ÊçÆÊÅ¢Â§çÂíåÊ∫êÁ†ÅËß£Êûê">Êï∞ÊçÆÊÅ¢Â§çÂíåÊ∫êÁ†ÅËß£Êûê</h2>
<p>Ê∑∑ÂêàÊåÅ‰πÖÂåñÁöÑÊï∞ÊçÆÊÅ¢Â§çÂíå AOF ÊåÅ‰πÖÂåñËøáÁ®ãÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂè™ÈúÄË¶ÅÊää appendonly.aof ÊîæÂà∞ Redis ÁöÑÊ†πÁõÆÂΩïÔºåÂú® Redis ÂêØÂä®Êó∂ÔºåÂè™Ë¶ÅÂºÄÂêØ‰∫Ü AOF ÊåÅ‰πÖÂåñÔºåRedis Â∞±‰ºöËá™Âä®Âä†ËΩΩÂπ∂ÊÅ¢Â§çÊï∞ÊçÆ„ÄÇ Redis ÂêØÂä®‰ø°ÊÅØÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/13/mf4KbVkguNq1dSe.png"
	
	
	
	loading="lazy"
	
		alt="7.png"
	
	
>ÂèØ‰ª•ÁúãÂá∫ Redis Âú®ÊúçÂä°Âô®ÂàùÂßãÂåñÁöÑÊó∂ÂÄôÂä†ËΩΩ‰∫Ü AOF Êñá‰ª∂ÁöÑÂÜÖÂÆπ„ÄÇ</p>
<h3 id="Ê∑∑ÂêàÊåÅ‰πÖÂåñÁöÑÂä†ËΩΩÊµÅÁ®ã">Ê∑∑ÂêàÊåÅ‰πÖÂåñÁöÑÂä†ËΩΩÊµÅÁ®ã</h3>
<p>Ê∑∑ÂêàÊåÅ‰πÖÂåñÁöÑÂä†ËΩΩÊµÅÁ®ãÂ¶Ç‰∏ãÔºö</p>
<ol>
<li>Âà§Êñ≠ÊòØÂê¶ÂºÄÂêØ AOF ÊåÅ‰πÖÂåñÔºåÂºÄÂêØÁªßÁª≠ÊâßË°åÂêéÁª≠ÊµÅÁ®ãÔºåÊú™ÂºÄÂêØÊâßË°åÂä†ËΩΩ RDB Êñá‰ª∂ÁöÑÊµÅÁ®ãÔºõ</li>
<li>Âà§Êñ≠ appendonly.aof Êñá‰ª∂ÊòØÂê¶Â≠òÂú®ÔºåÊñá‰ª∂Â≠òÂú®ÂàôÊâßË°åÂêéÁª≠ÊµÅÁ®ãÔºõ</li>
<li>Âà§Êñ≠ AOF Êñá‰ª∂ÂºÄÂ§¥ÊòØ RDB ÁöÑÊ†ºÂºè, ÂÖàÂä†ËΩΩ RDB ÂÜÖÂÆπÂÜçÂä†ËΩΩÂâ©‰ΩôÁöÑ AOF ÂÜÖÂÆπÔºõ</li>
<li>Âà§Êñ≠ AOF Êñá‰ª∂ÂºÄÂ§¥‰∏çÊòØ RDB ÁöÑÊ†ºÂºèÔºåÁõ¥Êé•‰ª• AOF Ê†ºÂºèÂä†ËΩΩÊï¥‰∏™Êñá‰ª∂„ÄÇ</li>
</ol>
<p>AOF Âä†ËΩΩÊµÅÁ®ãÂõæÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/13/2TSVJctWKh1d3ak.png"
	
	
	
	loading="lazy"
	
		alt="8.png"
	
	
></p>
<h3 id="Ê∫êÁ†ÅËß£Êûê">Ê∫êÁ†ÅËß£Êûê</h3>
<p>Redis Âà§Êñ≠ AOF Êñá‰ª∂ÁöÑÂºÄÂ§¥ÊòØÂê¶ÊòØ RDB Ê†ºÂºèÁöÑÔºåÊòØÈÄöËøáÂÖ≥ÈîÆÂ≠ó <code>REDIS</code> Âà§Êñ≠ÁöÑÔºåRDB Êñá‰ª∂ÁöÑÂºÄÂ§¥‰∏ÄÂÆöÊòØ <code>REDIS</code> ÂÖ≥ÈîÆÂ≠óÂºÄÂ§¥ÁöÑÔºåÂà§Êñ≠Ê∫êÁ†ÅÂú® Redis ÁöÑ src/aof.c ‰∏≠ÔºåÊ†∏ÂøÉ‰ª£Á†ÅÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="kt">char</span> <span class="n">sig</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span> <span class="cm">/* &#34;REDIS&#34; */</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="n">fread</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="n">fp</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">5</span> <span class="o">||</span> <span class="n">memcmp</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span><span class="s">&#34;REDIS&#34;</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// AOF Êñá‰ª∂ÂºÄÂ§¥Èùû RDB Ê†ºÂºèÔºåÈùûÊ∑∑ÂêàÊåÅ‰πÖÂåñÊñá‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">fseek</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">SEEK_SET</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">goto</span> <span class="n">readerr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="cm">/* RDB preamble. Pass loading the RDB functions. */</span>
</span></span><span class="line"><span class="cl">    <span class="n">rio</span> <span class="n">rdb</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">serverLog</span><span class="p">(</span><span class="n">LL_NOTICE</span><span class="p">,</span><span class="s">&#34;Reading RDB preamble from AOF file...&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">fseek</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">SEEK_SET</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">goto</span> <span class="n">readerr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">rioInitWithFile</span><span class="p">(</span><span class="o">&amp;</span><span class="n">rdb</span><span class="p">,</span><span class="n">fp</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// AOF Êñá‰ª∂ÂºÄÂ§¥ÊòØ RDB Ê†ºÂºèÔºåÂÖàÂä†ËΩΩ RDB ÂÜçÂä†ËΩΩ AOF
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">rdbLoadRio</span><span class="p">(</span><span class="o">&amp;</span><span class="n">rdb</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="n">C_OK</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">serverLog</span><span class="p">(</span><span class="n">LL_WARNING</span><span class="p">,</span><span class="s">&#34;Error reading the RDB preamble of the AOF file, AOF loading aborted&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">goto</span> <span class="n">readerr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">serverLog</span><span class="p">(</span><span class="n">LL_NOTICE</span><span class="p">,</span><span class="s">&#34;Reading the remaining AOF tail...&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="c1">// Âä†ËΩΩ AOF Ê†ºÂºèÁöÑÊï∞ÊçÆ
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÂèØ‰ª•ÁúãÂá∫ Redis ÊòØÈÄöËøáÂà§Êñ≠ AOF Êñá‰ª∂ÁöÑÂºÄÂ§¥ÊòØÂê¶ÊòØ <code>REDIS</code> ÂÖ≥ÈîÆÂ≠óÔºåÊù•Á°ÆÂÆöÊ≠§Êñá‰ª∂ÊòØÂê¶‰∏∫Ê∑∑ÂêàÊåÅ‰πÖÂåñÊñá‰ª∂ÁöÑ„ÄÇ</p>
<blockquote>
<p>Â∞èË¥¥Â£´ÔºöAOF Ê†ºÂºèÁöÑÂºÄÂ§¥ÊòØ *ÔºåËÄå RDB Ê†ºÂºèÁöÑÂºÄÂ§¥ÊòØ REDIS„ÄÇ</p>
</blockquote>
<h2 id="‰ºòÁº∫ÁÇπ-1">‰ºòÁº∫ÁÇπ</h2>
<p><strong>Ê∑∑ÂêàÊåÅ‰πÖÂåñ‰ºòÁÇπÔºö</strong></p>
<ul>
<li>Ê∑∑ÂêàÊåÅ‰πÖÂåñÁªìÂêà‰∫Ü RDB Âíå AOF ÊåÅ‰πÖÂåñÁöÑ‰ºòÁÇπÔºåÂºÄÂ§¥‰∏∫ RDB ÁöÑÊ†ºÂºèÔºå‰ΩøÂæó Redis ÂèØ‰ª•Êõ¥Âø´ÁöÑÂêØÂä®ÔºåÂêåÊó∂ÁªìÂêà AOF ÁöÑ‰ºòÁÇπÔºåÊúâÂáè‰Ωé‰∫ÜÂ§ßÈáèÊï∞ÊçÆ‰∏¢Â§±ÁöÑÈ£éÈô©„ÄÇ</li>
</ul>
<p><strong>Ê∑∑ÂêàÊåÅ‰πÖÂåñÁº∫ÁÇπÔºö</strong></p>
<ul>
<li>AOF Êñá‰ª∂‰∏≠Ê∑ªÂä†‰∫Ü RDB Ê†ºÂºèÁöÑÂÜÖÂÆπÔºå‰ΩøÂæó AOF Êñá‰ª∂ÁöÑÂèØËØªÊÄßÂèòÂæóÂæàÂ∑ÆÔºõ</li>
<li>ÂÖºÂÆπÊÄßÂ∑ÆÔºåÂ¶ÇÊûúÂºÄÂêØÊ∑∑ÂêàÊåÅ‰πÖÂåñÔºåÈÇ£‰πàÊ≠§Ê∑∑ÂêàÊåÅ‰πÖÂåñ AOF Êñá‰ª∂ÔºåÂ∞±‰∏çËÉΩÁî®Âú® Redis 4.0 ‰πãÂâçÁâàÊú¨‰∫Ü„ÄÇ</li>
</ul>
<h2 id="ÊåÅ‰πÖÂåñÊúÄ‰Ω≥ÂÆûË∑µ">ÊåÅ‰πÖÂåñÊúÄ‰Ω≥ÂÆûË∑µ</h2>
<p>ÊåÅ‰πÖÂåñËôΩÁÑ∂‰øùËØÅ‰∫ÜÊï∞ÊçÆ‰∏ç‰∏¢Â§±Ôºå‰ΩÜÂêåÊó∂ÊãñÊÖ¢‰∫Ü Redis ÁöÑËøêË°åÈÄüÂ∫¶ÔºåÈÇ£ÊÄé‰πàÊõ¥ÂêàÁêÜÁöÑ‰ΩøÁî® Redis ÁöÑÊåÅ‰πÖÂåñÂäüËÉΩÂë¢Ôºü Redis ÊåÅ‰πÖÂåñÁöÑÊúÄ‰Ω≥ÂÆûË∑µÂèØ‰ªé‰ª•‰∏ãÂá†‰∏™ÊñπÈù¢ËÄÉËôë„ÄÇ</p>
<h3 id="ÊéßÂà∂ÊåÅ‰πÖÂåñÂºÄÂÖ≥">ÊéßÂà∂ÊåÅ‰πÖÂåñÂºÄÂÖ≥</h3>
<p>‰ΩøÁî®ËÄÖÂèØÊ†πÊçÆÂÆûÈôÖÁöÑ‰∏öÂä°ÊÉÖÂÜµËÄÉËôëÔºåÂ¶ÇÊûúÂØπÊï∞ÊçÆÁöÑ‰∏¢Â§±‰∏çÊïèÊÑüÁöÑÊÉÖÂÜµ‰∏ãÔºåÂèØËÄÉËôëÂÖ≥Èó≠ Redis ÁöÑÊåÅ‰πÖÂåñÔºåËøôÊ†∑ÊâÄ‰ª•ÁöÑÈîÆÂÄºÊìç‰ΩúÈÉΩÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÂ∞±ÂèØ‰ª•‰øùËØÅÊúÄÈ´òÊïàÁéáÁöÑËøêË°å Redis ‰∫Ü„ÄÇ ÊåÅ‰πÖÂåñÂÖ≥Èó≠Êìç‰ΩúÔºö</p>
<ul>
<li>ÂÖ≥Èó≠ RDB ÊåÅ‰πÖÂåñÔºå‰ΩøÁî®ÂëΩ‰ª§Ôºö <code>config set save &quot;&quot;</code></li>
<li>ÂÖ≥Èó≠ AOF Âíå Ê∑∑ÂêàÊåÅ‰πÖÂåñÔºå‰ΩøÁî®ÂëΩ‰ª§Ôºö <code>config set appendonly no</code></li>
</ul>
<h3 id="‰∏ª‰ªéÈÉ®ÁΩ≤">‰∏ª‰ªéÈÉ®ÁΩ≤</h3>
<p>‰ΩøÁî®‰∏ª‰ªéÈÉ®ÁΩ≤Ôºå‰∏ÄÂè∞Áî®‰∫éÂìçÂ∫î‰∏ª‰∏öÂä°Ôºå‰∏ÄÂè∞Áî®‰∫éÊï∞ÊçÆÊåÅ‰πÖÂåñÔºåËøôÊ†∑Â∞±ÂèØËÉΩËÆ© Redis Êõ¥Âä†È´òÊïàÁöÑËøêË°å„ÄÇ</p>
<h3 id="‰ΩøÁî®Ê∑∑ÂêàÊåÅ‰πÖÂåñ">‰ΩøÁî®Ê∑∑ÂêàÊåÅ‰πÖÂåñ</h3>
<p>Ê∑∑ÂêàÊåÅ‰πÖÂåñÁªìÂêà‰∫Ü RDB Âíå AOF ÁöÑ‰ºòÁÇπÔºåRedis 5.0 ÈªòËÆ§ÊòØÂºÄÂêØÁöÑ„ÄÇ</p>
<h3 id="‰ΩøÁî®ÈÖçÁΩÆÊõ¥È´òÁöÑÊú∫Âô®">‰ΩøÁî®ÈÖçÁΩÆÊõ¥È´òÁöÑÊú∫Âô®</h3>
<p>Redis ÂØπ CPU ÁöÑË¶ÅÊ±ÇÂπ∂‰∏çÈ´òÔºåÂèçËÄåÊòØÂØπÂÜÖÂ≠òÂíåÁ£ÅÁõòÁöÑË¶ÅÊ±ÇÂæàÈ´òÔºåÂõ†‰∏∫ Redis Â§ßÈÉ®ÂàÜÊó∂ÂÄôÈÉΩÂú®ÂÅöËØªÂÜôÊìç‰ΩúÔºå‰ΩøÁî®Êõ¥Â§öÁöÑÂÜÖÂ≠òÂíåÊõ¥Âø´ÁöÑÁ£ÅÁõòÔºåÂØπ Redis ÊÄßËÉΩÁöÑÊèêÈ´òÈùûÂ∏∏ÊúâÂ∏ÆÂä©„ÄÇ</p>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    <section class="article-lastmod">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



        <span>
            ÊúÄÂêéÊõ¥Êñ∞‰∫é 2022Âπ¥6Êúà7Êó• 01:16 UTC
        </span>
    </section></footer>


    
</article>

    

    

<aside class="related-contents--wrapper">
    <h2 class="section-title">Áõ∏ÂÖ≥ÊñáÁ´†</h2>
    <div class="related-contents">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/posts/redis-%E9%AB%98%E5%8F%AF%E7%94%A8%E6%96%B9%E5%BC%8F/">
        
        
            <div class="article-image">
                
                    <img src="/24.jpg" loading="lazy" data-key="" data-hash="/24.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Redis È´òÂèØÁî®ÊñπÂºè</h2>
        </div>
    </a>
</article>
            
                
<article class="has-image">
    <a href="/posts/redis%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/">
        
        
            <div class="article-image">
                
                    <img src="/23.jpg" loading="lazy" data-key="" data-hash="/23.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">RedisÂ∏∏Áî®Êï∞ÊçÆÁ±ªÂûã</h2>
        </div>
    </a>
</article>
            
                
<article class="has-image">
    <a href="/posts/redis%E6%98%AF%E5%A6%82%E4%BD%95%E6%89%A7%E8%A1%8C%E7%9A%84/">
        
        
            <div class="article-image">
                
                    <img src="/27.jpg" loading="lazy" data-key="" data-hash="/27.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">RedisÊòØÂ¶Ç‰ΩïÊâßË°åÁöÑ</h2>
        </div>
    </a>
</article>
            
                
<article class="has-image">
    <a href="/posts/redis%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB%E5%92%8C%E7%9B%B8%E5%85%B3%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/">
        
        
            <div class="article-image">
                
                    <img src="/25.jpg" loading="lazy" data-key="" data-hash="/25.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">RedisÈóÆÈ¢òÊ±áÊÄªÂíåÁõ∏ÂÖ≥Ëß£ÂÜ≥ÊñπÊ°à</h2>
        </div>
    </a>
</article>
            
        </div>
    </div>
</aside>

     
    
        
    <script src='//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js'></script>
<div id="waline" class="waline-container"></div>
<style>
    .waline-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
    .waline-container .vcount {
        color: var(--card-text-color-main);
    }
</style><script>
    
    new Waline({"dark":"html[data-scheme=\"dark\"]","el":"#waline","emoji":["https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/bilibili","https://cdn.jsdelivr.net/gh/walinejs/emojis/qq","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/tieba","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/weibo","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/tw-emoji","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/alus"],"lang":"zh-CN","locale":{"admin":"Admin"},"requiredMeta":["name","email","url"],"serverURL":"https://blog-api-2w7xkqg6y-ahaomin.vercel.app/","visitor":true});
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2022 ahao&#39;s Blog
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        ‰∏ªÈ¢ò <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.10.0">Stack</a></b> Áî± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> ËÆæËÆ°
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path></svg>
        </div>
        <h2 class="widget-title section-title">ÁõÆÂΩï</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#ÊåÅ‰πÖÂåñËß¶Âèë">ÊåÅ‰πÖÂåñËß¶Âèë</a>
      <ol>
        <li><a href="#ÊâãÂä®Ëß¶Âèë">ÊâãÂä®Ëß¶Âèë</a>
          <ol>
            <li><a href="#save-ÂëΩ‰ª§">save ÂëΩ‰ª§</a></li>
            <li><a href="#bgsave-ÂëΩ‰ª§">bgsave ÂëΩ‰ª§</a></li>
          </ol>
        </li>
        <li><a href="#Ëá™Âä®Ëß¶Âèë">Ëá™Âä®Ëß¶Âèë</a>
          <ol>
            <li><a href="#save-m-n">save m n</a></li>
            <li><a href="#flushall">flushall</a></li>
          </ol>
        </li>
        <li><a href="#‰∏ª‰ªéÂêåÊ≠•Ëß¶Âèë">‰∏ª‰ªéÂêåÊ≠•Ëß¶Âèë</a></li>
      </ol>
    </li>
    <li><a href="#ÈÖçÁΩÆËØ¥Êòé">ÈÖçÁΩÆËØ¥Êòé</a></li>
    <li><a href="#ÈÖçÁΩÆÊü•ËØ¢">ÈÖçÁΩÆÊü•ËØ¢</a></li>
    <li><a href="#ÈÖçÁΩÆËÆæÁΩÆ">ÈÖçÁΩÆËÆæÁΩÆ</a></li>
    <li><a href="#rdb-Êñá‰ª∂ÊÅ¢Â§ç">RDB Êñá‰ª∂ÊÅ¢Â§ç</a></li>
    <li><a href="#rdb-‰ºòÁº∫ÁÇπ">RDB ‰ºòÁº∫ÁÇπ</a>
      <ol>
        <li><a href="#rdb-‰ºòÁÇπ">RDB ‰ºòÁÇπ</a></li>
        <li><a href="#rdb-Áº∫ÁÇπ">RDB Áº∫ÁÇπ</a></li>
      </ol>
    </li>
    <li><a href="#Á¶ÅÁî®ÊåÅ‰πÖÂåñ">Á¶ÅÁî®ÊåÅ‰πÖÂåñ</a></li>
    <li><a href="#Â∞èÁªì">Â∞èÁªì</a></li>
  </ol>

  <ol>
    <li><a href="#ÁÆÄ‰ªã">ÁÆÄ‰ªã</a></li>
    <li><a href="#ÊåÅ‰πÖÂåñÊü•ËØ¢ÂíåËÆæÁΩÆ">ÊåÅ‰πÖÂåñÊü•ËØ¢ÂíåËÆæÁΩÆ</a>
      <ol>
        <li><a href="#Êü•ËØ¢-aof-ÂêØÂä®Áä∂ÊÄÅ">Êü•ËØ¢ AOF ÂêØÂä®Áä∂ÊÄÅ</a></li>
        <li><a href="#ÂºÄÂêØ-aof-ÊåÅ‰πÖÂåñ">ÂºÄÂêØ AOF ÊåÅ‰πÖÂåñ</a>
          <ol>
            <li><a href="#ÂëΩ‰ª§Ë°åÂêØÂä®-aof">ÂëΩ‰ª§Ë°åÂêØÂä® AOF</a></li>
            <li><a href="#ÈÖçÁΩÆÊñá‰ª∂ÂêØÂä®-aof">ÈÖçÁΩÆÊñá‰ª∂ÂêØÂä® AOF</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#Ëß¶ÂèëÊåÅ‰πÖÂåñ">Ëß¶ÂèëÊåÅ‰πÖÂåñ</a>
      <ol>
        <li><a href="#Ëá™Âä®Ëß¶Âèë-1">Ëá™Âä®Ëß¶Âèë</a></li>
        <li><a href="#ÊâãÂä®Ëß¶Âèë-1">ÊâãÂä®Ëß¶Âèë</a></li>
      </ol>
    </li>
    <li><a href="#aof-Êñá‰ª∂ÈáçÂÜô">AOF Êñá‰ª∂ÈáçÂÜô</a>
      <ol>
        <li><a href="#‰ªÄ‰πàÊòØ-aof-ÈáçÂÜô">‰ªÄ‰πàÊòØ AOF ÈáçÂÜôÔºü</a></li>
        <li><a href="#aof-ÈáçÂÜôÂÆûÁé∞">AOF ÈáçÂÜôÂÆûÁé∞</a></li>
        <li><a href="#aof-ÈáçÂÜôÊµÅÁ®ã">AOF ÈáçÂÜôÊµÅÁ®ã</a></li>
      </ol>
    </li>
    <li><a href="#ÈÖçÁΩÆËØ¥Êòé-1">ÈÖçÁΩÆËØ¥Êòé</a></li>
    <li><a href="#Êï∞ÊçÆÊÅ¢Â§ç">Êï∞ÊçÆÊÅ¢Â§ç</a>
      <ol>
        <li><a href="#Ê≠£Â∏∏Êï∞ÊçÆÊÅ¢Â§ç">Ê≠£Â∏∏Êï∞ÊçÆÊÅ¢Â§ç</a></li>
        <li><a href="#ÁÆÄÂçïÂºÇÂ∏∏Êï∞ÊçÆÊÅ¢Â§ç">ÁÆÄÂçïÂºÇÂ∏∏Êï∞ÊçÆÊÅ¢Â§ç</a></li>
        <li><a href="#Â§çÊùÇÂºÇÂ∏∏Êï∞ÊçÆÊÅ¢Â§ç">Â§çÊùÇÂºÇÂ∏∏Êï∞ÊçÆÊÅ¢Â§ç</a></li>
      </ol>
    </li>
    <li><a href="#‰ºòÁº∫ÁÇπ">‰ºòÁº∫ÁÇπ</a>
      <ol>
        <li><a href="#aof-‰ºòÁÇπ">AOF ‰ºòÁÇπ</a></li>
        <li><a href="#aof-Áº∫ÁÇπ">AOF Áº∫ÁÇπ</a></li>
      </ol>
    </li>
    <li><a href="#Â∞èÁªì-1">Â∞èÁªì</a></li>
  </ol>

  <ol>
    <li><a href="#ÂºÄÂêØÊ∑∑ÂêàÊåÅ‰πÖÂåñ">ÂºÄÂêØÊ∑∑ÂêàÊåÅ‰πÖÂåñ</a>
      <ol>
        <li><a href="#ÈÄöËøáÂëΩ‰ª§Ë°åÂºÄÂêØ">ÈÄöËøáÂëΩ‰ª§Ë°åÂºÄÂêØ</a></li>
        <li><a href="#ÈÄöËøá‰øÆÊîπ-redis-ÈÖçÁΩÆÊñá‰ª∂ÂºÄÂêØ">ÈÄöËøá‰øÆÊîπ Redis ÈÖçÁΩÆÊñá‰ª∂ÂºÄÂêØ</a></li>
      </ol>
    </li>
    <li><a href="#ÂÆû‰æãËøêË°å">ÂÆû‰æãËøêË°å</a></li>
    <li><a href="#Êï∞ÊçÆÊÅ¢Â§çÂíåÊ∫êÁ†ÅËß£Êûê">Êï∞ÊçÆÊÅ¢Â§çÂíåÊ∫êÁ†ÅËß£Êûê</a>
      <ol>
        <li><a href="#Ê∑∑ÂêàÊåÅ‰πÖÂåñÁöÑÂä†ËΩΩÊµÅÁ®ã">Ê∑∑ÂêàÊåÅ‰πÖÂåñÁöÑÂä†ËΩΩÊµÅÁ®ã</a></li>
        <li><a href="#Ê∫êÁ†ÅËß£Êûê">Ê∫êÁ†ÅËß£Êûê</a></li>
      </ol>
    </li>
    <li><a href="#‰ºòÁº∫ÁÇπ-1">‰ºòÁº∫ÁÇπ</a></li>
    <li><a href="#ÊåÅ‰πÖÂåñÊúÄ‰Ω≥ÂÆûË∑µ">ÊåÅ‰πÖÂåñÊúÄ‰Ω≥ÂÆûË∑µ</a>
      <ol>
        <li><a href="#ÊéßÂà∂ÊåÅ‰πÖÂåñÂºÄÂÖ≥">ÊéßÂà∂ÊåÅ‰πÖÂåñÂºÄÂÖ≥</a></li>
        <li><a href="#‰∏ª‰ªéÈÉ®ÁΩ≤">‰∏ª‰ªéÈÉ®ÁΩ≤</a></li>
        <li><a href="#‰ΩøÁî®Ê∑∑ÂêàÊåÅ‰πÖÂåñ">‰ΩøÁî®Ê∑∑ÂêàÊåÅ‰πÖÂåñ</a></li>
        <li><a href="#‰ΩøÁî®ÈÖçÁΩÆÊõ¥È´òÁöÑÊú∫Âô®">‰ΩøÁî®ÈÖçÁΩÆÊõ¥È´òÁöÑÊú∫Âô®</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
