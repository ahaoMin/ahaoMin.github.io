<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='MyBatis ÂÆûÈ™åÁéØÂ¢ÉÊê≠Âª∫ ÂâçË®Ä MyBatis ÊòØ‰∏Ä‰∏™ÁêÜËÆ∫Â∞ëÔºåÂÆûË∑µÊÄßÂº∫ÁöÑÊ°ÜÊû∂ÔºõÂÆÉÊ≤°ÊúâÂ§™Â§öÁöÑÊ¶ÇÂøµÔºåÊúÄÂ•ΩÁöÑÂ≠¶‰π†ÊñπÂºèÂ∞±ÊòØÂÆûË∑µ„ÄÇÊú¨Â∞èËäÇÔºåÊàë‰ª¨Â∞Ü‰∏ÄËµ∑Êê≠Âª∫ MyBatis ÁöÑÂÆûË∑µÁéØÂ¢ÉÔºåÊñπ‰æøÂêéÁª≠Á´†ËäÇÁöÑÂ≠¶‰π†„ÄÇ
Êñ∞Âª∫È°πÁõÆ ËÄÉËôëÂà∞Â∑•Á®ãÁöÑÁª¥Êä§ÊÄßÔºåÊàë‰ª¨ÈÄâÊã© IDE Êù•Êñ∞Âª∫‰∏Ä‰∏™ Maven È°πÁõÆÊù•‰ΩøÁî® MyBatis„ÄÇÂΩìÁÑ∂Â¶ÇÊûú‰Ω†Êõ¥ÂÄæÂêë‰∫Ü GradleÔºåÈÇ£‰πàÊ≤°ÊúâÂÖ≥Á≥ªÔºå‰Ω†Âè™ÈúÄË¶ÅÊõ¥ÊîπÊ∑ªÂä†‰æùËµñÁöÑÊñπÂºèÂç≥ÂèØ„ÄÇ
Âú® IDE ‰∏äÔºå‰Ω†ÂèØ‰ª•ÈÄâÊã© Eclipse ÊàñËÄÖ IDEAÔºåÂΩìÁÑ∂Êàë‰ª¨Êõ¥Êé®Ëçê‰Ω†‰ΩøÁî® IDEAÔºåÂõ†‰∏∫ÂÆÉÁöÑÁ§æÂå∫ÁâàÂ∑≤ÁªèË∂≥Â§üÊàë‰ª¨Â≠¶‰π† MyBatis ‰∫ÜÔºåËÄå‰∏îÂÆÉ‰πüÊòØÂÖçË¥πÁöÑÔºåÊú¨Â∞èËäÇÊàë‰ª¨‰ª• IDEA ‰Ωú‰∏∫ÈªòËÆ§ÁöÑÂºÄÂèëÁéØÂ¢É„ÄÇ
ÊâìÂºÄ IDEAÔºåÈÄâÊã© New ProjectÔºåÁÇπÂáªÂ∑¶‰æßÁöÑMavenÈ°πÔºåÁÑ∂Âêé Next Êñ∞Âª∫È°πÁõÆÔºåÂ¶Ç‰∏ãÂõæÔºö
ËøõÂÖ•‰∏ã‰∏ÄÈ°µÂêéÔºåËæìÂÖ•ÂØπÂ∫îÁöÑ GroupId Âíå ArtifactIdÔºåÂ¶Ç‰∏ãÂõæÔºå‰Ω†‰πüÂèØ‰ª•ÈÄâÊã©Ëá™Â∑±ÂøÉ‰ª™ÁöÑ idÔºå‰ΩÜÊòØÊàë‰ª¨Êé®Ëçê‰Ω†Ë∑üÊàë‰ª¨‰øùÊåÅ‰∏ÄËá¥ÔºåËøôÊ†∑Âú®ÂêéÈù¢ÁöÑÂ≠¶‰π†‰∏≠Ôºå‰Ω†ÁöÑÈÖçÁΩÆÂíå‰ª£Á†ÅÊâçËÉΩË∑üÊàë‰ª¨ÂÆåÂÖ®‰∏ÄËá¥„ÄÇ
Â°´ÂÆå‰ª•ÂêéÔºåÁÇπÂáª Next Áõ¥Âà∞Âá∫Áé∞ FinishÔºåÁÇπÂáªÂÆåÊàêÂç≥ÂèØ„ÄÇ
Ê∑ªÂä†‰æùËµñ È°πÁõÆÊñ∞Âª∫ÂêéÔºåÂú®È°πÁõÆÊ†πÁõÆÂΩï‰∏ãÊâæÂà∞ pom.xmlÊñá‰ª∂ÔºåÂπ∂ÂêëÂÖ∂‰∏≠Ê∑ªÂä†Â¶Ç‰∏ãÈÖçÁΩÆ„ÄÇ
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38  &amp;lt;dependencies&amp;gt; &amp;lt;!'><title>MyBatis ÂàùÁ∫ßÁØá</title>

<link rel='canonical' href='https://ahao.ink/posts/mybatis-%E5%88%9D%E7%BA%A7%E7%AF%87/'>

<link rel="stylesheet" href="/scss/style.min.baba905ab2d1209de74a1930c487a8a663c37860af6aa1c26588d298bf620306.css"><meta property='og:title' content='MyBatis ÂàùÁ∫ßÁØá'>
<meta property='og:description' content='MyBatis ÂÆûÈ™åÁéØÂ¢ÉÊê≠Âª∫ ÂâçË®Ä MyBatis ÊòØ‰∏Ä‰∏™ÁêÜËÆ∫Â∞ëÔºåÂÆûË∑µÊÄßÂº∫ÁöÑÊ°ÜÊû∂ÔºõÂÆÉÊ≤°ÊúâÂ§™Â§öÁöÑÊ¶ÇÂøµÔºåÊúÄÂ•ΩÁöÑÂ≠¶‰π†ÊñπÂºèÂ∞±ÊòØÂÆûË∑µ„ÄÇÊú¨Â∞èËäÇÔºåÊàë‰ª¨Â∞Ü‰∏ÄËµ∑Êê≠Âª∫ MyBatis ÁöÑÂÆûË∑µÁéØÂ¢ÉÔºåÊñπ‰æøÂêéÁª≠Á´†ËäÇÁöÑÂ≠¶‰π†„ÄÇ
Êñ∞Âª∫È°πÁõÆ ËÄÉËôëÂà∞Â∑•Á®ãÁöÑÁª¥Êä§ÊÄßÔºåÊàë‰ª¨ÈÄâÊã© IDE Êù•Êñ∞Âª∫‰∏Ä‰∏™ Maven È°πÁõÆÊù•‰ΩøÁî® MyBatis„ÄÇÂΩìÁÑ∂Â¶ÇÊûú‰Ω†Êõ¥ÂÄæÂêë‰∫Ü GradleÔºåÈÇ£‰πàÊ≤°ÊúâÂÖ≥Á≥ªÔºå‰Ω†Âè™ÈúÄË¶ÅÊõ¥ÊîπÊ∑ªÂä†‰æùËµñÁöÑÊñπÂºèÂç≥ÂèØ„ÄÇ
Âú® IDE ‰∏äÔºå‰Ω†ÂèØ‰ª•ÈÄâÊã© Eclipse ÊàñËÄÖ IDEAÔºåÂΩìÁÑ∂Êàë‰ª¨Êõ¥Êé®Ëçê‰Ω†‰ΩøÁî® IDEAÔºåÂõ†‰∏∫ÂÆÉÁöÑÁ§æÂå∫ÁâàÂ∑≤ÁªèË∂≥Â§üÊàë‰ª¨Â≠¶‰π† MyBatis ‰∫ÜÔºåËÄå‰∏îÂÆÉ‰πüÊòØÂÖçË¥πÁöÑÔºåÊú¨Â∞èËäÇÊàë‰ª¨‰ª• IDEA ‰Ωú‰∏∫ÈªòËÆ§ÁöÑÂºÄÂèëÁéØÂ¢É„ÄÇ
ÊâìÂºÄ IDEAÔºåÈÄâÊã© New ProjectÔºåÁÇπÂáªÂ∑¶‰æßÁöÑMavenÈ°πÔºåÁÑ∂Âêé Next Êñ∞Âª∫È°πÁõÆÔºåÂ¶Ç‰∏ãÂõæÔºö
ËøõÂÖ•‰∏ã‰∏ÄÈ°µÂêéÔºåËæìÂÖ•ÂØπÂ∫îÁöÑ GroupId Âíå ArtifactIdÔºåÂ¶Ç‰∏ãÂõæÔºå‰Ω†‰πüÂèØ‰ª•ÈÄâÊã©Ëá™Â∑±ÂøÉ‰ª™ÁöÑ idÔºå‰ΩÜÊòØÊàë‰ª¨Êé®Ëçê‰Ω†Ë∑üÊàë‰ª¨‰øùÊåÅ‰∏ÄËá¥ÔºåËøôÊ†∑Âú®ÂêéÈù¢ÁöÑÂ≠¶‰π†‰∏≠Ôºå‰Ω†ÁöÑÈÖçÁΩÆÂíå‰ª£Á†ÅÊâçËÉΩË∑üÊàë‰ª¨ÂÆåÂÖ®‰∏ÄËá¥„ÄÇ
Â°´ÂÆå‰ª•ÂêéÔºåÁÇπÂáª Next Áõ¥Âà∞Âá∫Áé∞ FinishÔºåÁÇπÂáªÂÆåÊàêÂç≥ÂèØ„ÄÇ
Ê∑ªÂä†‰æùËµñ È°πÁõÆÊñ∞Âª∫ÂêéÔºåÂú®È°πÁõÆÊ†πÁõÆÂΩï‰∏ãÊâæÂà∞ pom.xmlÊñá‰ª∂ÔºåÂπ∂ÂêëÂÖ∂‰∏≠Ê∑ªÂä†Â¶Ç‰∏ãÈÖçÁΩÆ„ÄÇ
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38  &amp;lt;dependencies&amp;gt; &amp;lt;!'>
<meta property='og:url' content='https://ahao.ink/posts/mybatis-%E5%88%9D%E7%BA%A7%E7%AF%87/'>
<meta property='og:site_name' content='ahao&#39;s Blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2021-06-16T13:36:41&#43;00:00'/><meta property='article:modified_time' content='2022-03-18T08:28:31&#43;00:00'/><meta property='og:image' content='https://ahao.ink/18.jpg' />
<meta name="twitter:title" content="MyBatis ÂàùÁ∫ßÁØá">
<meta name="twitter:description" content="MyBatis ÂÆûÈ™åÁéØÂ¢ÉÊê≠Âª∫ ÂâçË®Ä MyBatis ÊòØ‰∏Ä‰∏™ÁêÜËÆ∫Â∞ëÔºåÂÆûË∑µÊÄßÂº∫ÁöÑÊ°ÜÊû∂ÔºõÂÆÉÊ≤°ÊúâÂ§™Â§öÁöÑÊ¶ÇÂøµÔºåÊúÄÂ•ΩÁöÑÂ≠¶‰π†ÊñπÂºèÂ∞±ÊòØÂÆûË∑µ„ÄÇÊú¨Â∞èËäÇÔºåÊàë‰ª¨Â∞Ü‰∏ÄËµ∑Êê≠Âª∫ MyBatis ÁöÑÂÆûË∑µÁéØÂ¢ÉÔºåÊñπ‰æøÂêéÁª≠Á´†ËäÇÁöÑÂ≠¶‰π†„ÄÇ
Êñ∞Âª∫È°πÁõÆ ËÄÉËôëÂà∞Â∑•Á®ãÁöÑÁª¥Êä§ÊÄßÔºåÊàë‰ª¨ÈÄâÊã© IDE Êù•Êñ∞Âª∫‰∏Ä‰∏™ Maven È°πÁõÆÊù•‰ΩøÁî® MyBatis„ÄÇÂΩìÁÑ∂Â¶ÇÊûú‰Ω†Êõ¥ÂÄæÂêë‰∫Ü GradleÔºåÈÇ£‰πàÊ≤°ÊúâÂÖ≥Á≥ªÔºå‰Ω†Âè™ÈúÄË¶ÅÊõ¥ÊîπÊ∑ªÂä†‰æùËµñÁöÑÊñπÂºèÂç≥ÂèØ„ÄÇ
Âú® IDE ‰∏äÔºå‰Ω†ÂèØ‰ª•ÈÄâÊã© Eclipse ÊàñËÄÖ IDEAÔºåÂΩìÁÑ∂Êàë‰ª¨Êõ¥Êé®Ëçê‰Ω†‰ΩøÁî® IDEAÔºåÂõ†‰∏∫ÂÆÉÁöÑÁ§æÂå∫ÁâàÂ∑≤ÁªèË∂≥Â§üÊàë‰ª¨Â≠¶‰π† MyBatis ‰∫ÜÔºåËÄå‰∏îÂÆÉ‰πüÊòØÂÖçË¥πÁöÑÔºåÊú¨Â∞èËäÇÊàë‰ª¨‰ª• IDEA ‰Ωú‰∏∫ÈªòËÆ§ÁöÑÂºÄÂèëÁéØÂ¢É„ÄÇ
ÊâìÂºÄ IDEAÔºåÈÄâÊã© New ProjectÔºåÁÇπÂáªÂ∑¶‰æßÁöÑMavenÈ°πÔºåÁÑ∂Âêé Next Êñ∞Âª∫È°πÁõÆÔºåÂ¶Ç‰∏ãÂõæÔºö
ËøõÂÖ•‰∏ã‰∏ÄÈ°µÂêéÔºåËæìÂÖ•ÂØπÂ∫îÁöÑ GroupId Âíå ArtifactIdÔºåÂ¶Ç‰∏ãÂõæÔºå‰Ω†‰πüÂèØ‰ª•ÈÄâÊã©Ëá™Â∑±ÂøÉ‰ª™ÁöÑ idÔºå‰ΩÜÊòØÊàë‰ª¨Êé®Ëçê‰Ω†Ë∑üÊàë‰ª¨‰øùÊåÅ‰∏ÄËá¥ÔºåËøôÊ†∑Âú®ÂêéÈù¢ÁöÑÂ≠¶‰π†‰∏≠Ôºå‰Ω†ÁöÑÈÖçÁΩÆÂíå‰ª£Á†ÅÊâçËÉΩË∑üÊàë‰ª¨ÂÆåÂÖ®‰∏ÄËá¥„ÄÇ
Â°´ÂÆå‰ª•ÂêéÔºåÁÇπÂáª Next Áõ¥Âà∞Âá∫Áé∞ FinishÔºåÁÇπÂáªÂÆåÊàêÂç≥ÂèØ„ÄÇ
Ê∑ªÂä†‰æùËµñ È°πÁõÆÊñ∞Âª∫ÂêéÔºåÂú®È°πÁõÆÊ†πÁõÆÂΩï‰∏ãÊâæÂà∞ pom.xmlÊñá‰ª∂ÔºåÂπ∂ÂêëÂÖ∂‰∏≠Ê∑ªÂä†Â¶Ç‰∏ãÈÖçÁΩÆ„ÄÇ
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38  &amp;lt;dependencies&amp;gt; &amp;lt;!"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://ahao.ink/18.jpg' />
    <link rel="shortcut icon" href="img/avatar_hua8acc2063f8134c9d13980a8a63800c2_11114_300x0_resize_box_3.png" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="ÂàáÊç¢ËèúÂçï">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hua8acc2063f8134c9d13980a8a63800c2_11114_300x0_resize_box_3.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üê∑</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">ahao&#39;s Blog</a></h1>
            <h2 class="site-description">ÈÅìÈòª‰∏îÈïøÔºåË°åÂàôÂ∞ÜËá≥</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/'
                        target="_blank"
                        title="GitHub"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com'
                        target="_blank"
                        title="Twitter"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>‰∏ªÈ°µ / Home</span>
            </a>
        </li>
        
        

        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>ÂΩíÊ°£ / Archives</span>
            </a>
        </li>
        
        

        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>ÊêúÁ¥¢ / Search</span>
            </a>
        </li>
        
        

        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>ÂÖ≥‰∫é / About</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>ÊöóËâ≤Ê®°Âºè</span>
                </li>
            
        </div>
    </ol>
</aside>
<main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/posts/mybatis-%E5%88%9D%E7%BA%A7%E7%AF%87/">
                
                    <img src="/18.jpg" loading="lazy" alt="Featured image of post MyBatis ÂàùÁ∫ßÁØá" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/mybatis/" >
                MyBatis
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/posts/mybatis-%E5%88%9D%E7%BA%A7%E7%AF%87/">MyBatis ÂàùÁ∫ßÁØá</a>
        </h2>
    
        
    </div>

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2021Âπ¥6Êúà16Êó•</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    ÈòÖËØªÊó∂Èïø: 29 ÂàÜÈíü
                </time>
            </div>
        
    </footer>
    

    
</div>
</header>

    <section class="article-content">
    
    
    <h1 id="mybatis-ÂÆûÈ™åÁéØÂ¢ÉÊê≠Âª∫">MyBatis ÂÆûÈ™åÁéØÂ¢ÉÊê≠Âª∫</h1>
<h2 id="ÂâçË®Ä">ÂâçË®Ä</h2>
<p>MyBatis ÊòØ‰∏Ä‰∏™ÁêÜËÆ∫Â∞ëÔºåÂÆûË∑µÊÄßÂº∫ÁöÑÊ°ÜÊû∂ÔºõÂÆÉÊ≤°ÊúâÂ§™Â§öÁöÑÊ¶ÇÂøµÔºåÊúÄÂ•ΩÁöÑÂ≠¶‰π†ÊñπÂºèÂ∞±ÊòØ<code>ÂÆûË∑µ</code>„ÄÇÊú¨Â∞èËäÇÔºåÊàë‰ª¨Â∞Ü‰∏ÄËµ∑Êê≠Âª∫ MyBatis ÁöÑÂÆûË∑µÁéØÂ¢ÉÔºåÊñπ‰æøÂêéÁª≠Á´†ËäÇÁöÑÂ≠¶‰π†„ÄÇ</p>
<h2 id="Êñ∞Âª∫È°πÁõÆ">Êñ∞Âª∫È°πÁõÆ</h2>
<p>ËÄÉËôëÂà∞Â∑•Á®ãÁöÑÁª¥Êä§ÊÄßÔºåÊàë‰ª¨ÈÄâÊã© IDE Êù•Êñ∞Âª∫‰∏Ä‰∏™ Maven È°πÁõÆÊù•‰ΩøÁî® MyBatis„ÄÇÂΩìÁÑ∂Â¶ÇÊûú‰Ω†Êõ¥ÂÄæÂêë‰∫Ü GradleÔºåÈÇ£‰πàÊ≤°ÊúâÂÖ≥Á≥ªÔºå‰Ω†Âè™ÈúÄË¶ÅÊõ¥ÊîπÊ∑ªÂä†‰æùËµñÁöÑÊñπÂºèÂç≥ÂèØ„ÄÇ</p>
<p>Âú® IDE ‰∏äÔºå‰Ω†ÂèØ‰ª•ÈÄâÊã© Eclipse ÊàñËÄÖ IDEAÔºåÂΩìÁÑ∂Êàë‰ª¨Êõ¥Êé®Ëçê‰Ω†‰ΩøÁî® IDEAÔºåÂõ†‰∏∫ÂÆÉÁöÑÁ§æÂå∫ÁâàÂ∑≤ÁªèË∂≥Â§üÊàë‰ª¨Â≠¶‰π† MyBatis ‰∫ÜÔºåËÄå‰∏îÂÆÉ‰πüÊòØÂÖçË¥πÁöÑÔºåÊú¨Â∞èËäÇÊàë‰ª¨‰ª• IDEA ‰Ωú‰∏∫ÈªòËÆ§ÁöÑÂºÄÂèëÁéØÂ¢É„ÄÇ</p>
<p>ÊâìÂºÄ IDEAÔºåÈÄâÊã© <code>New Project</code>ÔºåÁÇπÂáªÂ∑¶‰æßÁöÑ<code>Maven</code>È°πÔºåÁÑ∂Âêé Next Êñ∞Âª∫È°πÁõÆÔºåÂ¶Ç‰∏ãÂõæÔºö</p>
<!-- raw HTML omitted -->
<p>ËøõÂÖ•‰∏ã‰∏ÄÈ°µÂêéÔºåËæìÂÖ•ÂØπÂ∫îÁöÑ GroupId Âíå ArtifactIdÔºåÂ¶Ç‰∏ãÂõæÔºå‰Ω†‰πüÂèØ‰ª•ÈÄâÊã©Ëá™Â∑±ÂøÉ‰ª™ÁöÑ idÔºå‰ΩÜÊòØÊàë‰ª¨Êé®Ëçê‰Ω†Ë∑üÊàë‰ª¨<code>‰øùÊåÅ‰∏ÄËá¥</code>ÔºåËøôÊ†∑Âú®ÂêéÈù¢ÁöÑÂ≠¶‰π†‰∏≠Ôºå‰Ω†ÁöÑÈÖçÁΩÆÂíå‰ª£Á†ÅÊâçËÉΩË∑üÊàë‰ª¨ÂÆåÂÖ®‰∏ÄËá¥„ÄÇ</p>
<!-- raw HTML omitted -->
<p>Â°´ÂÆå‰ª•ÂêéÔºåÁÇπÂáª Next Áõ¥Âà∞Âá∫Áé∞ FinishÔºåÁÇπÂáªÂÆåÊàêÂç≥ÂèØ„ÄÇ</p>
<h2 id="Ê∑ªÂä†‰æùËµñ">Ê∑ªÂä†‰æùËµñ</h2>
<p>È°πÁõÆÊñ∞Âª∫ÂêéÔºåÂú®È°πÁõÆÊ†πÁõÆÂΩï‰∏ãÊâæÂà∞ <code>pom.xml</code>Êñá‰ª∂ÔºåÂπ∂ÂêëÂÖ∂‰∏≠Ê∑ªÂä†Â¶Ç‰∏ãÈÖçÁΩÆ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;dependencies&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="c">&lt;!-- MyBatis ‰æùËµñ --&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>org.mybatis<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>mybatis<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>3.5.4<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="c">&lt;!-- mysql È©±Âä® --&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>mysql<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>mysql-connector-java<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>8.0.18<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="c">&lt;!-- Êó•Âøó‰æùËµñ --&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>ch.qos.logback<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>logback-classic<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>1.2.3<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependencies&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- Êñá‰ª∂ÊâìÂåÖÈÖçÁΩÆ --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;build&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;resources&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;resource&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;directory&gt;</span>src/main/resources<span class="nt">&lt;/directory&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;filtering&gt;</span>false<span class="nt">&lt;/filtering&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/resource&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;resource&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;directory&gt;</span>src/main/java<span class="nt">&lt;/directory&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;includes&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;include&gt;</span>**/*.properties<span class="nt">&lt;/include&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;include&gt;</span>**/*.xml<span class="nt">&lt;/include&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;include&gt;</span>**/*.tld<span class="nt">&lt;/include&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;/includes&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;filtering&gt;</span>false<span class="nt">&lt;/filtering&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/resource&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/resources&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/build&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê∑ªÂä†ÁöÑ‰æùËµñÊØîËæÉÂ§öÔºåËôΩÁÑ∂Âú®Áõ∏Â∫îÁöÑÂú∞ÊñπÊàë‰ª¨‰πüÊâì‰∏ä‰∫ÜÊ≥®ÈáäÔºå‰∏çËøáÊàë‰ª¨‰æùÁÑ∂ÂæóËØ¥Êòé‰∏Ä‰∏ã„ÄÇdependency ÊòØ Maven ÁÆ°ÁêÜ‰æùËµñÁöÑÊñπÂºèÔºåÊàë‰ª¨ÂàÜÂà´Ê∑ªÂä†‰∫Ü mybatis„ÄÅmysql-connector-java Âíå logback-classic„ÄÇ</p>
<p>ÂÖ∂‰∏≠ MyBatis ‰Ωú‰∏∫Êàë‰ª¨ÁöÑ‰∏ªËßíÔºåÂÆÉÁöÑ‰æùËµñÊòØÂøÖ‰∏çÂèØÂ∞ëÁöÑÔºõÁî±‰∫éÂÆûÊìçÈúÄË¶ÅÊï∞ÊçÆÂ∫ìÁéØÂ¢ÉÔºåÊàë‰ª¨‰πüÊ∑ªÂä†‰∏ä‰∫Ü MySQL È©±Âä®‰æùËµñÔºõ‰∏∫‰∫ÜÊõ¥Â•ΩÁöÑÊü•Áúã‰ø°ÊÅØÔºåÊàë‰ª¨‰πüÊ∑ªÂä†‰∫Ü logback Êó•ÂøóÊ°ÜÊû∂„ÄÇ</p>
<p>Âè¶Â§ñÔºåÁî±‰∫é Maven ÊâìÂåÖÈªòËÆ§‰∏ç‰ºöÊâìÂåÖ <code>src/main/java</code>Êñá‰ª∂Â§π‰∏ãÁöÑËµÑÊ∫êÊñá‰ª∂Ôºå‰ΩÜÂÆûÈôÖÁöÑÁéØÂ¢É‰∏≠ÔºåÊàë‰ª¨ÂèØËÉΩÈúÄË¶ÅÂú®ËØ•Êñá‰ª∂Â§π‰∏ãÂ≠òÊîæËµÑÊ∫êÊñá‰ª∂ÔºåÂ¶Ç<code>.xml</code>ÔºåÊâÄ‰ª•Êàë‰ª¨‰πüÂøÖÈ°ªÊõ¥ÊîπËøô‰∏™ÈÖçÁΩÆ„ÄÇ</p>
<p>Ê∑ªÂä†‰æùËµñÂêéÔºåIDE ‰ºöÊèê‰æõ‰Ω†ÊòØÂê¶ÂØºÂÖ•Ëøô‰∫õ‰æùËµñÔºåËØ∑‰Ω†ÁÇπÂáªÁ°ÆËÆ§ÔºåÂπ∂‰∏îÁ≠âÂæÖ‰∏Ä‰ºöÂÑøÔºåÂæÖ‰æùËµñÂØºÂÖ•ÂÆåÊàêÊàë‰ª¨Â∞±ÂèØ‰ª•ËøõÂÖ•‰∏ã‰∏ÄÊ≠•‰∫Ü„ÄÇ</p>
<h2 id="Êï∞ÊçÆÂáÜÂ§á">Êï∞ÊçÆÂáÜÂ§á</h2>
<p>È°πÁõÆÊê≠Âª∫Â•ΩÂêéÔºåÊàë‰ª¨ËøòÈúÄË¶Å‰∏ÄÂÆöÁöÑÊï∞ÊçÆÊîØÊåÅ„ÄÇÈ¶ñÂÖàÔºåËØ∑Âú®‰Ω†ÂèØÁî®ÁöÑÊï∞ÊçÆÂ∫ìÁéØÂ¢É‰∏≠Êñ∞Âª∫‰∏Ä‰∏™Âêç‰∏∫<code>mybatisdemo</code>ÁöÑÊï∞ÊçÆÂ∫ìÔºåÂΩìÁÑ∂‰Ω†‰πüÂèØ‰ª•‰ΩøÁî®ÂÖ∂ÂÆÉÁöÑÂêçÁß∞Ôºå‰ΩÜËøòÊòØÂ∏åÊúõ‰Ω†ËÉΩ‰∏éÊàë‰ª¨‰øùÊåÅ‰∏ÄËá¥ÔºåÊñ∞Âª∫Êï∞ÊçÆÂ∫ìÊàêÂäüÂêéÔºåÊé•ÁùÄËøêË°å‰ª•‰∏ã SQL ËÑöÊú¨„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DROP</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="k">IF</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="k">user</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="k">user</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">id</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="n">AUTO_INCREMENT</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">username</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">age</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">score</span><span class="w"> </span><span class="nb">int</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="k">user</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="n">username</span><span class="p">,</span><span class="n">age</span><span class="p">,</span><span class="n">score</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;peter&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;pedro&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w"> </span><span class="mi">200</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="s1">&#39;jerry&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="s1">&#39;mike&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p">),(</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;tom&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">27</span><span class="p">,</span><span class="w"> </span><span class="mi">1000</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÁªìÊûúÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="o">+</span><span class="c1">----+----------+-----+-------+
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">+</span><span class="c1">----+----------+-----+-------+
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="mi">1</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">peter</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">18</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mi">100</span><span class="w">   </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">2</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">pedro</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">24</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mi">200</span><span class="w">   </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">3</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">jerry</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="mi">28</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mi">500</span><span class="w">   </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">4</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">mike</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">12</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mi">300</span><span class="w">   </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="mi">5</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="n">tom</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="mi">27</span><span class="w">  </span><span class="o">|</span><span class="w"> </span><span class="mi">1000</span><span class="w">  </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">+</span><span class="c1">----+----------+-----+-------+
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="Â∞èÁªì">Â∞èÁªì</h2>
<p>Êú¨Â∞èËäÇÊòØ‰∏Ä‰∏™Á∫ØÂÆûÊìçÂ∞èËäÇÔºåÊàë‰ª¨Ê≤°Êúâ‰ªãÁªç‰ªª‰ΩïÊ¶ÇÂøµÔºåËÄåÊòØÂ∏¶‰Ω†‰∏ÄËµ∑Êê≠Âª∫‰∫ÜÂ≠¶‰π† MyBatis ÈúÄË¶ÅÁöÑÁéØÂ¢ÉÂíåÊï∞ÊçÆÔºåÂêéÁª≠ÁöÑÊâÄÊúâÂ∞èËäÇÈÉΩÂ∞Ü<code>Áõ¥Êé•‰æùËµñ‰∫é</code>Êú¨Â∞èËäÇ„ÄÇ</p>
<h1 id="mybatis-ÁÆÄÂçï‰ΩøÁî®">MyBatis ÁÆÄÂçï‰ΩøÁî®</h1>
<h2 id="ÂâçË®Ä-1">ÂâçË®Ä</h2>
<p>Âú®‰∏äÈù¢‰∏≠ÔºåÊàë‰ª¨Êê≠Âª∫‰∫Ü MyBatis ÂÆûÈ™åÁéØÂ¢É„ÄÇÊú¨Â∞èËäÇÔºåÊàë‰ª¨Â∞Ü‰∏ÄËµ∑Â≠¶‰π†Â¶Ç‰Ωï‰ΩøÁî® MyBatisÔºåËôΩÁÑ∂Âú®ÂÆûÈôÖÁöÑÂºÄÂèë‰∏≠Ôºå‰Ω†Âá†‰πé‰∏ç‰ºöÊåâÁÖßÊú¨Â∞èËäÇÊâÄ‰ªãÁªçÁöÑÊñπÂºèÂéª‰ΩøÁî® MyBatisÔºå‰ΩÜÊòØËøôÂØπ‰Ω†ÁÜüÊÇâ MyBatis Êï¥‰ΩìÁªìÊûÑÊúâÁùÄÈáçË¶Å‰ΩúÁî®ÔºåÂêåÊó∂Ëøô‰πüÊòØÈù¢ËØïÁöÑÈáçÁÇπ„ÄÇ</p>
<h2 id="ÁºñÁ®ãÂºè‰ΩøÁî®">ÁºñÁ®ãÂºè‰ΩøÁî®</h2>
<p>MyBatis ÂÆòÊñπÊñáÊ°£‰∏≠Âπ∂Êú™ËØ¶ÁªÜÁöÑ‰ªãÁªçÂ¶Ç‰ΩïÁºñÁ®ãÂºè‰ΩøÁî® MyBatisÔºåÁªùÂ§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨ÈÉΩÊòØÈÄöËøá <code>ÈÖçÁΩÆÊñá‰ª∂</code>Êù•ÊãøÂà∞ÈÖçÁΩÆÁÑ∂ÂêéÂºÄÂêØ‰ºöËØùÁöÑ„ÄÇËøôÊ†∑ÁöÑÊñπÂºèÂõ∫ÁÑ∂ÂæàÊñπ‰æøÔºå‰ΩÜÊòØÂç¥Â±èËîΩ‰∫ÜÂ§™Â§öÁöÑÁªÜËäÇÔºåÂõ†Ê≠§Êàë‰ª¨ÊÉ≥‰ªéÁÇπÂà∞Èù¢ÔºåÂ±ÇÂ±ÇÈÄíËøõÁªô‰Ω†‰ªãÁªç MyBatis ÁöÑÂü∫Á°ÄÁî®Ê≥ï„ÄÇ</p>
<p>Êé•‰∏ãÊù•ÔºåÊàë‰ª¨‰∏ÄËµ∑Êù•ÂÜô‰∏Ä‰∏™ÁÆÄÂçïÁöÑ demo Êù•‰ΩøÁî®‰∏Ä‰∏ã MyBatis„ÄÇ</p>
<h3 id="ÂêØÂä®-mybatis">ÂêØÂä® MyBatis</h3>
<p>Âú® mybatis-primer È°πÁõÆ‰∏≠ÔºåÊúâ‰∏Ä‰∏™ÈªòËÆ§ÁöÑÂåÖ<code>com.ahao.mybatis</code>ÔºåÂú®ËØ•ÂåÖ‰∏ãÔºåÊàë‰ª¨Êñ∞Âª∫‰∏Ä‰∏™ÂåÖÂêç‰∏∫<code>pattern</code>ÔºåÂπ∂Âú®ÂÖ∂‰∏≠Êñ∞Âª∫‰∏Ä‰∏™Âêç‰∏∫<code>StartNoXml.java</code>ÁöÑÁ±ªÔºåÂπ∂ÂêëËØ•Êñá‰ª∂‰∏≠Â°´ÂÖÖÂ¶Ç‰∏ã‰ª£Á†ÅÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ahao.mybatis.pattern</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.datasource.pooled.PooledDataSource</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.mapping.Environment</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.session.Configuration</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.session.SqlSession</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.session.SqlSessionFactory</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.session.SqlSessionFactoryBuilder</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.transaction.jdbc.JdbcTransactionFactory</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.sql.PreparedStatement</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.sql.ResultSet</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@SuppressWarnings</span><span class="o">({</span><span class="s">&#34;SqlResolve&#34;</span><span class="o">,</span> <span class="s">&#34;SqlNoDataSourceInspection&#34;</span><span class="o">,</span> <span class="s">&#34;Duplicates&#34;</span><span class="o">})</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StartNoXml</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">SQLException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Êó†ÈúÄxmlÈÖçÁΩÆÁöÑÊñπÂºè‰ΩøÁî®MyBatis
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ÂáÜÂ§ájdbc‰∫ãÂä°Á±ª
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">JdbcTransactionFactory</span> <span class="n">jdbcTransactionFactory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JdbcTransactionFactory</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÈÖçÁΩÆÊï∞ÊçÆÊ∫ê
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">PooledDataSource</span> <span class="n">dataSource</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">      <span class="k">new</span> <span class="n">PooledDataSource</span><span class="o">(</span><span class="s">&#34;com.mysql.cj.jdbc.Driver&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;jdbc:mysql://localhost:3306/mybatisdemo?useSSL=false&amp;characterEncoding=utf8&amp;serverTimezone = GMT&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">        <span class="s">&#34;root&#34;</span><span class="o">,</span> <span class="s">&#34;123456&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÈÖçÁΩÆÁéØÂ¢ÉÔºåÂêëÁéØÂ¢É‰∏≠ÊåáÂÆöÁéØÂ¢Éid„ÄÅ‰∫ãÂä°ÂíåÊï∞ÊçÆÊ∫ê
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Environment</span> <span class="n">environment</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Environment</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span><span class="s">&#34;development&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="o">.</span><span class="na">transactionFactory</span><span class="o">(</span><span class="n">jdbcTransactionFactory</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="o">.</span><span class="na">dataSource</span><span class="o">(</span><span class="n">dataSource</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Êñ∞Âª∫ MyBatis ÈÖçÁΩÆÁ±ª
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">(</span><span class="n">environment</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂæóÂà∞ SqlSessionFactory Ê†∏ÂøÉÁ±ª
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">SqlSessionFactory</span> <span class="n">sqlSessionFactory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SqlSessionFactoryBuilder</span><span class="o">().</span><span class="na">build</span><span class="o">(</span><span class="n">configuration</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂºÄÂßã‰∏Ä‰∏™ sql ‰ºöËØù
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">SqlSession</span> <span class="n">session</span> <span class="o">=</span> <span class="n">sqlSessionFactory</span><span class="o">.</span><span class="na">openSession</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂæóÂà∞ sql ËøûÊé•Âπ∂ËøêË°å sql ËØ≠Âè•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">PreparedStatement</span> <span class="n">preStatement</span> <span class="o">=</span> <span class="n">session</span>
</span></span><span class="line"><span class="cl">      <span class="o">.</span><span class="na">getConnection</span><span class="o">()</span>
</span></span><span class="line"><span class="cl">      <span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="s">&#34;SELECT * FROM user WHERE id = ?&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">preStatement</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="n">1</span><span class="o">,</span> <span class="n">1</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">ResultSet</span> <span class="n">result</span> <span class="o">=</span> <span class="n">preStatement</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// È™åËØÅÁªìÊûú
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">while</span> <span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;username: &#34;</span> <span class="o">+</span> <span class="n">result</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&#34;username&#34;</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂÖ≥Èó≠‰ºöËØù
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">session</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âç≥‰Ωø‰Ω†‰∏çÁÜüÊÇâ MyBatisÔºå‰πüÊ≤°ÊúâÂøÖË¶ÅË¢´ËøôÊÆµ‰ª£Á†ÅÁªôÂêìÂà∞ÔºåÂõ†‰∏∫Âú®ÂÆûÈôÖÁöÑÂºÄÂèë‰∏≠Ôºå‰Ω†Âá†‰πéÊ≤°ÊúâÊú∫‰ºöÂéªÂÜôËøôÊÆµ‰ª£Á†Å„ÄÇ‰ΩÜÊòØÊàë‰ª¨‰ªçÈúÄË¶Å‰ªãÁªçËøôÊÆµ‰ª£Á†ÅÔºåÂÆÉÂèØËÉΩÊòØ‰Ω†Èù¢ËØïÁöÑÈáçÁÇπ„ÄÇ</p>
<p>‰π¶ÂÜôÂÆåÊØïÂêéÔºåËØ∑Âú® PooledDataSource Á±ªÊûÑÈÄ†ÂáΩÊï∞‰∏≠Êõ¥ÊîπÊï∞ÊçÆÁî®Êà∑Âêç„ÄÅÂØÜÁ†ÅÂíå url ÈÖçÁΩÆ‰ª•Êª°Ë∂≥‰Ω†ÊâÄ‰ΩøÁî®ÁöÑÊï∞ÊçÆÂ∫ìÁéØÂ¢É„ÄÇËøêË°å‰∏Ä‰∏ãËøôÊÆµ‰ª£Á†ÅÔºåÂ¶ÇÊûú‰∏ÄÂàáÈ°∫Âà©ÔºåÂú®ÊéßÂà∂Âè∞‰∏≠‰Ω†‰ºöÁúãÂà∞‰ª•‰∏ãËæìÂá∫ÂÜÖÂÆπÔºàÂè™Êà™Âèñ‰∫ÜÈÉ®ÂàÜÂÜÖÂÆπÔºâÔºö</p>
<p><img src="https://s2.loli.net/2021/12/25/Mh7JZbSyBqPcXWx.png"
	
	
	
	loading="lazy"
	
		alt="image-20211225112035789"
	
	
></p>
<h3 id="‰ΩøÁî®ÊµÅÁ®ã">‰ΩøÁî®ÊµÅÁ®ã</h3>
<p>Âú®‰ª£Á†Å‰∏≠ÔºåÊàë‰ª¨Ê∑ªÂä†‰∫Ü‰∏ÄÂÆöÈáèÁöÑÊ≥®ÈáäËØ¥Êòé‰∫ÜÊµÅÁ®ãÔºåÊé•‰∏ãÊù•Êàë‰ª¨Êù•ÊÄªÁªì‰∏Ä‰∏ã„ÄÇ</p>
<p>ÂØπ‰∫é MyBatis ÁöÑÂü∫Á°Ä‰ΩøÁî®ÂèØÂ§ßËá¥ÂàÜ‰∏∫‰ª•‰∏ã<code>3</code>Ê≠•Ôºö</p>
<ol>
<li>ÂæóÂà∞ MyBatis ÈÖçÁΩÆ‰ø°ÊÅØÔºåÂç≥‰ª£Á†Å‰∏≠ÁöÑ<code>Configuration</code>Á±ª„ÄÇConfiguration Ë¥üË¥£ MyBatis Êû∂ÊûÑ‰∏≠ÁöÑÈÖçÁΩÆÈÉ®ÂàÜÔºå‰æãÂ¶ÇÔºödataSourceÊï∞ÊçÆÊ∫ê‰ø°ÊÅØÈÉΩ‰ºö‰∫§Áªô Configuration ÂéªÁÆ°ÁêÜÔºõËøô‰∏ÄÊ≠•ÂÖ∂ÂÆûÊòØÊØîËæÉÁπÅÊùÇÁöÑÔºåEnvironment ÊòØ Configuration ‰∏≠ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåËÄå PooledDataSource Âíå JdbcTransactionFactory ÂèàÊòØ Environment ‰∏≠ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÂÆÉ‰ª¨ÊòØÂ±û‰∫éÂ±ÇÂ±ÇÈÄíËøõÁöÑÂÖ≥Á≥ª„ÄÇÂÖ∂‰∏≠ JdbcTransactionFactory Ë°®Á§∫‰∫ãÂä°Â∑•ÂéÇÔºåÂΩì MyBatis ÈúÄË¶ÅÊñ∞Âª∫‰∫ãÂä°ÁöÑÊó∂ÂÄôÔºå‰ºöÈÄöËøáÂÆÉÊù•Êñ∞Âª∫ÔºõPooledDataSource Ë°®Á§∫Êï∞ÊçÆÊ∫êÔºåÈÄöËøáÂÖ∂ÊûÑÈÄ†ÂèÇÊï∞ÔºåÊàë‰ª¨‰º†ÂÖ•‰∫ÜÊï∞ÊçÆÂ∫ì urlÔºåÊï∞ÊçÆÂ∫ìÁî®Êà∑ÂíåÂØÜÁ†ÅÁ≠âÈÖçÁΩÆÔºõConfiguration ÂèØ‰ª•ÊúâÂ§ö‰∏™ EnvironmentÔºåÂõ†Ê≠§ÊØè‰∏™ Environment ÈÉΩÂøÖÈ°ªÊúâÂîØ‰∏ÄÁöÑ idÔºåÂç≥‰ª£Á†Å‰∏≠ÁöÑ developmentÔºåÂ∞ÜËøô‰∫õÈÖçÁΩÆÊê≠ÈÖçÁªÑÂêàÂêéÂ∞±ÊòØ‰∏Ä‰∏™ÂèØÁî®ÁöÑ Configuration„ÄÇ</li>
<li>ÈÄöËøá Configuration Êù•ÂàõÂª∫ <code>SqlSessionFactory</code>„ÄÇMyBatis ÊòØÈÄöËøá‰ºöËØùÁöÑÊñπÂºèÊù•ÊâßË°å SQL ÁöÑÔºåÂõ†‰∏∫Êàë‰ª¨ÂøÖÈ°ªÊã•Êúâ‰∏Ä‰∏™‰ºöËØùÂàõÂª∫Âô®ÔºåÂç≥‰ºöËØùÂ∑•ÂéÇ„ÄÇ</li>
<li>Êñ∞Âª∫<code>SqlSession</code>Êù•ÊâßË°å SQL„ÄÇÊúâ‰∫Ü SqlSessionFactory ÂêéÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•Êñπ‰æøÂú∞Êñ∞Âª∫‰ºöËØùÔºåÂπ∂ÈÄöËøá‰ºöËØùÊù•ÊâßË°å SQL ‰∫Ü„ÄÇ</li>
</ol>
<p>ËÄå<code>PreparedStatement</code>Âèä‰ª•‰∏ãÁöÑÂÜÖÂÆπÔºåÂÖ∂ÂÆûÂπ∂‰∏çÂ±û‰∫é MyBatisÔºåÂÆÉ‰ª¨ÊòØ JDBC Êèê‰æõÁöÑÔºåÂú®ÂÆûÈôÖÁöÑ MyBatis ÂºÄÂèë‰∏≠Ôºå‰Ω†‰πü‰∏ç‰ºöËøôÊ†∑ÂéªÊâßË°å SQLÔºåÂú®ËøôÈáåÊàë‰ª¨Âè™ÊòØ‰∏∫‰∫ÜÂ±ïÁ§∫ MyBatis Âíå JDBC ÁöÑÂÖ≥Á≥ª„ÄÇ</p>
<p>ÂèØ‰ª•ÁúãÂà∞ÔºåÁºñÁ®ãÂºè‰ΩøÁî® MyBatis ÂÖ∂ÂÆûÊòØÊØîËæÉÂ§çÊùÇÔºå‰Ω†ÈúÄË¶ÅÂçÅÂàÜÁÜüÊÇâ MyBatis ÁöÑ APIÔºåËÄå‰∏îËøôÁßçÁ°¨ÁºñÁ†ÅÁöÑÊñπÂºèÊòØÊØîËæÉÁ¨®ÈáçÁöÑÔºåÊâÄ‰ª•ÁªùÂ§ßÂ§öÊï∞ËµÑÊñôÈÉΩÊé®ËçêÈÖçÁΩÆÁöÑÊñπÂºè‰ΩøÁî® MyBatis„ÄÇ</p>
<h2 id="ÈÖçÁΩÆÂºè‰ΩøÁî®">ÈÖçÁΩÆÂºè‰ΩøÁî®</h2>
<p>Êé•‰∏ãÊù•ÔºåÊàë‰ª¨‰∏ÄËµ∑Êù•Áúã‰∏Ä‰∏ãÂ¶Ç‰ΩïÈÄöËøáÈÖçÁΩÆÊù•‰ΩøÁî® MyBatis„ÄÇ</p>
<h3 id="ÈÖçÁΩÆÊñá‰ª∂">ÈÖçÁΩÆÊñá‰ª∂</h3>
<p>È¶ñÂÖàÔºåÊàë‰ª¨Âú®<code>resources</code>ÁõÆÂΩï‰∏ãÊñ∞Âª∫<code>mybatis-config.xml</code>ÈÖçÁΩÆÊñá‰ª∂ÔºåÂπ∂Âú®ÂÖ∂‰∏≠Ê∑ªÂä†‰∏äÂ¶Ç‰∏ãÈÖçÁΩÆÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE configuration
</span></span></span><span class="line"><span class="cl"><span class="cp">  PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">  &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;environments</span> <span class="na">default=</span><span class="s">&#34;development&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;environment</span> <span class="na">id=</span><span class="s">&#34;development&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;transactionManager</span> <span class="na">type=</span><span class="s">&#34;JDBC&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;dataSource</span> <span class="na">type=</span><span class="s">&#34;POOLED&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;driver&#34;</span> <span class="na">value=</span><span class="s">&#34;com.mysql.cj.jdbc.Driver&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;url&#34;</span> <span class="na">value=</span><span class="s">&#34;jdbc:mysql://localhost:3306/mybatisdemo?useSSL=false&amp;amp;serverTimezone = GMT&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;username&#34;</span> <span class="na">value=</span><span class="s">&#34;root&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;password&#34;</span> <span class="na">value=</span><span class="s">&#34;123456&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;/dataSource&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/environment&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/environments&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êúâ‰∫Ü‰∏äÈù¢ÁºñÁ®ãÂºè API ÁöÑ‰ΩøÁî®ÁªèÈ™åÔºåÈÇ£‰πà‰Ω†‰∏ÄÂÆöÂèØ‰ª•ËΩªÊùæÁöÑÁúãÊáÇÈÖçÁΩÆÈ°πÔºå<code>configuration</code> Ê†áÁ≠æÂØπÂ∫î Configuration Á±ªÔºå<code>environment</code> Ê†áÁ≠æÂØπÂ∫î Environment Á±ªÔºå<code>transactionManager</code>Ê†áÁ≠æÂíå<code>dataSource</code>Ê†áÁ≠æÂàÜÂà´ÂØπÂ∫î JdbcTransactionFactory Âíå PooledDataSource Á±ª„ÄÇ</p>
<p>Êúâ‰∫ÜÈÖçÁΩÆÊñá‰ª∂ÂêéÔºåÊàë‰ª¨Êó†ÈúÄ‰∏Ä‰∏™Êå®ÁùÄ‰∏Ä‰∏™ÁöÑÊñ∞Âª∫Á±ªÔºåËÄåÊòØÂú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÊåáÂÆöÂç≥ÂèØÔºåÂ¶Ç<code>driver</code>ÁöÑÂÄºÊåáÂÆö‰∏∫<code>com.mysql.cj.jdbc.Driver</code>„ÄÇÂΩìÂêéÁª≠ÈúÄË¶Å‰øÆÊîπÁöÑÊó∂ÂÄôÔºå‰πü‰∏çÈúÄË¶ÅÂéª‰ª£Á†Å‰∏≠ÊâæÔºåËÄåÊòØÁõ¥Êé•Âú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠‰øÆÊîπÂç≥ÂèØ„ÄÇ</p>
<blockquote>
<p><strong>TIPSÔºö</strong> Ê≥®ÊÑèÔºå ËØ∑Âú®‰Ω†Ëá™Â∑±ÁöÑÈÖçÁΩÆÊñá‰ª∂‰∏≠‰øÆÊîπÊï∞ÊçÆÂ∫ìÈÖçÁΩÆÔºå‰ª•Êª°Ë∂≥‰Ω†Ëá™Â∑±ÁöÑÊï∞ÊçÆÂ∫ìÁéØÂ¢É„ÄÇ</p>
</blockquote>
<h3 id="ÂêØÂä®-mybatis-1">ÂêØÂä® MyBatis</h3>
<p>ÂêåÊ†∑Âú∞ÔºåÊàë‰ª¨Âú® patter ÂåÖ‰∏ãÊñ∞Âª∫Âè¶‰∏Ä‰∏™Á±ªÔºåÂêç‰∏∫<code>StartWithXml.java</code>ÔºåÂπ∂Â°´ÂÖÖ‰ª•‰∏ã‰ª£Á†ÅÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ahao.mybatis.pattern</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.io.Resources</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.session.SqlSession</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.session.SqlSessionFactory</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.session.SqlSessionFactoryBuilder</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.io.InputStream</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.sql.PreparedStatement</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.sql.ResultSet</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@SuppressWarnings</span><span class="o">({</span><span class="s">&#34;SqlResolve&#34;</span><span class="o">,</span> <span class="s">&#34;SqlNoDataSourceInspection&#34;</span><span class="o">,</span> <span class="s">&#34;Duplicates&#34;</span><span class="o">})</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StartWithXml</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">SQLException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÈÖçÁΩÆÂºè‰ΩøÁî®MyBatis
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">String</span> <span class="n">resource</span> <span class="o">=</span> <span class="s">&#34;mybatis-config.xml&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ËØªÂèñÈÖçÁΩÆÊñá‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">InputStream</span> <span class="n">inputStream</span> <span class="o">=</span> <span class="n">Resources</span><span class="o">.</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="n">resource</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÊåâÁÖßÈÖçÁΩÆÊñá‰ª∂ÂæóÂà∞ SqlSessionFactory
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">SqlSessionFactory</span> <span class="n">sqlSessionFactory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SqlSessionFactoryBuilder</span><span class="o">().</span><span class="na">build</span><span class="o">(</span><span class="n">inputStream</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Êñ∞Âª∫‰ºöËØù
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">SqlSession</span> <span class="n">session</span> <span class="o">=</span> <span class="n">sqlSessionFactory</span><span class="o">.</span><span class="na">openSession</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÊâßË°åSQL
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">PreparedStatement</span> <span class="n">preStatement</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">getConnection</span><span class="o">().</span><span class="na">prepareStatement</span><span class="o">(</span><span class="s">&#34;SELECT * FROM user WHERE id = ?&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">preStatement</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="n">1</span><span class="o">,</span> <span class="n">1</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">ResultSet</span> <span class="n">result</span> <span class="o">=</span> <span class="n">preStatement</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;username: &#34;</span> <span class="o">+</span> <span class="n">result</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&#34;username&#34;</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂÖ≥Èó≠‰ºöËØù
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">session</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøêË°å‰ª£Á†ÅÔºå‰Ω†‰ºöÁúãÂà∞Ë∑ü‰∏äÈù¢‰∏ÄÊ†∑ÁöÑÁªìÊûú„ÄÇ</p>
<h3 id="‰ΩøÁî®ÊµÅÁ®ã-1">‰ΩøÁî®ÊµÅÁ®ã</h3>
<p>ÈÖçÁΩÆÂºè‰ΩøÁî® MyBatisÔºå‰πüÂèØÂàÜ‰∏∫<code>3</code>Ê≠•Ôºö</p>
<ol>
<li>ËØªÂèñÈÖçÁΩÆÊñá‰ª∂ÔºåÂç≥<code>mybatis-config.xml</code>„ÄÇ</li>
<li>ÈÄöËøáÈÖçÁΩÆÊñá‰ª∂Êù•ÂàõÂª∫ <code>SqlSessionFactory</code>„ÄÇ</li>
<li>Êñ∞Âª∫<code>SqlSession</code>Êù•ÊâßË°å SQL„ÄÇ</li>
</ol>
<p>‰∏éÁºñÁ®ãÂºèÁõ∏ÊØîÔºåÈÖçÁΩÆÂºèÊõ¥‰∏∫ÁÆÄÊ¥ÅÔºåÊõ¥ÊòìÁª¥Êä§ÔºåÊâÄ‰ª•‰ΩøÁî®ÂπøÊ≥õÔºåÂá†‰πéÊâÄÊúâËµÑÊñôÈÉΩÊé®ËçêËøôÁßçÊñπÂºèÊù•‰ΩøÁî® MyBatis„ÄÇ‰ΩÜÊòØÁºñÁ®ãÂºèÂπ∂ÈùûÊ≤°ÊúâÊÑè‰πâÔºåÂÆÉÂèØ‰ª•Â∏ÆÂä©‰Ω†Ê¢≥ÁêÜ MyBatis ÁªìÊûÑÔºåÊúâ‰∫ÜÁºñÁ®ãÂºèÁöÑÂü∫Á°ÄÔºå‰Ω†ÊâçËÉΩÊõ¥Âä†ÂÆπÊòìÂú∞ÁúãÊáÇÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑÂÜÖÂÆπÔºåÂú®ÂêéÁª≠ÁöÑÂ≠¶‰π†‰∏≠ÔºåÊàë‰ª¨ÈÉΩÂ∞ÜÈªòËÆ§Âú∞‰ΩøÁî®ÈÖçÁΩÆÂºè„ÄÇ</p>
<h2 id="Â∞èÁªì-1">Â∞èÁªì</h2>
<ul>
<li>Âú®ÂÆûÈôÖÁöÑÂºÄÂèë‰∏≠Ôºå‰Ω†ÈÉΩÂ∞ëÊúâÊú∫‰ºöÂéªÊåâÁÖßÊú¨Â∞èËäÇÁöÑÊñπÂºèÂéª‰ΩøÁî® MyBatisÔºå‰ΩÜÊòØËøôÂØπ‰Ω†<code>Ê∑±ÂÖ•ÁêÜËß£MyBatis</code>ÁªìÊûÑÊúâÈáçË¶Å‰ΩúÁî®„ÄÇ</li>
<li>ÁºñÁ®ãÂºè‰ΩøÁî®ÁöÑ API ËæÉÂ§öÔºåÊàë‰ª¨Ê≤°ÊúâÂøÖË¶ÅÂéªÊ≠ªËÆ∞Á°¨ËÉåÔºåÁÜüÁªÉÊéåÊè°ÂÖ∂‰ΩøÁî®ÊµÅÁ®ãÔºåËÉΩÂú®ÈúÄË¶ÅÁöÑÊó∂ÂÄôÊü•ÈòÖÂç≥ÂèØ„ÄÇ</li>
</ul>
<h1 id="mybatis-mapper">MyBatis mapper</h1>
<h2 id="ÂâçË®Ä-2">ÂâçË®Ä</h2>
<p>Êú¨Â∞èËäÇÔºåÊàë‰ª¨Â∞Ü‰∏ÄËµ∑Â≠¶‰π† MyBatis mapper„ÄÇ</p>
<p>Âú®‰∏ä‰∏ÄËäÇ‰∏≠Êàë‰ª¨‰ª• JDBC ÁöÑÊñπÂºè‰ΩøÁî®‰∫Ü MyBatisÔºå‰ΩÜÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠ÊòØ‰∏ç‰ºöÈÄâÊã©ËøôÁßçÊñπÂºèÊù•ÊâßË°å SQL ÁöÑÔºåMyBatisÊèê‰æõ‰∫Ü mapper ËøôÁßç<code>‰ºòÈõÖ‰∏îÊòìÁª¥Êä§</code>ÁöÑÊñπÂºèÊù•Â∏ÆÂä©Êàë‰ª¨Êõ¥Â•ΩÂú∞Âéª‰ΩøÁî® SQL„ÄÇ</p>
<h2 id="ÂÆö‰πâ">ÂÆö‰πâ</h2>
<blockquote>
<p>mapper ÊòØ Java ÊñπÊ≥ïÂíå SQL ËØ≠Âè•‰πãÈó¥ÁöÑ<code>Ê°•Ê¢Å</code>„ÄÇ</p>
</blockquote>
<p>Java Êé•Âè£ÊñπÊ≥ï‰∏é SQL ËØ≠Âè•‰ª•Âèä mapper ‰πãÈó¥ÁöÑÂÖ≥Á≥ªÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://s2.loli.net/2021/12/25/3fQxWmEFtY5lM16.png"
	
	
	
	loading="lazy"
	
		alt="ÂõæÁâáÊèèËø∞"
	
	
></p>
<h2 id="Êñ∞Âª∫-mapper">Êñ∞Âª∫ mapper</h2>
<p>mapper Âè™ÊòØ‰∏Ä‰∏™ÊäΩË±°ÁöÑ<code>Ê¶ÇÂøµ</code>ÔºåÂÆÉÂÖ∂ÂÆûÂ∞±ÊòØ Java ÈáåÈù¢ÁöÑ‰∏Ä‰∏™Êé•Âè£Á±ªÔºåÊàë‰ª¨‰∏çÈúÄË¶ÅÂÆûÁé∞Ëøô‰∏™Êé•Âè£Á±ªÔºåMyBatis ‰ºöÈÄöËøáÂä®ÊÄÅ‰ª£ÁêÜËá™Âä®Â∏ÆÊàë‰ª¨ÊâßË°åÊé•Âè£ÊñπÊ≥ïÊâÄÂØπÂ∫îÁöÑ SQL ËØ≠Âè•„ÄÇ</p>
<p>Êé•‰∏ãÊù•ÔºåÊàë‰ª¨‰ª•<code>UserMapper</code>‰∏∫‰æãÔºåÊù•Áúã‰∏ÄÁúã mapper Á©∂Á´üÊòØÂ¶Ç‰ΩïÂÆö‰πâÂíåÁªÑÊàêÁöÑ„ÄÇ</p>
<p>È¶ñÂÖàÔºåÂú® com.ahao.mybatis ÂåÖ‰∏ãÊñ∞Âª∫ <code>mapper</code>ÂåÖÔºåÂπ∂Âú® mapper ÂåÖ‰∏ãÊñ∞Âª∫Êé•Âè£Á±ª<code>UserMapper.java</code>„ÄÇÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ahao.mybatis.mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>MyBatis Êèê‰æõ‰∫Ü<code>Ê≥®Ëß£</code>Âíå<code>XML</code>‰∏§ÁßçÊñπÂºèÊù•ËøûÊé•Êé•Âè£ÊñπÊ≥ïÂíå SQL ËØ≠Âè•„ÄÇ</p>
<h3 id="Ê≥®Ëß£ÊñπÂºè">Ê≥®Ëß£ÊñπÂºè</h3>
<p>Êàë‰ª¨‰∏∫ UserMapper Ê∑ªÂä†‰∏Ä‰∏™ÊñπÊ≥ï<code>selectUsernameById</code>ÔºåËØ•ÊñπÊ≥ïÁöÑ‰ΩúÁî®‰∏∫<strong>ÈÄöËøáÁî®Êà∑ id Êü•ËØ¢Áî®Êà∑ÂêçÁß∞</strong>ÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ahao.mybatis.mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">String</span> <span class="nf">selectUsernameById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>selectUsernameById ÊñπÊ≥ïÊé•Âèó id ÂèÇÊï∞ÔºàÁî®Êà∑ idÔºâÔºåËøîÂõûÁî®Êà∑ÂêçÁß∞ÔºàString Á±ªÂûãÔºâ„ÄÇ</p>
<p>Êúâ‰∫ÜÊñπÊ≥ïÂÆö‰πâÂêéÔºåÊàë‰ª¨ÂÜçÈÄöËøáÊ≥®Ëß£‰∏∫ËØ•ÊñπÊ≥ïÊ∑ªÂä†‰∏äÂØπÂ∫îÁöÑ SQL ËØ≠Âè•Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ahao.mybatis.mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Select</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="nd">@Select</span><span class="o">(</span><span class="s">&#34;SELECT username FROM user WHERE id = #{id}&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">  <span class="n">String</span> <span class="nf">selectUsernameById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Select</code>Ê≥®Ëß£ÂØπÂ∫î SQL ÁöÑ select Êü•ËØ¢ÔºåÊ≥®Ëß£‰∏≠ÁöÑËØ≠Âè•Â∞±ÊòØÁõ∏Â∫îÁöÑ SQL ËØ≠Âè•ÔºåÂΩìÁÑ∂ËøôÂπ∂ÈùûÁúüÂÆûÁöÑ SQL ËØ≠Âè•ÔºåÂÖ∑‰ΩìÁöÑÂ∑ÆÂºÇÊÄßÊàë‰ª¨ÂêéÁª≠Á´†ËäÇÂÜçËØ¥„ÄÇ</p>
<h3 id="xml-ÊñπÂºè">XML ÊñπÂºè</h3>
<p>XML ÊñπÂºèÊòØÊõ¥Âä†Âº∫Â§ßÂíåÊòìÁî®ÁöÑ‰∏ÄÁßçÊñπÂºèÔºåËôΩÁÑ∂ÂÆÉÊ≤°ÊúâÊ≥®Ëß£ÈÇ£‰πàÊñπ‰æøÔºå‰ΩÜÊòØÂäüËÉΩÊõ¥Âº∫„ÄÅÊõ¥ÊòìÁª¥Êä§ÔºåÊòØ MyBatis ÂÆòÊñπÊé®ËçêÁöÑ‰∏ÄÁßçÊñπÂºè„ÄÇ</p>
<p>Âú® mapper ÂåÖ‰∏≠ÔºåÊàë‰ª¨Êñ∞Âª∫Âè¶‰∏Ä‰∏™Êñá‰ª∂<code>UserMapper.xml</code>ÔºåÂπ∂Ê∑ªÂä†Â¶Ç‰∏ãÂÜÖÂÆπÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE mapper
</span></span></span><span class="line"><span class="cl"><span class="cp">  PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">  &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;mapper</span> <span class="na">namespace=</span><span class="s">&#34;com.ahao.mybatis.mapper.UserMapper&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>mapper</code> Ê†áÁ≠æÂØπÂ∫î‰∏Ä‰∏™ mapper Êé•Âè£Á±ªÔºåËøôÈáåÂ∫îËØ•ÂØπÂ∫î UserMapperÔºåÊâÄ‰ª•Âú® mapper Ê†áÁ≠æÈáåÈù¢Êàë‰ª¨ËøòÈúÄË¶ÅÂä†‰∏ä namespace Ëøô‰∏™Â±ûÊÄßÔºåÂÆÉÁöÑÂÄº‰∏∫ UserMapper ÁöÑÁ±ªÂÖ®Ë∑ØÂæÑÔºåËøôÊ†∑ UserMapper.xml ÈÖçÁΩÆÊñá‰ª∂Â∞±‰∏é UserMapper.java ÂØπÂ∫îËµ∑Êù•‰∫Ü„ÄÇ</p>
<p><strong>ÊèêÁ§∫</strong>Ôºå<strong>namespace ÂëΩÂêçÁ©∫Èó¥ÊòØÊØè‰∏Ä‰∏™ mapper Êñá‰ª∂ÊâÄÁã¨ÊúâÁöÑÔºåÂÆÉÂîØ‰∏ÄÊ†áËØÜÁùÄ‰∏Ä‰∏™ mapper</strong>„ÄÇ</p>
<blockquote>
<p><strong>Ê≥®ÊÑèÔºö</strong> Âú®ËøôÈáåÔºå.xml ÈÖçÁΩÆÊñá‰ª∂ÂøÖÈ°ª‰∏éÂÖ∂ÂØπÂ∫îÁöÑÊé•Âè£Âú®Âêå‰∏Ä‰∏™ÂåÖÂÜÖ„ÄÇ</p>
</blockquote>
<p>‰∫åËÄÖÂú®ÁõÆÂΩï‰∏≠ÁöÑ‰ΩçÁΩÆÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">src/main/java/com/ahao/mybatis/mapper
</span></span><span class="line"><span class="cl">‚îú‚îÄ‚îÄ UserMapper.java
</span></span><span class="line"><span class="cl">‚îî‚îÄ‚îÄ UserMapper.xml
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú® UserMapper Êé•Âè£‰∏≠ÔºåÊàë‰ª¨ÂÜçÊñ∞Â¢û‰∏Ä‰∏™ÊñπÊ≥ï<code>selectUserAgeById</code>ÔºåËØ•ÊñπÊ≥ïÁöÑ‰ΩúÁî®ÊòØ<strong>ÈÄöËøáÁî®Êà∑ id Êü•ËØ¢Áî®Êà∑Âπ¥ÈæÑ</strong>„ÄÇÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ahao.mybatis.mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Select</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="nd">@Select</span><span class="o">(</span><span class="s">&#34;SELECT username FROM user WHERE id = #{id}&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">  <span class="n">String</span> <span class="nf">selectUsernameById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">Integer</span> <span class="nf">selectUserAgeById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏é‰πãÂØπÂ∫îÁöÑ xml Êñá‰ª∂‰∏≠ÔºåÊàë‰ª¨‰πüÈúÄË¶ÅÊ∑ªÂä†‰∏äÂØπÂ∫îÁöÑ SQL ËØ≠Âè•„ÄÇÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE mapper
</span></span></span><span class="line"><span class="cl"><span class="cp">  PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">  &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;mapper</span> <span class="na">namespace=</span><span class="s">&#34;com.ahao.mybatis.mapper.UserMapper&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&#34;selectUserAgeById&#34;</span> <span class="na">resultType=</span><span class="s">&#34;java.lang.Integer&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    SELECT age FROM user WHERE id = #{id}
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/select&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú® mapper Ê†áÁ≠æ‰∏≠ÔºåÊàë‰ª¨Êñ∞Â¢û‰∫Ü select Ê†áÁ≠æÔºåÂØπÂ∫î SQL ‰∏≠ÁöÑ select Êü•ËØ¢Ôºõselect Ê†áÁ≠æ‰∏≠Êúâ‰∏§‰∏™ÂøÖÂ°´Â±ûÊÄßÔºåÁ¨¨‰∏Ä‰∏™ÊòØ id ÔºåÂÆÉÂØπÂ∫îÊé•Âè£ÁöÑÊñπÊ≥ïÂêçÔºåÂç≥ selectUserAgeByIdÔºåÈÄöËøáÂÆÉ MyBatis ÊâçËÉΩÂ∞Ü‰∫åËÄÖÂØπÂ∫îËµ∑Êù•ÔºåÁ¨¨‰∫å‰∏™ÊòØ resultTypeÔºåÂÆÉÂØπÂ∫î SQL ËØ≠Âè•ÁöÑËøîÂõûÁ±ªÂûãÔºå‰∏éÊé•Âè£ÊñπÊ≥ïÁöÑËøîÂõûÂÄºÁõ∏ÂêåÔºå‰∏∫ Integer Á±ªÂûã„ÄÇ</p>
<p>Â•Ω‰∫ÜÔºåÊ≥®Ëß£Âíå XML ÁöÑ‰∏§ÁßçÊñπÂºèÁöÑÁÆÄÂçï‰ΩøÁî®Â∑≤Áªè‰ªãÁªçÂÆåÊØï‰∫ÜÔºåËøôÈáå‰ªçÁÑ∂Êúâ‰∏Ä‰∏™ÂèØ‰ª•ÂÆåÂñÑÁöÑÁÇπÔºåÊàë‰ª¨ÂèØ‰ª•‰∏∫ UserMapper Á±ªÊâì‰∏ä‰∏Ä‰∏™ <code>Mapper</code>Ê≥®Ëß£ÔºåËôΩÁÑ∂Ëøô‰∏™Ê≥®Ëß£Âπ∂‰∏çÊòØÂøÖÈ°ªÁöÑÔºå‰ΩÜÊòØÂ¢ûÂº∫‰∫Ü‰ª£Á†ÅÁöÑÂèØËØªÊÄß„ÄÇÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// ÁúÅÁï•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@Mapper</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ÁúÅÁï•ÂÖ∂ÂÆÉËØ∏Â§ö‰ª£Á†Å
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="‰ΩøÁî®-mapper">‰ΩøÁî® mapper</h2>
<p>mapper ÂÆö‰πâÂ•Ω‰ª•ÂêéÔºåÊàë‰ª¨Êé•‰∏ãÊù•‰ºö‰ªãÁªçÂ¶Ç‰Ωï‰ΩøÁî®ÂÆÉ„ÄÇÂú®‰∏ä‰∏ÄËäÇ‰∏≠ÔºåÊàë‰ª¨‰ªãÁªç‰∫Ü MyBatis ÈÖçÁΩÆÂºèÁöÑÁÆÄÂçï‰ΩøÁî®ÔºåÈÇ£‰πà‰ΩøÁî® mapper ÂÖ∂ÂÆûÂæàÁÆÄÂçïÔºåÂè™ÈúÄÂú®ÈÖçÁΩÆÂºè‰ΩøÁî®ÁöÑÂü∫Á°Ä‰∏äÂ¢ûÂä†Âá†Â§ÑÈÖçÁΩÆÂíå‰ª£Á†ÅÂ∞±Ë°å‰∫Ü„ÄÇ</p>
<h3 id="mapper-ÈÖçÁΩÆ">mapper ÈÖçÁΩÆ</h3>
<p>È¶ñÂÖàÔºåÊàë‰ª¨ÈúÄË¶ÅÂú® mybatis-config.xml ÈÖçÁΩÆÊñá‰ª∂‰∏≠Ê∑ªÂä†‰∏äÂØπÂ∫îÁöÑ mapper ÈÖçÁΩÆÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE configuration
</span></span></span><span class="line"><span class="cl"><span class="cp">  PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">  &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;environments</span> <span class="na">default=</span><span class="s">&#34;development&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;environment</span> <span class="na">id=</span><span class="s">&#34;development&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;transactionManager</span> <span class="na">type=</span><span class="s">&#34;JDBC&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;dataSource</span> <span class="na">type=</span><span class="s">&#34;POOLED&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;driver&#34;</span> <span class="na">value=</span><span class="s">&#34;com.mysql.cj.jdbc.Driver&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;url&#34;</span> <span class="na">value=</span><span class="s">&#34;jdbc:mysql://localhost:3306/mybatisdemo?useSSL=false&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;username&#34;</span> <span class="na">value=</span><span class="s">&#34;root&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;password&#34;</span> <span class="na">value=</span><span class="s">&#34;123456&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;/dataSource&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/environment&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/environments&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="c">&lt;!--  mapper ÂØπÂ∫îÁöÑÈÖçÁΩÆ  --&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;mappers&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;mapper</span> <span class="na">class=</span><span class="s">&#34;com.ahao.mybatis.mapper.UserMapper&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/mappers&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê≥®ÊÑèÔºåmapper ÂèØ‰ª•ÊúâÂ§ö‰∏™ÔºåÂØπÂ∫îÁöÑÊ†áÁ≠æÈ°πÂ∫îÊòØ mappersÔºåÂú® mappers ‰∏ãÈù¢ÊâçÊúâ‰∏Ä‰∏™‰∏™ÁöÑ mapperÔºåÂ¶Ç‰∏äÈù¢ÁöÑ UserMapperÔºõÈÄöËøámapper Ê†áÁ≠æ‰∏≠ÁöÑ class Â±ûÊÄßÔºåÊàë‰ª¨ÊåáÂÆöÂÖ∂ÂØπÂ∫îÁöÑÊé•Âè£Á±ªÔºåclass Â±ûÊÄßÂÄº‰∏∫ UserMapper ÁöÑÁ±ªÂÖ®Ë∑ØÂæÑ„ÄÇ</p>
<h3 id="‰ª£Á†ÅË∞ÉÁî®">‰ª£Á†ÅË∞ÉÁî®</h3>
<p>Êúâ‰∫ÜÈÖçÁΩÆ‰ª•ÂêéÔºåÊàë‰ª¨ÂàôÂèØ‰ª•Âú®‰ª£Á†Å‰∏≠Ë∞ÉÁî® mapper ÊñπÊ≥ï‰ªéËÄåÊâßË°å SQL ÂæóÂà∞ÁªìÊûú‰∫Ü„ÄÇÂú® pattern ÂåÖ‰∏ãÔºåÊàë‰ª¨Êñ∞Âª∫‰∏Ä‰∏™Êñá‰ª∂ÔºåÂêç‰∏∫<code>StartWithMapper.java</code>ÔºåÂπ∂ÂêëÂÖ∂‰∏≠Ê∑ªÂä†Â¶Ç‰∏ã‰ª£Á†ÅÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ahao.mybatis.pattern</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.ahao.mybatis.mapper.UserMapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.io.Resources</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.session.SqlSession</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.session.SqlSessionFactory</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.session.SqlSessionFactoryBuilder</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.io.InputStream</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@SuppressWarnings</span><span class="o">({</span><span class="s">&#34;Duplicates&#34;</span><span class="o">})</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StartWithMapper</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">SQLException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">String</span> <span class="n">resource</span> <span class="o">=</span> <span class="s">&#34;mybatis-config.xml&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">InputStream</span> <span class="n">inputStream</span> <span class="o">=</span> <span class="n">Resources</span><span class="o">.</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="n">resource</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">SqlSessionFactory</span> <span class="n">sqlSessionFactory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SqlSessionFactoryBuilder</span><span class="o">().</span><span class="na">build</span><span class="o">(</span><span class="n">inputStream</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">SqlSession</span> <span class="n">session</span> <span class="o">=</span> <span class="n">sqlSessionFactory</span><span class="o">.</span><span class="na">openSession</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂæóÂà∞ mapper
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">UserMapper</span> <span class="n">mapper</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">getMapper</span><span class="o">(</span><span class="n">UserMapper</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Ë∞ÉÁî®Ê≥®Ëß£ÁöÑSQL
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">String</span> <span class="n">username</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="na">selectUsernameById</span><span class="o">(</span><span class="n">1</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;username: &#34;</span> <span class="o">+</span> <span class="n">username</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Ë∞ÉÁî®XMLÁöÑSQL
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Integer</span> <span class="n">age</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="na">selectUserAgeById</span><span class="o">(</span><span class="n">1</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;age: &#34;</span> <span class="o">+</span> <span class="n">age</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂÖ≥Èó≠‰ºöËØù
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">session</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ΩøÁî®ÊµÅÁ®ãÊàë‰ª¨Â∑≤ÁªèÂÜôÂú®‰∫Ü‰ª£Á†ÅÊ≥®Èáä‰∏≠‰∫ÜÔºåËØ∑Âä°ÂøÖÈòÖËØª‰∏Ä‰∏ã„ÄÇ</p>
<p>‰∏é‰∏ä‰∏ÄËäÇÁöÑÂå∫Âà´Âú®‰∫éÔºåÊàë‰ª¨‰∏çÂÜçÈÄöËøá session ÂæóÂà∞ËøûÊé•‰ªéËÄåÊâßË°å SQL ‰∫ÜÔºåËÄåÊòØÂú® session ‰∏≠ÂæóÂà∞ÈÖçÁΩÆÂ•ΩÁöÑ UserMapperÔºåÂÜçÈÄöËøáË∞ÉÁî®UserMapper ÁöÑÊñπÊ≥ïÊâßË°å SQL ‰ªéËÄåÂæóÂà∞ÁªìÊûú„ÄÇ</p>
<p>ÊâßË°åËøôÊÆµ‰ª£Á†ÅÔºåÂÆÉ‰ºöÂú®ÊéßÂà∂Âè∞‰∏äÊâìÂç∞Â¶Ç‰∏ã‰ø°ÊÅØÔºàÊà™Âèñ‰∫ÜÈÉ®ÂàÜÈáçË¶Å‰ø°ÊÅØÔºâÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">13:13:50.104 [main] DEBUG com.ahao.mybatis.mapper.UserMapper.selectUsernameById - ==&gt;  Preparing: SELECT username FROM user WHERE id = ? 
</span></span><span class="line"><span class="cl">13:13:50.205 [main] DEBUG com.ahao.mybatis.mapper.UserMapper.selectUsernameById - ==&gt; Parameters: 1(Integer)
</span></span><span class="line"><span class="cl">13:13:50.344 [main] DEBUG com.ahao.mybatis.mapper.UserMapper.selectUsernameById - &lt;==      Total: 1
</span></span><span class="line"><span class="cl">username: peter
</span></span><span class="line"><span class="cl">13:13:50.351 [main] DEBUG com.ahao.mybatis.mapper.UserMapper.selectUserAgeById - ==&gt;  Preparing: SELECT age FROM user WHERE id = ? 
</span></span><span class="line"><span class="cl">13:13:50.351 [main] DEBUG com.ahao.mybatis.mapper.UserMapper.selectUserAgeById - ==&gt; Parameters: 1(Integer)
</span></span><span class="line"><span class="cl">13:13:50.354 [main] DEBUG com.ahao.mybatis.mapper.UserMapper.selectUserAgeById - &lt;==      Total: 1
</span></span><span class="line"><span class="cl">age: 18
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÊÄªÁªì">ÊÄªÁªì</h3>
<p>‰ªéÁ®ãÂ∫èËæìÂá∫ÁöÑ‰ø°ÊÅØ‰∏≠ÂèØ‰ª•ÁúãÂá∫ÔºåUserMapper ÁöÑË∞ÉÁî®ÈÉΩÊàêÂäü‰∫ÜÔºå ÁªìÂêà‰∏ä‰∏ÄÂ∞èËäÇ‰∏≠ JDBC ÁöÑ‰ΩøÁî®ÔºåÂèØ‰ª•Ê∏ÖÊô∞Âú∞ÊÑüÂèóÂà∞ MyBatis ÂÆåÁæéÁöÑÂ∞Ü Java ÂØπË±°‰∏é SQL ËØ≠Âè•ÂàÜÁ¶ªÔºåÂπ∂ÈÄöËøá mapper ÂÖÖÂΩì‰∫åËÄÖÁöÑÊ°•Ê¢ÅÔºåÊûÅÂ§ßÁöÑÊèêÂçá‰∫Ü‰ª£Á†ÅÂíå SQL ËØ≠Âè•ÁöÑÁª¥Êä§ÊÄß„ÄÇ</p>
<p>‰∏çÂêå‰∫éÂéüÁîü JDBC ÁöÑ‰ΩøÁî®ÊñπÂºèÔºåMyBatis ‰ºöËá™Âä®ÁöÑÈÄöËøá resultType Á≠âÈÖçÁΩÆÊù•Â∏ÆÊàë‰ª¨ÂÆûÁé∞Êï∞ÊçÆÂ∫ìÁ±ªÂûãÂà∞ Java Á±ªÂûãÁöÑËΩ¨Êç¢ÔºåÂ∏ÆÊàë‰ª¨ËäÇÁúÅ‰∫ÜÂ§ßÈáèÁöÑÂ∑•‰ΩúÔºåÂΩìÁÑ∂ MyBatis ÁöÑÂäüËÉΩËøú‰∏çÊ≠¢Â¶ÇÊ≠§ÔºåÊàë‰ª¨Â∞ÜÂú®ÂêéÁª≠ÁöÑÂ∞èËäÇ‰∏≠‰∏Ä‰∏ÄÊè≠Êôì„ÄÇ</p>
<h2 id="Â∞èÁªì-2">Â∞èÁªì</h2>
<ul>
<li>mapper ÊòØ MyBatis ÁöÑÊ†∏ÂøÉÊ¶ÇÂøµÔºåÊòØ MyBatis <code>Ëß£ËÄ¶</code> Java ÂØπË±°‰∏é SQL ËØ≠Âè•ÁöÑÊ°•Ê¢Å„ÄÇ</li>
<li>MyBatis ÂÆòÊñπÊñáÊ°£‰∏≠ÊòéÁ°Æ<code>Âº∫Ë∞É</code>Ê≥®Ëß£ÊñπÂºè SQL Êó†Ê≥ïÂèëÊå• MyBatis ÁöÑÂÖ®ÈÉ®ÂäüËÉΩÔºå‰ΩÜÊòØÂèØ‰ª•Êñπ‰æøÂú∞ÊºîÁ§∫‰∏Ä‰∫õ demo„ÄÇ</li>
<li>Â¶ÇÊûúÂçïÁã¨‰ΩøÁî® MyBatisÔºåÈÇ£‰πà mapper Êé•Âè£ÂøÖÈ°ªÂíå .xml ÈÖçÁΩÆÊñá‰ª∂Âú®Âêå‰∏Ä‰∏™ÂåÖ‰∏≠Ôºå‰ΩÜÊòØÂ¶ÇÊûú‰ΩøÁî® spring Á≠âÂ∑•ÂÖ∑Â∞±ÂèØ‰ª•‰∏çÂøÖÂèóÊ≠§ÈôêÂà∂„ÄÇ</li>
</ul>
<h1 id="mybatis-select">MyBatis select</h1>
<h2 id="ÂâçË®Ä-3">ÂâçË®Ä</h2>
<p>Êú¨Â∞èËäÇÔºåÊàë‰ª¨Â∞Ü‰∏ÄËµ∑Â≠¶‰π† MyBatis select„ÄÇ</p>
<p>Âú® MyBatis ‰∏≠Ôºåselect Ê†áÁ≠æÂØπÂ∫î‰∫é SQL ËØ≠Âè•‰∏≠ÁöÑ select Êü•ËØ¢ÔºåÊàë‰ª¨‰ºöÂú® select Ê†áÁ≠æ‰∏≠Â°´ÂÖÖ SQL Êü•ËØ¢ËØ≠Âè•ÔºåÁÑ∂ÂêéÂú®‰ª£Á†Å‰∏≠ÈÄöËøáÂØπÂ∫îÊé•Âè£ÊñπÊ≥ïÊù•Ë∞ÉÁî®„ÄÇ</p>
<h2 id="ÂÆö‰πâ-1">ÂÆö‰πâ</h2>
<blockquote>
<p>select Ê†áÁ≠æÁî®‰∫éÊò†Â∞Ñ SQL ‰∏≠ÁöÑ<code>Êü•ËØ¢</code>ËØ≠Âè•</p>
</blockquote>
<h2 id="ÂÆû‰æã">ÂÆû‰æã</h2>
<p>MyBatis select ÂèØÂàÜ‰∏∫<code>xml</code>Âíå<code>Ê≥®Ëß£</code>‰∏§Áßç‰ΩøÁî®ÊñπÂºè„ÄÇ</p>
<h3 id="xml-ÂÆû‰æã">xml ÂÆû‰æã</h3>
<p>Â∞Ü select Êü•ËØ¢ÂÜôÂú® mapper.xml Êñá‰ª∂‰∏≠ÔºåÊØîÂ¶ÇÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE mapper
</span></span></span><span class="line"><span class="cl"><span class="cp">  PUBLIC &#34;-//mybatis.org//DTD Mapper 3.0//EN&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">  &#34;http://mybatis.org/dtd/mybatis-3-mapper.dtd&#34;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;mapper</span> <span class="na">namespace=</span><span class="s">&#34;com.ahao.mybatis.mapper.UserMapper&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&#34;selectUserAgeById&#34;</span> <span class="na">parameterType=</span><span class="s">&#34;java.lang.Integer&#34;</span> <span class="na">resultType=</span><span class="s">&#34;java.lang.Integer&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    SELECT age FROM user WHERE id = #{id}
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/select&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/mapper&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÖ∂‰∏≠Âêç‰∏∫ selectUserAgeById ÁöÑ select Ê†áÁ≠æ(‰∏ÄËà¨‰ª• id ÂÅö‰∏∫ÂêçÁß∞)ÔºåÊé•Êî∂ Integer Á±ªÂûãÁöÑÂèÇÊï∞ÔºàparameterTypeÔºâÔºåÂπ∂ËøîÂõû Integer Á±ªÂûãÁöÑÁªìÊûúÔºàresultTypeÔºâÔºõÂÜçÁúã select Ê†áÁ≠æ‰∏≠ÁöÑÊü•ËØ¢ËØ≠Âè•ÔºåÊé•Êî∂ id ÂèÇÊï∞ÔºåÁ±ªÂûã‰∏∫ intÔºåËøîÂõû ageÔºåÁ±ªÂûã‰∏∫ intÔºå‰∫åËÄÖ‰∏Ä‰∏ÄÂØπÂ∫î„ÄÇ</p>
<h3 id="ÂèÇÊï∞Á¨¶Âè∑">ÂèÇÊï∞Á¨¶Âè∑</h3>
<p>Ê≥®ÊÑèÔºåÂú® select Ê†áÁ≠æ‰∏≠ÁöÑ SQL ËØ≠Âè•Âá†‰πé‰∏éÁúüÂÆûÁöÑ SQL ËØ≠Âè•‰∏ÄËá¥Ôºå‰ΩÜÂÆÉÁöÑÂèÇÊï∞Á¨¶Âè∑Á®çÊúâ‰∏çÂêåÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1">#{id}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëã•‰ª• <code>#{}</code>‰Ωú‰∏∫ÂèÇÊï∞Á¨¶Âè∑ÔºåMyBatis Âàô‰ºöÂàõÂª∫‰∏Ä‰∏™È¢ÑÂ§ÑÁêÜËØ≠Âè•ÔºàPreparedStatementÔºâÔºåÂÆÉ‰ºöË¢´Â§ÑÁêÜÊàê<code>?</code>„ÄÇÂ¶ÇÊûú‰Ω†‰∏çÂ∏åÊúõ‰ΩøÁî®È¢ÑÂ§ÑÁêÜÔºåÈÇ£‰πàÂèØ‰ª•‰ΩøÁî®<code>${}</code>ÂèÇÊï∞Á¨¶Âè∑ÔºåMyBatis ‰ºöÂ∞ÜÂÖ∂‰ª•Â≠óÁ¨¶‰∏≤ÁöÑÂΩ¢ÂºèËøõË°åÊãºÊé•Ôºå‰∏çËøáÊàë‰ª¨Êé®Ëçê‰Ω†‰ΩøÁî® <code>#{}</code>ÔºåÂá†‰πéÊâÄÊúâ‰∫∫‰πüÈÉΩËøôÊ†∑ÂÅö„ÄÇ</p>
<h3 id="Ê≥®Ëß£ÂÆû‰æã">Ê≥®Ëß£ÂÆû‰æã</h3>
<p>Â∞Ü SQL ËØ≠Âè•ÂÜôÂú®Ê≥®Ëß£‰∏≠ÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Select</span><span class="o">(</span><span class="s">&#34;SELECT username FROM user WHERE id = #{id}&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="n">String</span> <span class="nf">selectUsernameById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê≥®Ëß£‰∏≠ÁöÑ select ËØ≠Âè•Êó†ÈúÄÂÜçÊ∑ªÂä† id„ÄÅparameterType Á≠âÂ±ûÊÄßÔºåÂè™ÈúÄÂÜô‰∏äÂØπÂ∫îÁöÑ SQL ËØ≠Âè•ÔºåMyBatis ‰ºöËá™Âä®Ê†πÊçÆÂÖ∂‰øÆÈ•∞ÁöÑÊñπÊ≥ïÊù•Êé®Êñ≠Âá∫Ëøô‰∫õÂèÇÊï∞„ÄÇ</p>
<blockquote>
<p><strong>TIPSÔºö</strong> ‰ΩøÁî®Ê≥®Ëß£Êù•‰π¶ÂÜô MyBatis Áõ∏ÂØπ‰ºöÊñπ‰æø‰∏Ä‰∫õÔºå‰ΩÜÊòØÊ≥®Ëß£Êó†Ê≥ïÂèëÊå• MyBatis Âä®ÊÄÅ SQL ÁúüÊ≠£ÁöÑÂ®ÅÂäõÔºåÂõ†Ê≠§Â§ßÈÉ®ÂàÜ‰∫∫ÈÉΩËøòÊòØ‰ºöÈÄâÊã© xml ÁöÑÊñπÂºèÊù•‰π¶ÂÜô SQLÔºå‰ΩÜÊòØÂØπ‰∫é‰∏Ä‰∫õ demo ÁöÑÂ±ïÁ§∫ÔºåÊ≥®Ëß£Êó†ÁñëÂÆπÊòì‰∏äÊâã‰∏Ä‰∫õ„ÄÇÂú®ÂêéÈù¢ÁöÑÂ≠¶‰π†‰∏≠ÔºåÊàë‰ª¨ÈÉΩ‰ºö‰ªãÁªçÂà∞Ê≥®Ëß£ÁöÑ‰ΩøÁî®Ôºå‰ΩÜÊòØÂú®ÂÆûË∑µ‰∏≠Êàë‰ª¨ÈªòËÆ§‰ΩøÁî® xml ÊñπÂºè„ÄÇ</p>
</blockquote>
<h2 id="select-Â±ûÊÄß">select Â±ûÊÄß</h2>
<p>select Ê†áÁ≠æÊîØÊåÅÂæàÂ§öÂ±ûÊÄßÊù•ÊîπÂèòÊü•ËØ¢ËØ≠Âè•ÁöÑË°å‰∏∫„ÄÇ</p>
<p>Êàë‰ª¨ÊëòÂèñÂÖ∂‰∏≠Â∏∏ËßÅ‰∏îÈáçË¶ÅÁöÑÂ±ûÊÄßÔºåÂ¶Ç‰∏ãË°®ÊâÄÁ§∫Ôºö</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th style="text-align:left">Â±ûÊÄß</th>
<th style="text-align:left">ÊèèËø∞</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">Âú®ÂëΩÂêçÁ©∫Èó¥‰∏≠ÂîØ‰∏ÄÁöÑÊ†áËØÜÁ¨¶</td>
</tr>
<tr>
<td style="text-align:left">parameterType</td>
<td style="text-align:left">ËØ≠Âè•ÁöÑÂèÇÊï∞Á±ªÂûãÔºåÈªòËÆ§ÂèØÈÄâÔºåMyBatis ‰ºöËá™Âä®Êé®Êñ≠</td>
</tr>
<tr>
<td style="text-align:left">resultType</td>
<td style="text-align:left">ËØ≠Âè•ËøîÂõûÂÄºÁ±ªÂûãÔºåÂ¶ÇÊûúËøîÂõûÁöÑÊòØÈõÜÂêàÔºåÈÇ£Â∫îËØ•ËÆæÁΩÆ‰∏∫ÈõÜÂêàÂåÖÂê´ÁöÑÁ±ªÂûã</td>
</tr>
<tr>
<td style="text-align:left">resultMap</td>
<td style="text-align:left">ËØ≠Âè•ËøîÂõûÊò†Â∞ÑÁöÑ idÔºõÂèØ‰ª•‰ΩøÁî® resultType Êàñ resultMapÔºå‰ΩÜ‰∏çËÉΩÂêåÊó∂‰ΩøÁî®„ÄÇ</td>
</tr>
<tr>
<td style="text-align:left">flushCache</td>
<td style="text-align:left">ËÆæÁΩÆ‰∏∫ true ÂêéÔºåÂè™Ë¶ÅËØ≠Âè•Ë¢´Ë∞ÉÁî®ÔºåÈÉΩ‰ºöÂØºËá¥Êú¨Âú∞ÁºìÂ≠òÂíå‰∫åÁ∫ßÁºìÂ≠òË¢´Ê∏ÖÁ©∫ÔºåÈªòËÆ§‰∏∫ false</td>
</tr>
<tr>
<td style="text-align:left">useCache</td>
<td style="text-align:left">ËÆæÁΩÆ‰∏∫ true ÂêéÔºåÊú¨Êù°ËØ≠Âè•ÁöÑÊü•ËØ¢ÁªìÊûúË¢´‰∫åÁ∫ßÁºìÂ≠òÁºìÂ≠òËµ∑Êù•ÔºåÈªòËÆ§ select Ê†áÁ≠æ‰∏∫ true„ÄÇ</td>
</tr>
<tr>
<td style="text-align:left">timeout</td>
<td style="text-align:left">ËÆæÁΩÆË∂ÖÊó∂Êó∂Èó¥</td>
</tr>
<tr>
<td style="text-align:left">fetchSize</td>
<td style="text-align:left">ËÆæÁΩÆÈ¢ÑÊúüËøîÂõûÁöÑËÆ∞ÂΩïÊï∞Èáè</td>
</tr>
<tr>
<td style="text-align:left">statementType</td>
<td style="text-align:left">STATEMENTÔºåPREPARED Êàñ CALLABLE ‰∏≠ÁöÑ‰∏Ä‰∏™ÔºåÈªòËÆ§‰∏∫ PREPAREDÔºàÈ¢ÑÂ§ÑÁêÜÔºâ</td>
</tr>
</tbody>
</table></div>
<h2 id="ÂèÇÊï∞">ÂèÇÊï∞</h2>
<p>Âú®‰∏äÈù¢ÁöÑÂÆû‰æã‰∏≠ÔºåÊàë‰ª¨‰ªãÁªç‰∫Ü<code>#{id}</code>ÂèÇÊï∞ÔºåËøôÊòØÂèÇÊï∞ÁöÑÊúÄÁÆÄÂçïÊÉÖÂÜµÔºåÂØπ‰∫éÂ§çÊùÇÊÉÖÂÜµÔºåÂèÇÊï∞ËøòÊúâÂÖ∂ÂÆÉÊõ¥Â§öÁöÑÂ¶ôÁî®„ÄÇ</p>
<h3 id="ÂØπË±°ÂèÇÊï∞">ÂØπË±°ÂèÇÊï∞</h3>
<p>ÊúâÊó∂ÂÄôÔºåÂèÇÊï∞ÂèØ‰ª•ÊòØ‰∏Ä‰∏™Â§çÊùÇÁöÑÂØπË±°ÔºåÂ¶Ç Java ‰∏≠ÁöÑ‰∏Ä‰∏™ User Á±ª„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&#34;selectUserByAgeAndScore&#34;</span> <span class="na">parameterType=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="na">resultType=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  SELECT * FROM user WHERE age = #{age} AND score = #{score}
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>selectUserByAgeAndScore Êü•ËØ¢ÁöÑÂèÇÊï∞ÊòØ‰∏Ä‰∏™Â§çÊùÇ Java ÂØπË±° UserÔºåÂΩì User ‰Ωú‰∏∫ÂèÇÊï∞ÂØπË±°Êó∂ÔºåUser ‰∏≠ÁöÑÂ±ûÊÄßÈÉΩÂèØ‰Ωú‰∏∫Êü•ËØ¢ËØ≠Âè•ÁöÑÂèÇÊï∞ÔºåÂ¶Ç age Âíå score„ÄÇ</p>
<h3 id="ÂèÇÊï∞ÈÖçÁΩÆ">ÂèÇÊï∞ÈÖçÁΩÆ</h3>
<p><code>#{}</code>‰∏ç‰ªÖÂèØ‰ª•‰º†ÂÖ•ÂèÇÊï∞ÂêçÁß∞ÔºåËøòÂèØ‰ª•‰º†ÂÖ•ÂèÇÊï∞Á±ªÂûãÂíåÁ±ªÂûãÂ§ÑÁêÜÂô®„ÄÇ</p>
<p>ÊØîÂ¶ÇÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1">#{age,javaType=int,jdbcType=int,typeHandler=IntegerTypeHandler}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÖ∂‰∏≠ javaType Ë°®Á§∫ age ÁöÑ Java Á±ªÂûãÔºåjdbcType Ë°®Á§∫ age ÁöÑÊï∞ÊçÆÂ∫ìÁ±ªÂûãÔºåtypeHandler Ë°®Á§∫ age ÁöÑÁ±ªÂûãÂ§ÑÁêÜÂô®ÔºåÂÖ≥‰∫éÁ±ªÂûãÂ§ÑÁêÜÂô®Êàë‰ª¨Â∞ÜÂú®ÂêéÈù¢ÁöÑÁ´†ËäÇ‰ªãÁªç„ÄÇ</p>
<p>ÂØπ‰∫éÂèÇÊï∞ÈÖçÁΩÆÔºå90% ÁöÑÊÉÖÂÜµ‰Ω†ÈÉΩÂè™ÈúÄË¶Å‰º†ÂÖ•ÂèÇÊï∞ÂêçÂç≥ÂèØÔºåÂõ†‰∏∫ MyBatis ÈÉΩ‰ºöËá™Âä®Êé®Êñ≠Âá∫ÈÖçÁΩÆ„ÄÇ</p>
<h2 id="ÂÆûË∑µ">ÂÆûË∑µ</h2>
<p>‰ªãÁªç‰∫ÜËøô‰πàÂ§öÊ¶ÇÂøµÔºåÊàë‰ª¨‰∏ÄËµ∑Êù•ÂÆûÊìçÂ∑©Âõ∫‰∏Ä‰∏ã„ÄÇ</p>
<h3 id="‰æã1-ÈÄöËøáÂπ¥ÈæÑÂíåÂàÜÊï∞Êü•ËØ¢Áî®Êà∑">‰æã1. ÈÄöËøáÂπ¥ÈæÑÂíåÂàÜÊï∞Êü•ËØ¢Áî®Êà∑</h3>
<p>ËØ∑‰ΩøÁî® MyBatis ÂÆåÊàêÂú® user Ë°®‰∏≠ÈÄöËøá<code>Âπ¥ÈæÑ</code>Âíå<code>ÂàÜÊï∞</code>Êü•ËØ¢Áî®Êà∑ÁöÑÂäüËÉΩ„ÄÇ</p>
<p><strong>ÂàÜÊûêÔºö</strong></p>
<p>ÊåâÁÖß MyBatis ÁöÑÂºÄÂèëÊ®°ÂºèÔºåÂÖàÂú®ÂØπÂ∫î UserMapper.xml Êñá‰ª∂‰∏≠Ê∑ªÂä†ÈÄöËøáÂπ¥ÈæÑÂíåÂàÜÊï∞Êü•ËØ¢Áî®Êà∑ÁöÑ select Ê†áÁ≠æÔºåÁÑ∂ÂêéÂú® UserMapper.java ‰∏≠Â¢ûÂä†‰∏äÂØπÂ∫îÁöÑÊñπÊ≥ïÂç≥ÂèØ„ÄÇ</p>
<p><strong>Ê≠•È™§Ôºö</strong></p>
<p>È¶ñÂÖàÔºåÊàë‰ª¨Âú® com.ahao.mybatis ÂåÖ‰∏ãÊñ∞Âª∫ model ÂåÖÔºåÁî®‰∫é‰øùÂ≠òÊï∞ÊçÆÂ∫ìÂØπË±°ÔºåÂπ∂Âú® model ÂåÖ‰∏ãÊñ∞Âª∫ User.java Á±ªÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ahao.mybatis.model</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">User</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">private</span> <span class="n">Long</span> <span class="n">id</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">private</span> <span class="n">String</span> <span class="n">username</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">private</span> <span class="n">Integer</span> <span class="n">age</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">private</span> <span class="n">Integer</span> <span class="n">score</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ÁúÅÁï•‰∫Ü getter Âíå setter ÊñπÊ≥ïÔºåËØ∑Âä°ÂøÖÈÄöËøá IDE ÁîüÊàêÔºåÂê¶Âàô MyBatis Êó†Ê≥ïËá™Âä®Êò†Â∞Ñ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú® UserMapper.xml Êñá‰ª∂‰∏≠ÔºåÊàë‰ª¨Êñ∞Â¢û selectUserByAgeAndScore Ê†áÁ≠æÔºåËØ• select Ê†áÁ≠æÁöÑ‰ΩúÁî®ÊòØÔºöÈÄöËøáÂπ¥ÈæÑÂíåÂàÜÊï∞Êü•ËØ¢Áî®Êà∑„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&#34;selectUserByAgeAndScore&#34;</span> <span class="na">parameterType=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="na">resultType=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  SELECT * FROM user WHERE age = #{age} AND score = #{score}
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ÂêéÂú® UserMapper.java Êé•Âè£‰∏≠ÔºåÊàë‰ª¨Êñ∞Â¢ûÂØπÂ∫îÁöÑÊñπÊ≥ïÔºåÊñπÊ≥ïÊé•Êî∂Â§çÊùÇÂèÇÊï∞ UserÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ahao.mybatis.mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.ahao.mybatis.model.User</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@Mapper</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">User</span> <span class="nf">selectUserByAgeAndScore</span><span class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÁªìÊûúÔºö</strong></p>
<p>ÈÄöËøáÂ¶Ç‰∏ã‰ª£Á†ÅÔºåÊàë‰ª¨ËøêË°å selectUserByAgeAndScore ÊñπÊ≥ï„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ahao.mybatis.pattern</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.ahao.mybatis.entity.User</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.ahao.mybatis.mapper.UserMapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.io.Resources</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.session.SqlSession</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.session.SqlSessionFactory</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.session.SqlSessionFactoryBuilder</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.io.InputStream</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@SuppressWarnings</span><span class="o">({</span><span class="s">&#34;Duplicates&#34;</span><span class="o">})</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Test</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">SQLException</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">resource</span> <span class="o">=</span> <span class="s">&#34;mybatis-config.xml&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">InputStream</span> <span class="n">inputStream</span> <span class="o">=</span> <span class="n">Resources</span><span class="o">.</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="n">resource</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">SqlSessionFactory</span> <span class="n">sqlSessionFactory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SqlSessionFactoryBuilder</span><span class="o">().</span><span class="na">build</span><span class="o">(</span><span class="n">inputStream</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">SqlSession</span> <span class="n">session</span> <span class="o">=</span> <span class="n">sqlSessionFactory</span><span class="o">.</span><span class="na">openSession</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ÂæóÂà∞ mapper
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">UserMapper</span> <span class="n">userMapper</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">getMapper</span><span class="o">(</span><span class="n">UserMapper</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">User</span> <span class="n">condition</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">condition</span><span class="o">.</span><span class="na">setAge</span><span class="o">(</span><span class="n">18</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">condition</span><span class="o">.</span><span class="na">setScore</span><span class="o">(</span><span class="n">100</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Ë∞ÉÁî®ÊñπÊ≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectUserByAgeAndScore</span><span class="o">(</span><span class="n">condition</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ÂæóÂà∞ user
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËæìÂá∫ÁªìÊûú‰∏∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">User{id=1, username=&#39;peter&#39;, age=18, score=100}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="Â∞èÁªì-3">Â∞èÁªì</h2>
<ul>
<li>MyBatis ËôΩÁÑ∂Êèê‰æõ‰∫Ü <code>#{}</code>Âíå<code>${}</code>‰∏§ÁßçÊñπÂºèÊù•‰º†ÈÄíÂèÇÊï∞Ôºå‰ΩÜÊó†Áñë<code>#{}</code>Êõ¥Âä†ÂÆûÁî®„ÄÇ</li>
<li>select Ê†áÁ≠æÂ±ûÊÄßËôΩÁÑ∂Â§öÔºå‰ΩÜÊòØÂ§ßÈÉ®ÂàÜÊÉÖÂÜµ‰∏ãÈÉΩ‰∏ç‰ºöÈíàÂØπÊüê‰∏Ä‰∏™ select Ê†áÁ≠æÊù•ÂÆöÂà∂ÂåñÔºåÂ§ö‰ºöÂú®ÂÖ®Â±ÄÈáåËøõË°åÈÖçÁΩÆ„ÄÇ</li>
<li>‰∫íËÅîÁΩëÁöÑÂ∫îÁî®Âú∫ÊôØÂ§öÊï∞‰∏∫ËØªÂ§öÂÜôÂ∞ëÔºåÈÇ£‰πà select ËÇØÂÆöÊòØ‰ΩøÁî®<code>ÊúÄ‰∏∫ÂπøÊ≥õ</code>ÁöÑÊ†áÁ≠æ‰∫Ü„ÄÇ</li>
</ul>
<h1 id="mybatis-resultmap-‰∏é-sql">MyBatis resultMap ‰∏é sql</h1>
<h2 id="ÂâçË®Ä-4">ÂâçË®Ä</h2>
<p>Êú¨Â∞èËäÇÔºåÊàë‰ª¨Â∞Ü‰∏ÄËµ∑Â≠¶‰π† MyBatis resultMap Âíå sql„ÄÇ</p>
<p>Âú®ÂâçÈù¢ÁöÑÂ∞èËäÇ‰∏≠ÔºåÊàë‰ª¨‰∫ÜËß£Âà∞ MyBatis ÂèØ‰ª•Ëá™Âä®Â∏ÆÂä©Êàë‰ª¨Êò†Â∞ÑÊï∞ÊçÆÂ∫ìÊï∞ÊçÆÂíå Java ÂØπË±°ÔºåÂÖ∂ÂÆûËøôÊòØ MyBatis Âú®ÂπïÂêéÂ∏ÆÊàë‰ª¨ÂàõÂª∫‰∫Ü resultMap ÂØπË±°ÔºõËôΩÁÑ∂ MyBatis ÂèØ‰ª•Ëá™Âä®Â∏ÆÂä©Êàë‰ª¨ÂÅöÊï∞ÊçÆÊò†Â∞ÑÔºå‰ΩÜÊòØÂØπ‰∫éÂ§çÊùÇÁöÑÂØπË±°ÔºåÊàë‰ª¨Â∞±ÂøÖÈ°ªËá™ÂÆö‰πâ resultMap ‰∫Ü„ÄÇ</p>
<p>ËÄåÂú®‰π¶ÂÜô SQL Êó∂ÔºåÂäøÂøÖ‰ºöÊúâ‰∏Ä‰∫õ SQL ‰ª£Á†ÅÊÆµÂá∫Áé∞‰∫ÜÈáçÂ§çÔºå‰∏∫‰∫ÜÊõ¥Â•ΩÁöÑÂ§çÁî®ÂÆÉ‰ª¨ÔºåMyBatis Êèê‰æõ‰∫Ü sql Ê†áÁ≠æ„ÄÇ</p>
<h2 id="ÂÆö‰πâ-2">ÂÆö‰πâ</h2>
<blockquote>
<p>resultMap Ê†áÁ≠æÁî®‰∫éÂ∞ÜÊï∞ÊçÆÂ∫ìÊï∞ÊçÆ<code>Êò†Â∞Ñ</code>‰∏∫ Java ÂØπË±°Ôºõsql Ê†áÁ≠æÂàôÁî®Êù•ÂÆö‰πâ<code>ÂèØÈáçÁî®</code>ÁöÑ SQL ‰ª£Á†ÅÊÆµ„ÄÇ</p>
</blockquote>
<h2 id="ÂÆû‰æã-1">ÂÆû‰æã</h2>
<h3 id="resultmap-ÂÆû‰æã">resultMap ÂÆû‰æã</h3>
<h4 id="xml-ÂÆû‰æã-1">xml ÂÆû‰æã</h4>
<p>Âú®‰∏ãÈù¢ËøôÊÆµ select Ê†áÁ≠æ‰∏≠ÔºåSQL ËØ≠Âè•ËøîÂõûÁöÑÊòØ‰∏Ä‰∏™Â§çÊùÇÂØπË±°ÔºåÂç≥ resultType ‰∏äÊåáÂÆöÁöÑ User„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&#34;selectUserByAgeAndScore&#34;</span> <span class="na">parameterType=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="na">resultType=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  SELECT * FROM user WHERE age = #{age} AND score = #{score}
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåMyBatis ‰ºöËá™Âä®ÂàõÂª∫ resultMap ÂØπË±°ËøõË°åÊï∞ÊçÆÁöÑÊò†Â∞ÑÔºåÊé•‰∏ãÊù•Êàë‰ª¨Áõ¥Êé•ÂÆö‰πâÂá∫ resultMapÔºåÈÅøÂÖç MyBatis Êé®Êñ≠ÂíåÊò†Â∞ÑÂ∏¶Êù•ÁöÑÊÄßËÉΩÊçüËÄó„ÄÇÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">&#34;userMap&#34;</span> <span class="na">type=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;id</span> <span class="na">property=</span><span class="s">&#34;id&#34;</span> <span class="na">column=</span><span class="s">&#34;id&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&#34;username&#34;</span> <span class="na">column=</span><span class="s">&#34;username&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&#34;age&#34;</span> <span class="na">column=</span><span class="s">&#34;age&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&#34;score&#34;</span> <span class="na">column=</span><span class="s">&#34;score&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/resultMap&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&#34;selectUserByAgeAndScore&#34;</span> <span class="na">parameterType=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="na">resultMap=</span><span class="s">&#34;userMap&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  SELECT * FROM user WHERE age = #{age} AND score = #{score}
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êàë‰ª¨ÂÆö‰πâ‰∫ÜÂêç‰∏∫ userMap ÁöÑ resultMap ‰∏îÊåáÂÆöÂÖ∂ÂØπÂ∫îÁöÑ Java Á±ªÂûã‰∏∫ UserÔºåÂú®Ê†áÁ≠æÁöÑÂÜÖÈÉ®ÔºåÊàë‰ª¨ËøòÈúÄÊåáÂÆöÂ≠óÊÆµ‰πãÈó¥ÁöÑÊò†Â∞ÑÔºåÈô§ id Ëøô‰∏™ÁâπÊÆäÁöÑÂ≠óÊÆµÂ§ñÔºåÂÖ∂ÂÆÉÂ≠óÊÆµÂùá‰ΩøÁî® result Ê†áÁ≠æÊù•Êò†Â∞Ñ„ÄÇ</p>
<p>ÂÖ∂‰∏≠ property ÊòØ Java ÂØπË±°‰∏≠ÁöÑÂ≠óÊÆµÂêçÁß∞Ôºåcolumn ÊòØÊï∞ÊçÆË°®‰∏é‰πãÂØπÂ∫îÁöÑÂ≠óÊÆµÂêçÁß∞„ÄÇ</p>
<p>resultMap ÂÆö‰πâÂÆåÊØïÂêéÔºåÊàë‰ª¨Âú® select Ê†áÁ≠æ‰∏≠ÈÄöËøá resultMap Â±ûÊÄßÊù•ËÆæÁΩÆÂØπÂ∫îÁöÑ id„ÄÇ</p>
<blockquote>
<p><strong>TIPSÔºö</strong> Ê≥®ÊÑèÔºå resultMap Âíå resultType ‰∏çËÉΩÂÖ±Â≠òÔºåÂè™ËÉΩ‰∫åÈÄâ‰∏Ä„ÄÇ</p>
</blockquote>
<p>ËøôÊ†∑Ôºå‰∏ÄÊ¨°ÁÆÄÂçïÁöÑ resultMap ‰ΩøÁî®Â∞±ÂÆåÊØï‰∫Ü„ÄÇ</p>
<h4 id="Ê≥®Ëß£ÂÆû‰æã-1">Ê≥®Ëß£ÂÆû‰æã</h4>
<p>ÈÄöËøáÊ≥®Ëß£ÔºåÊàë‰ª¨‰πüÂèØ‰ª•ÊåáÂÆö Java Ê®°ÂûãÂØπË±°‰∏éÊï∞ÊçÆÂ∫ìÂ≠óÊÆµ‰πãÈó¥ÁöÑÊò†Â∞ÑÂÖ≥Á≥ªÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Results</span><span class="o">({</span>
</span></span><span class="line"><span class="cl">  <span class="nd">@Result</span><span class="o">(</span><span class="n">property</span> <span class="o">=</span> <span class="s">&#34;id&#34;</span><span class="o">,</span> <span class="n">column</span> <span class="o">=</span> <span class="s">&#34;id&#34;</span><span class="o">,</span> <span class="n">id</span> <span class="o">=</span> <span class="kc">true</span><span class="o">),</span>
</span></span><span class="line"><span class="cl">  <span class="nd">@Result</span><span class="o">(</span><span class="n">property</span> <span class="o">=</span> <span class="s">&#34;username&#34;</span><span class="o">,</span> <span class="n">column</span> <span class="o">=</span> <span class="s">&#34;username&#34;</span><span class="o">),</span>
</span></span><span class="line"><span class="cl">  <span class="nd">@Result</span><span class="o">(</span><span class="n">property</span> <span class="o">=</span> <span class="s">&#34;age&#34;</span><span class="o">,</span> <span class="n">column</span> <span class="o">=</span> <span class="s">&#34;age&#34;</span><span class="o">),</span>
</span></span><span class="line"><span class="cl">  <span class="nd">@Result</span><span class="o">(</span><span class="n">property</span> <span class="o">=</span> <span class="s">&#34;score&#34;</span><span class="o">,</span> <span class="n">column</span> <span class="o">=</span> <span class="s">&#34;score&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">})</span>
</span></span><span class="line"><span class="cl"><span class="nd">@Select</span><span class="o">(</span><span class="s">&#34;SELECT * FROM user WHERE id = #{id}&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="n">User</span> <span class="nf">selectUserById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Results Ê≥®Ëß£‰∏é resultMap ÂØπË±°ÔºåÂåÖÂê´Â§ö‰∏™ Result Ê≥®Ëß£ÔºåÊØè‰∏™ Result Ê≥®Ëß£ÂØπÂ∫î‰∫Ü‰∏Ä‰∏™Â≠óÊÆµÊò†Â∞ÑÂÖ≥Á≥ª„ÄÇ</p>
<blockquote>
<p><strong>ÊèêÁ§∫Ôºö</strong> Results Ê≥®Ëß£‰ª•Âèä ResultMap Ê≥®Ëß£ËôΩÁÑ∂Â≠òÂú®Ôºå‰ΩÜÊòØÂæàÂ∞ëÂú®ÂÆûÈôÖÁöÑÂºÄÂèë‰∏≠‰ΩøÁî®ÔºåÂè™ÈúÄ‰∫ÜËß£Âç≥ÂèØ„ÄÇ</p>
</blockquote>
<h3 id="sql-ÂÆû‰æã">SQL ÂÆû‰æã</h3>
<p>Êàë‰ª¨Â∞ÜÁõÆÂÖâÊîæÂà∞ selectUserByAgeAndScore ËØ≠Âè•ÁöÑÂÜÖÈÉ®ÔºåÂú®ÂÆûÈôÖÁöÑÂºÄÂèë‰∏≠ÂÉè<code>SELECT * FROM user</code>ËøôÊ†∑ÁöÑ‰ª£Á†ÅÊÆµÂÖ∂ÂÆûÈùûÂ∏∏Â∏∏ËßÅÔºå‰ºöÂú®Â§ö‰∏™ select Ê†áÁ≠æ‰∏≠Áî®Âà∞ÂÆÉ„ÄÇÊàë‰ª¨ÂèØ‰ª•Â∞ÜÂÖ∂ÂÆö‰πâ‰∏∫‰∏Ä‰∏™ sql Ê†áÁ≠æÔºåËøôÊ†∑ÊâÄÊúâÁöÑ select Ê†áÁ≠æÈÉΩÂèØ‰ª•Âø´ÈÄüÂ§çÁî®Âà∞ËøôÊÆµ‰ª£Á†Å„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;sql</span> <span class="na">id=</span><span class="s">&#34;selectUser&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  SELECT * FROM user
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/sql&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂêåÊ†∑ÁöÑÔºåÊàë‰ª¨ÂøÖÈ°ª‰∏∫Ëøô‰∏™‰ª£Á†ÅÊÆµÂÆö‰πâ‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑ idÔºåÂÆö‰πâÂ•ΩÂêéÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•Âú®ÂÖ∂ÂÆÉÊ†áÁ≠æ‰∏≠‰ΩøÁî®‰∫ÜÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&#34;selectUserByAgeAndScore&#34;</span> <span class="na">parameterType=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="na">resultMap=</span><span class="s">&#34;userMap&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;include</span> <span class="na">refid=</span><span class="s">&#34;selectUser&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">  WHERE age = #{age} AND score = #{score}
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÈáåÔºåÊàë‰ª¨ÂøÖÈ°ª‰ΩøÁî®‰∏Ä‰∏™ include Ê†áÁ≠æÊù•Â∞Ü SQL Ê†áÁ≠æÂåÖÂê´ËøõÊù•ÔºåÂπ∂‰∏î refid Â±ûÊÄßÂøÖÈ°ªÊòØËØ• SQL Ê†áÁ≠æÁöÑ id ÂÄº„ÄÇËøôÊ†∑ËøôÊÆµ‰ª£Á†Å‰ªçÁÑ∂ÂèØ‰ª•Ê≠£Â∏∏Â∑•‰Ωú„ÄÇ</p>
<p>SQL Ê†áÁ≠æÊ≤°ÊúâÂØπÂ∫îÊ≥®Ëß£Ôºå<code>Âè™ËÉΩ</code>Âú® xml ‰∏≠‰ΩøÁî®„ÄÇ</p>
<h2 id="ÂÆûË∑µ-1">ÂÆûË∑µ</h2>
<p>Êé•‰∏ãÊù•ÔºåÊàë‰ª¨‰∏ÄËµ∑Êù•ÂÆûÊìçÂ∑©Âõ∫‰∏Ä‰∏ã„ÄÇ</p>
<h3 id="‰æã1-Êü•ËØ¢Áî®Êà∑ÂßìÂêçÂíåÂπ¥ÈæÑ">‰æã1. Êü•ËØ¢Áî®Êà∑ÂßìÂêçÂíåÂπ¥ÈæÑ</h3>
<p>ËØ∑‰ΩøÁî® MyBatis ÂÆåÊàêÂú® user Ë°®‰∏≠Êü•ËØ¢Áî®Êà∑ÁÆÄÁï•‰ø°ÊÅØÁöÑÂäüËÉΩ„ÄÇ</p>
<p><strong>ÂàÜÊûêÔºö</strong></p>
<p>ÂæàÂ§öÂ∫îÁî®ÈÉΩ‰ºöÊúâÊü•ËØ¢Áî®Êà∑ÁÆÄÁï•‰ø°ÊÅØËøôÊ†∑‰∏Ä‰∏™ÈúÄÊ±ÇÔºåÊØîÂ¶ÇÊàë‰ª¨Âè™ÈúÄËé∑ÂèñÁî®Êà∑ÂêçÂíåÂπ¥ÈæÑÔºåËøêÁî®Êú¨Â∞èËäÇÁöÑÁü•ËØÜÊàë‰ª¨ÂèØ‰ª•ËøôÊ†∑ÂÆûÁé∞ÂÆÉ„ÄÇ</p>
<p>ÂÖàÂú®ÂØπÂ∫î UserMapper.xml Êñá‰ª∂‰∏≠Ê∑ªÂä†Êü•ËØ¢Áî®Êà∑ÁÆÄÁï•‰ø°ÊÅØÁöÑ select Ê†áÁ≠æÔºåÁÑ∂ÂêéÂú® UserMapper.java ‰∏≠Â¢ûÂä†‰∏äÂØπÂ∫îÁöÑÊñπÊ≥ïÂç≥ÂèØ„ÄÇ</p>
<p><strong>Ê≠•È™§Ôºö</strong></p>
<p>È¶ñÂÖàÔºåÊàë‰ª¨Êñ∞Âª∫‰∏Ä‰∏™Áî®Êà∑ÁÆÄÁï•‰ø°ÊÅØÁöÑÊ®°Âûã UserShortCut.javaÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ahao.mybatis.model</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserShortCut</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">private</span> <span class="n">String</span> <span class="n">username</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="kd">private</span> <span class="n">Integer</span> <span class="n">age</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// ÁúÅÁï•‰∫ÜÈáçË¶ÅÁöÑ getter Âíå setter ÊñπÊ≥ï
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âπ∂Âú® UserMapper.xml Ê∑ªÂä†‰∏ä resultMap „ÄÅsql Âíå select Ê†áÁ≠æÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="c">&lt;!--  Â§çÁî®ÁöÑ sql ‰ª£Á†ÅÊÆµ   --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;sql</span> <span class="na">id=</span><span class="s">&#34;selectUserShortcutMap&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  SELECT username,age FROM user
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/sql&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--  ÁªìÊûúÊò†Â∞ÑÈõÜ   --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;resultMap</span> <span class="na">id=</span><span class="s">&#34;userShortcutMap&#34;</span> <span class="na">type=</span><span class="s">&#34;com.ahao.mybatis.model.UserShortCut&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&#34;username&#34;</span> <span class="na">column=</span><span class="s">&#34;username&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;result</span> <span class="na">property=</span><span class="s">&#34;age&#34;</span> <span class="na">column=</span><span class="s">&#34;age&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/resultMap&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c">&lt;!--  Êü•ËØ¢ËØ≠Âè•   --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&#34;selectUserShortcutById&#34;</span> <span class="na">resultMap=</span><span class="s">&#34;userShortcutMap&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;include</span> <span class="na">refid=</span><span class="s">&#34;selectUserShortcutMap&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">  WHERE id = #{id}
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êé•‰∏ãÊù•ÔºåÁªô UserMapper.java Êé•Âè£Ê∑ªÂä†‰∏äÂØπÂ∫îÁöÑÊñπÊ≥ïÔºå‰ª•‰æøÂú®Á®ãÂ∫è‰∏≠Ë∞ÉÁî®„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ahao.mybatis.mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.ahao.mybatis.model.UserShortCut</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@Mapper</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">UserShortCut</span> <span class="nf">selectUserShortcutById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÁªìÊûúÔºö</strong></p>
<p>ÈÄöËøáÂ¶Ç‰∏ã‰ª£Á†ÅÔºåÊàë‰ª¨ËøêË°å selectUserShortcutById ÊñπÊ≥ï„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">UserMapper</span> <span class="n">userMapper</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">getMapper</span><span class="o">(</span><span class="n">UserMapper</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">UserShortCut</span> <span class="n">shortCut</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectUserShortcutById</span><span class="o">(</span><span class="n">1</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">shortCut</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁªìÊûúÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">UserShortCut<span class="o">{</span><span class="nv">username</span><span class="o">=</span><span class="s1">&#39;peter&#39;</span>, <span class="nv">age</span><span class="o">=</span>18<span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="Â∞èÁªì-4">Â∞èÁªì</h2>
<ul>
<li>SQL ÊòØ‰∏Ä‰∏™ÈùûÂ∏∏Â•ΩÁî®ÁöÑÊ†áÁ≠æÔºåËÉΩÂ§üÂáèÂ∞ëÂ§ßÈáèÈáçÂ§çÁöÑ SQL ‰ª£Á†Å‰π¶ÂÜôÔºå‰ΩÜÊòØ‰πüÈôç‰Ωé SQL ÁöÑÂèØËØªÊÄß„ÄÇ</li>
<li>MyBatis ‰ºöËá™Âä®ÁîüÊàê resultMapÔºåËøô‰ºö‰∏∫Êàë‰ª¨ËäÇÁúÅ‰∫ÜÂ§ßÈáèÁöÑÊó∂Èó¥ÔºåÂ¶ÇÊûú‰∏çÊòØÂØπÊÄßËÉΩÂçÅÂàÜ‰∏•ËãõÔºåÈÇ£‰πà resultType ÊòØÂ§üÁî®ÁöÑ„ÄÇ</li>
</ul>
<h1 id="mybatis-insert">MyBatis insert</h1>
<h2 id="ÂâçË®Ä-5">ÂâçË®Ä</h2>
<p>Êú¨Â∞èËäÇÔºåÊàë‰ª¨Â∞Ü‰∏ÄËµ∑Â≠¶‰π† MyBatis insert„ÄÇ</p>
<p>Âú® MyBatis ‰∏≠Ôºåinsert Ê†áÁ≠æÂØπÂ∫î‰∫é SQL ËØ≠Âè•‰∏≠ÁöÑ insert ÊèíÂÖ•Ôºõ‰∏é select Áõ∏ÊØîÔºåinsert Ë¶ÅÁÆÄÂçïËÆ∏Â§öÔºåÂè™ÊúâÂΩìÈúÄË¶ÅËøîÂõû‰∏ªÈîÆÊó∂ÔºåÊâç‰ºöÈ∫ªÁÉ¶‰∏Ä‰∫õÔºåÊàë‰ª¨Â∞Ü‰ªéÁÆÄÂçïÂà∞Â§çÊùÇÊù•‰æùÊ¨°‰ªãÁªç„ÄÇ</p>
<h2 id="ÂÆö‰πâ-3">ÂÆö‰πâ</h2>
<blockquote>
<p>insert Ê†áÁ≠æÁî®‰∫éÊò†Â∞Ñ SQL ‰∏≠ÁöÑ<code>ÊèíÂÖ•</code>ËØ≠Âè•</p>
</blockquote>
<h2 id="ÂÆû‰æã-2">ÂÆû‰æã</h2>
<h3 id="xml-ÂÆû‰æã-2">xml ÂÆû‰æã</h3>
<p>‰∏ãÈù¢ÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑ insert Ê†áÁ≠æ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;insert</span> <span class="na">id=</span><span class="s">&#34;insertUser&#34;</span> <span class="na">parameterType=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  INSERT INTO imooc_user(id,username,age,score) VALUES (#{id},#{username},#{age},#{score})
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/insert&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âêå select ‰∏ÄÊ†∑ÔºåÊØè‰∏Ä‰∏™ insert Ê†áÁ≠æÈÉΩÂøÖÈ°ªÊúâ‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑ id ÂíåÂèØÈÄâÁöÑ parameterType„ÄÇÊ†áÁ≠æÈáåÈù¢ÂàôÊòØÁúüÊ≠£ÁöÑ SQL ËØ≠Âè•ÔºåËØ•ËØ≠Âè•ÂÖ±Êúâ 4 ‰∏™ÂèÇÊï∞ÔºåÂàÜÂà´ÂØπÂ∫î User Á±ªÁöÑÂõõ‰∏™Â±ûÊÄß„ÄÇ</p>
<h3 id="Ê≥®Ëß£ÂÆû‰æã-2">Ê≥®Ëß£ÂÆû‰æã</h3>
<p>Â¶ÇÊûú‰∏ç‰ΩøÁî® xml ÁöÑÊñπÂºèÔºå‰ΩøÁî®Ê≥®Ëß£‰πüÂèØÂèñÂæóÂêåÊ†∑ÁöÑÊïàÊûúÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Insert</span><span class="o">(</span><span class="s">&#34;INSERT INTO imooc_user(username,age,score) VALUES (#{username},#{age},#{score})&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">insertUser</span><span class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="insert-Â±ûÊÄß">insert Â±ûÊÄß</h2>
<p>insert Ê†áÁ≠æ‰πüÊîØÊåÅËØ∏Â§öÂ±ûÊÄßÊù•ÊîπÂèòËØ≠Âè•ÁöÑË°å‰∏∫„ÄÇ</p>
<p>ÂÖ∂‰∏≠Â∏∏ËßÅ‰∏îÈáçË¶ÅÁöÑÂ±ûÊÄßÂ¶Ç‰∏ãË°®Ôºö</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th style="text-align:left">Â±ûÊÄß</th>
<th style="text-align:left">ÊèèËø∞</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">Âú®ÂëΩÂêçÁ©∫Èó¥‰∏≠ÁöÑÂîØ‰∏ÄÊ†áËØÜÁ¨¶</td>
</tr>
<tr>
<td style="text-align:left">parameterType</td>
<td style="text-align:left">ËØ≠Âè•ÁöÑÂèÇÊï∞Á±ªÂûãÔºåÈªòËÆ§ÂèØÈÄâÔºåMyBatis ‰ºöËá™Âä®Êé®Êñ≠</td>
</tr>
<tr>
<td style="text-align:left">flushCache</td>
<td style="text-align:left">ËÆæÁΩÆ‰∏∫ true ÂêéÔºåÂè™Ë¶ÅËØ≠Âè•Ë¢´Ë∞ÉÁî®ÔºåÈÉΩ‰ºöÂØºËá¥Êú¨Âú∞ÁºìÂ≠òÂíå‰∫åÁ∫ßÁºìÂ≠òË¢´Ê∏ÖÁ©∫ÔºåÈªòËÆ§‰∏∫ false</td>
</tr>
<tr>
<td style="text-align:left">timeout</td>
<td style="text-align:left">ËÆæÁΩÆË∂ÖÊó∂Êó∂Èó¥</td>
</tr>
<tr>
<td style="text-align:left">statementType</td>
<td style="text-align:left">STATEMENTÔºåPREPARED Êàñ CALLABLE ‰∏≠ÁöÑ‰∏Ä‰∏™ÔºåÈªòËÆ§‰∏∫ PREPAREDÔºàÈ¢ÑÂ§ÑÁêÜÔºâ</td>
</tr>
<tr>
<td style="text-align:left">useGeneratedKeys</td>
<td style="text-align:left">ÂèñÂá∫Áî±Êï∞ÊçÆÂ∫ìËá™Âä®ÁîüÊàêÁöÑ‰∏ªÈîÆÔºå‰ªÖÂØπÊîØÊåÅ‰∏ªÈîÆËá™Âä®ÁîüÊàêÁöÑÊï∞ÊçÆÂ∫ìÊúâÊïàÔºåÈªòËÆ§‰∏∫ false</td>
</tr>
<tr>
<td style="text-align:left">keyProperty</td>
<td style="text-align:left">‰∏ªÈîÆÁöÑÂêçÁß∞ÔºåÂøÖÈ°ª‰∏éuseGeneratedKeys ‰∏ÄËµ∑‰ΩøÁî®ÔºåÈªòËÆ§Êú™ËÆæÁΩÆ</td>
</tr>
</tbody>
</table></div>
<h2 id="ËøîÂõû‰∏ªÈîÆ">ËøîÂõû‰∏ªÈîÆ</h2>
<p>select Ê†áÁ≠æÂú®ÈúÄË¶ÅËøîÂõûË¢´Ê∑ªÂä†ËÆ∞ÂΩïÁöÑ‰∏ªÈîÆÊó∂Ôºå‰ºöÁ®çÂæÆÂ§çÊùÇ‰∏ÄÁÇπ„ÄÇ</p>
<h3 id="Ëá™Â¢û‰∏ªÈîÆ">Ëá™Â¢û‰∏ªÈîÆ</h3>
<h4 id="xml-ÊñπÂºè-1">xml ÊñπÂºè</h4>
<p>Â¶ÇÊûú‰ΩøÁî®ÁöÑÊï∞ÊçÆÂ∫ìÔºåÂ¶Ç MySQLÔºåPostgreSQLÔºåËøô‰∫õÊï∞ÊçÆÂ∫ìÊîØÊåÅËá™Â¢û‰∏ªÈîÆÔºåÈÇ£‰πàÂæóÂà∞ËøîÂõûÁöÑ‰∏ªÈîÆÂè™ÈúÄÊ∑ªÂä†‰∏ä useGeneratedKeys Âíå keyProperty ‰∏§‰∏™Â±ûÊÄßÂç≥ÂèØ„ÄÇÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;insert</span> <span class="na">id=</span><span class="s">&#34;insertUserNoId&#34;</span> <span class="na">useGeneratedKeys=</span><span class="s">&#34;true&#34;</span> <span class="na">keyProperty=</span><span class="s">&#34;id&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="na">parameterType=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  INSERT INTO user(username,age,score) VALUES (#{username},#{age},#{score})
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/insert&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú® insertUserNoId ‰∏≠ÔºåÊàë‰ª¨Âπ∂Êú™Ê∑ªÂä†‰∏ä id ÂèÇÊï∞ÔºåËÄåÊòØ‰ΩøÁî®‰∫ÜÊï∞ÊçÆÂ∫ìËá™Â¢û‰∏ªÈîÆÁöÑÁâπÊÄßÔºåkeyProperty Â±ûÊÄßÂÄºÂØπÂ∫î id Â≠óÊÆµÁöÑÂêçÁß∞ÔºåËøôÊ†∑ÂΩìËØ≠Âè•ÊâßË°åÊàêÂäüÂêéÔºåÂØπË±°ÁöÑ id Â≠óÊÆµ‰ºöË¢´Ëá™Âä®ËÆæÁΩÆ‰∏∫ËøîÂõûÁöÑ id ÂÄº„ÄÇ</p>
<h4 id="Ê≥®Ëß£ÊñπÂºè-1">Ê≥®Ëß£ÊñπÂºè</h4>
<p>‰ΩøÁî®‰∏ãÈù¢ÁöÑÊ≥®Ëß£ÊñπÂºèÔºåÂêåÊ†∑ÂèØ‰ª•ÂÆûÁé∞ÂêåÊ†∑ÁöÑÊïàÊûúÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Insert</span><span class="o">(</span><span class="s">&#34;INSERT INTO imooc_user(username,age,score) VALUES (#{username},#{age},#{score})&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="nd">@Options</span><span class="o">(</span><span class="n">useGeneratedKeys</span> <span class="o">=</span> <span class="kc">true</span><span class="o">,</span> <span class="n">keyProperty</span> <span class="o">=</span> <span class="s">&#34;id&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">insertUser</span><span class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>MyBatis Êèê‰æõ‰∫Ü Options Ê≥®Ëß£Êù•ÊåáÂÆöÊñπÊ≥ïË∞ÉÁî®ÁöÑË°å‰∏∫„ÄÇ</p>
<h3 id="selectkey-Ê†áÁ≠æ">selectKey Ê†áÁ≠æ</h3>
<h4 id="xml-ÊñπÂºè-2">xml ÊñπÂºè</h4>
<p>Â¶ÇÊûú‰ΩøÁî®ÁöÑÊï∞ÊçÆÂ∫ì‰∏çÊîØÊåÅ‰∏ªÈîÆËá™Â¢ûÔºåÂ¶Ç OracleÔºåMyBatis Êèê‰æõ‰∫Ü selectKey Ê†áÁ≠æÊù•ÈÄöËøá SQL ËØ≠Âè•Ëé∑Âæó‰∏ªÈîÆ„ÄÇ</p>
<p>‰æãÂ¶ÇÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;insert</span> <span class="na">id=</span><span class="s">&#34;insertUserNoId&#34;</span> <span class="na">parameterType=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  INSERT INTO imooc_user(username,age,score) VALUES (#{username},#{age},#{score})
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;selectKey</span> <span class="na">keyColumn=</span><span class="s">&#34;id&#34;</span> <span class="na">resultType=</span><span class="s">&#34;long&#34;</span> <span class="na">keyProperty=</span><span class="s">&#34;id&#34;</span> <span class="na">order=</span><span class="s">&#34;AFTER&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    SELECT LAST_INSERT_ID()
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/selectKey&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/insert&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>selectKey Ê†áÁ≠æÂøÖÈ°ªÂú® insert Ê†áÁ≠æÈáåÈù¢ÔºåselectKey Êúâ 4 ‰∏™Â±ûÊÄßÔºåÂÆÉ‰ª¨ÁöÑ‰ΩúÁî®Â¶Ç‰∏ãË°®Ôºö</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th style="text-align:left">Â±ûÊÄß</th>
<th style="text-align:left">ÊèèËø∞</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">keyColumn</td>
<td style="text-align:left">Êï∞ÊçÆÂ∫ìÂ≠óÊÆµÂêçÔºåÂØπÂ∫îËøîÂõûÁªìÊûúÈõÜ‰∏≠ÁöÑÂêçÁß∞</td>
</tr>
<tr>
<td style="text-align:left">keyProperty</td>
<td style="text-align:left">ÁõÆÊ†áÂ≠óÊÆµÂêçÁß∞ÔºåÂØπÂ∫îJava ÂØπË±°ÁöÑÂ≠óÊÆµÂêç</td>
</tr>
<tr>
<td style="text-align:left">resultType</td>
<td style="text-align:left">idÂ≠óÊÆµÁöÑÁ±ªÂûã</td>
</tr>
<tr>
<td style="text-align:left">order</td>
<td style="text-align:left">ÊâßË°åÁöÑÈ°∫Â∫èÔºåÂú® insert ‰πãÂâçË∞ÉÁî®‰∏∫ BEFOREÔºå‰πãÂêé‰∏∫ AFTER</td>
</tr>
</tbody>
</table></div>
<p>Ê≥®ÊÑèÔºåselectKey ‰∏≠ÁöÑËØ≠Âè•ÂÖ∂ÂÆûÂ∞±ÊòØ SQL ËØ≠Âè•Ôºå‰∏çÂêåÊï∞ÊçÆÂ∫ìÂæóÂà∞‰∏ªÈîÆÁöÑËØ≠Âè•Âùá‰∏ç‰∏ÄÊ†∑„ÄÇ</p>
<h4 id="Ê≥®Ëß£ÊñπÂºè-2">Ê≥®Ëß£ÊñπÂºè</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Insert</span><span class="o">(</span><span class="s">&#34;INSERT INTO imooc_user(username,age,score) VALUES (#{username},#{age},#{score})&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="nd">@SelectKey</span><span class="o">(</span><span class="n">statement</span> <span class="o">=</span> <span class="s">&#34;SELECT LAST_INSERT_ID()&#34;</span><span class="o">,</span> <span class="n">keyProperty</span> <span class="o">=</span> <span class="s">&#34;id&#34;</span><span class="o">,</span> <span class="n">before</span> <span class="o">=</span> <span class="kc">false</span><span class="o">,</span> <span class="n">resultType</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">insertUser</span><span class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>selectKey ‰πüÊúâÁõ∏Â∫îÁöÑÊ≥®Ëß£Ôºå‰∏çËøáÈÖçÁΩÆÂ±ûÊÄßÁï•Êúâ‰∏çÂêåÔºåstatement Â±ûÊÄßÂØπÂ∫îÊ†áÁ≠æ‰∏≠ÁöÑ SQL ËØ≠Âè•ÔºåËÄå before Â±ûÊÄßÂàôÂØπÂ∫îÊ†áÁ≠æ‰∏≠ÁöÑ order Â±ûÊÄßÔºåËã• before ‰∏∫ falseÔºåÂàô order ÂØπÂ∫î‰∏∫ AFTER„ÄÇ</p>
<h2 id="ÂÆûË∑µ-2">ÂÆûË∑µ</h2>
<p>‰∏ãÈù¢ÔºåÊàë‰ª¨‰∏ÄËµ∑Êù•ÂÆûÊìçÂ∑©Âõ∫‰∏Ä‰∏ã„ÄÇ</p>
<h3 id="‰æã1-ÊèíÂÖ•Áî®Êà∑">‰æã1. ÊèíÂÖ•Áî®Êà∑</h3>
<p>ËØ∑‰ΩøÁî® MyBatis ÂÆåÊàêÂú® imooc_user Ë°®‰∏≠ÊèíÂÖ•Áî®Êà∑ÁöÑÂäüËÉΩ„ÄÇ</p>
<p><strong>ÂàÜÊûêÔºö</strong></p>
<p>ÊåâÁÖß MyBatis ÁöÑÂºÄÂèëÊ®°ÂºèÔºåÂÖàÂú®ÂØπÂ∫î UserMapper.xml Êñá‰ª∂‰∏≠Ê∑ªÂä†ÊèíÂÖ•Áî®Êà∑ÁöÑ insert Ê†áÁ≠æÔºåÁÑ∂ÂêéÂú® UserMapper.java ‰∏≠Â¢ûÂä†‰∏äÂØπÂ∫îÁöÑÊñπÊ≥ïÂç≥ÂèØ„ÄÇ</p>
<p><strong>Ê≠•È™§Ôºö</strong></p>
<p>‰ΩøÁî® MyBatis ÂêëÊï∞ÊçÆÂ∫ì‰∏≠ÊèíÂÖ•Áî®Êà∑„ÄÇÁî±‰∫éÊàë‰ª¨‰ΩøÁî®ÁöÑÊï∞ÊçÆÂ∫ìÊòØ MySQLÔºåÂõ†‰∏∫Áõ¥Êé•‰ΩøÁî® useGeneratedKeys ÂæóÂà∞Ëá™Â¢û‰∏ªÈîÆ„ÄÇ</p>
<p>È¶ñÂÖàÔºåÊàë‰ª¨Âú® UserMapper.xml Êñá‰ª∂‰∏≠Ê∑ªÂä†‰∏äÂØπÂ∫îÁöÑ insert Ê†áÁ≠æÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;insert</span> <span class="na">id=</span><span class="s">&#34;insertUser&#34;</span> <span class="na">useGeneratedKeys=</span><span class="s">&#34;true&#34;</span> <span class="na">keyProperty=</span><span class="s">&#34;id&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="na">parameterType=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  INSERT INTO imooc_user(username,age,score) VALUES (#{username},#{age},#{score})
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/insert&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ÂêéÂú® UserMapper.java ‰∏≠Ê∑ªÂä†ÂØπÂ∫îÁöÑÊñπÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ahao.mybatis.mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.ahao.mybatis.model.User</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@Mapper</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="nf">insertUser</span><span class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÁªìÊûúÔºö</strong></p>
<p>ÈÄöËøáÂ¶Ç‰∏ã‰ª£Á†ÅÔºåÊàë‰ª¨ËøêË°å insertUser ÊñπÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">UserMapper</span> <span class="n">userMapper</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">getMapper</span><span class="o">(</span><span class="n">UserMapper</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="n">user</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">&#34;insert test&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">user</span><span class="o">.</span><span class="na">setAge</span><span class="o">(</span><span class="n">100</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">user</span><span class="o">.</span><span class="na">setScore</span><span class="o">(</span><span class="n">100000</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">rows</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">insertUser</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">rows</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ‰∏ÄÂÆöË¶ÅÊèê‰∫§
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">session</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="n">session</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>TIPS:</strong> Ê≥®ÊÑèÔºåËøôÈáåÂøÖÈ°ªÈÄöËøá commit ÊñπÊ≥ïÊèê‰∫§‰ºöËØùÔºåËØ≠Âè•Êâç‰ºöÁîüÊïà„ÄÇ</p>
</blockquote>
<h2 id="Â∞èÁªì-5">Â∞èÁªì</h2>
<ul>
<li>ÁªùÂ§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨ÈÉΩ‰∏ç‰ºöÂú®ÊèíÂÖ•Êó∂ÊåáÂÆö id ÁöÑÂÄºÔºåËÄåÊòØÈÄöËøáÊï∞ÊçÆÂ∫ìËá™Âä®ÂéªÁîüÊàê„ÄÇ</li>
<li>‰∏çÂêåÊï∞ÊçÆÂ∫ìËé∑Âæó‰∏ªÈîÆÁöÑ SQL ËØ≠Âè•‰πü‰∏çÂêåÔºåÂ¶ÇÊûúÈÄöËøá selectKey Ëé∑Âæó‰∏ªÈîÆÔºåÈÇ£‰πà‰∏ÄÂÆöË¶ÅÊ≥®ÊÑèÊï∞ÊçÆÂ∫ìÂéÇÂïÜ‰πãÈó¥ÁöÑÂ∑ÆÂºÇÊÄß„ÄÇ</li>
</ul>
<h1 id="mybatis-update">MyBatis update</h1>
<h2 id="ÂâçË®Ä-6">ÂâçË®Ä</h2>
<p>Êú¨Â∞èËäÇÔºåÊàë‰ª¨Â∞Ü‰∏ÄËµ∑Â≠¶‰π† MyBatis update„ÄÇ</p>
<p>Âú® MyBatis ‰∏≠Ôºåupdate Ê†áÁ≠æÂØπÂ∫î‰∫é SQL ËØ≠Âè•‰∏≠ÁöÑ update Êõ¥Êñ∞„ÄÇ</p>
<h2 id="ÂÆö‰πâ-4">ÂÆö‰πâ</h2>
<blockquote>
<p>update Ê†áÁ≠æÁî®‰∫éÊò†Â∞Ñ SQL ‰∏≠ÁöÑ<code>Êõ¥Êñ∞</code>ËØ≠Âè•„ÄÇ</p>
</blockquote>
<h2 id="ÂÆû‰æã-3">ÂÆû‰æã</h2>
<h3 id="xml-ÂÆû‰æã-3">xml ÂÆû‰æã</h3>
<p>Â¶Ç‰∏ãÂ∞±ÊòØ‰∏Ä‰∏™ÁúüÂÆûÁöÑ update Ê†áÁ≠æÂÆû‰æã„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;update</span> <span class="na">id=</span><span class="s">&#34;updateUserAgeById&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  UPDATE imooc_user SET age = #{age} WHERE id = #{id}
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/update&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊØè‰∏Ä‰∏™ update Ê†áÁ≠æÈÉΩÂøÖÈ°ªÊúâ‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑ id Â±ûÊÄßÔºåÂú® update Ê†áÁ≠æÂÜÖÈÉ®ÂàôÊòØ‰∏ÄÊù° SQL ËØ≠Âè•„ÄÇ</p>
<h3 id="Ê≥®Ëß£ÂÆû‰æã-3">Ê≥®Ëß£ÂÆû‰æã</h3>
<p>‰ΩøÁî®Â¶Ç‰∏ãÁöÑÊ≥®Ëß£ÊñπÂºèÔºåÊàë‰ª¨‰πüÂèØ‰ª•ÂÆûÁé∞ÂêåÊ†∑ÁöÑÂäüËÉΩ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Update</span><span class="o">(</span><span class="s">&#34;UPDATE imooc_user SET age = #{age} WHERE id = #{id}&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">updateUserAgeById</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;age&#34;</span><span class="o">)</span> <span class="n">Integer</span> <span class="n">age</span><span class="o">,</span> <span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;id&#34;</span><span class="o">)</span> <span class="n">Integer</span> <span class="n">id</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="update-Â±ûÊÄß">update Â±ûÊÄß</h2>
<p>update Ê†áÁ≠æÊîØÊåÅ‰∏Ä‰∫õÂ±ûÊÄßÊù•ÊîπÂèòÊõ¥Êñ∞ËØ≠Âè•ÁöÑË°å‰∏∫„ÄÇ</p>
<p>ÂÖ∂‰∏≠Â∏∏ËßÅ‰∏îÈáçË¶ÅÁöÑÂ±ûÊÄßÂ¶Ç‰∏ãË°®Ôºö</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th style="text-align:left">Â±ûÊÄß</th>
<th style="text-align:left">ÊèèËø∞</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">Âú®ÂëΩÂêçÁ©∫Èó¥‰∏≠ÁöÑÂîØ‰∏ÄÊ†áËØÜÁ¨¶</td>
</tr>
<tr>
<td style="text-align:left">parameterType</td>
<td style="text-align:left">ËØ≠Âè•ÁöÑÂèÇÊï∞Á±ªÂûãÔºåÈªòËÆ§ÂèØÈÄâÔºåMyBatis ‰ºöËá™Âä®Êé®Êñ≠</td>
</tr>
<tr>
<td style="text-align:left">flushCache</td>
<td style="text-align:left">ËÆæÁΩÆ‰∏∫ true ÂêéÔºåÂè™Ë¶ÅËØ≠Âè•Ë¢´Ë∞ÉÁî®ÔºåÈÉΩ‰ºöÂØºËá¥Êú¨Âú∞ÁºìÂ≠òÂíå‰∫åÁ∫ßÁºìÂ≠òË¢´Ê∏ÖÁ©∫ÔºåÈªòËÆ§‰∏∫ false</td>
</tr>
<tr>
<td style="text-align:left">timeout</td>
<td style="text-align:left">ËÆæÁΩÆË∂ÖÊó∂Êó∂Èó¥</td>
</tr>
<tr>
<td style="text-align:left">statementType</td>
<td style="text-align:left">STATEMENTÔºåPREPARED Êàñ CALLABLE ‰∏≠ÁöÑ‰∏Ä‰∏™ÔºåÈªòËÆ§‰∏∫ PREPAREDÔºàÈ¢ÑÂ§ÑÁêÜÔºâ</td>
</tr>
</tbody>
</table></div>
<h2 id="ÂÆûË∑µ-3">ÂÆûË∑µ</h2>
<h3 id="‰æã1-Êõ¥Êñ∞Áî®Êà∑Âπ¥ÈæÑ">‰æã1. Êõ¥Êñ∞Áî®Êà∑Âπ¥ÈæÑ</h3>
<p>ËØ∑‰ΩøÁî® MyBatis ÂÆåÊàêÂØπ imooc_user Ë°®‰∏≠Áî®Êà∑Âπ¥ÈæÑÊõ¥Êñ∞ÁöÑÂäüËÉΩ„ÄÇ</p>
<p><strong>ÂàÜÊûêÔºö</strong></p>
<p>ÊåâÁÖß MyBatis ÁöÑÂºÄÂèëÊ®°ÂºèÔºåÂÖàÂú®ÂØπÂ∫î UserMapper.xml Êñá‰ª∂‰∏≠Ê∑ªÂä†Áî®Êà∑Âπ¥ÈæÑÊõ¥Êñ∞ÁöÑ update Ê†áÁ≠æÔºåÁÑ∂ÂêéÂú® UserMapper.java ‰∏≠Â¢ûÂä†‰∏äÂØπÂ∫îÁöÑÊñπÊ≥ïÂç≥ÂèØ„ÄÇ</p>
<p><strong>Ê≠•È™§Ôºö</strong></p>
<p>È¶ñÂÖàÔºåÂú® UserMapper.xml ‰∏≠Ê∑ªÂä† update Ê†áÁ≠æÔºåÂπ∂Âú®Ê†áÁ≠æ‰∏≠ÂÜôÂÖ• SQL Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;update</span> <span class="na">id=</span><span class="s">&#34;updateUserAgeById&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  UPDATE imooc_user SET age = #{age} WHERE id = #{id}
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/update&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ÂêéÂú® UserMapper.java ‰∏≠Ê∑ªÂä†‰∏äÂØπÂ∫îÁöÑÊé•Âè£ÊñπÊ≥ïÔºåÊñπÊ≥ïÊé•Âèó age Âíå id ‰∏§‰∏™ÂèÇÊï∞„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ahao.mybatis.mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Param</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@Mapper</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="nf">updateUserAgeById</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;age&#34;</span><span class="o">)</span> <span class="n">Integer</span> <span class="n">age</span><span class="o">,</span> <span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;id&#34;</span><span class="o">)</span> <span class="n">Integer</span> <span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê≥®ÊÑèÔºöËøôÈáåÊàë‰ª¨‰ΩøÁî®‰∫Ü<code>@Param</code>Ëøô‰∏™Ê≥®Ëß£ÔºåÁî±‰∫éÂú® update Ê†áÁ≠æ‰∏≠Êúâ‰∏§‰∏™ÂèÇÊï∞ age Âíå idÔºåÊàë‰ª¨ÈúÄË¶ÅÈÄöËøá @Param Êù•ÂëäËØâ MyBatis ÂèÇÊï∞ÁöÑÂØπÂ∫îÂÖ≥Á≥ª„ÄÇ</p>
<p><strong>ÁªìÊûúÔºö</strong></p>
<p>ÈÄöËøáÂ¶Ç‰∏ã‰ª£Á†ÅÔºåÊàë‰ª¨ËøêË°å updateUserAgeById Ëøô‰∏™ÊñπÊ≥ï„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">UserMapper</span> <span class="n">userMapper</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">getMapper</span><span class="o">(</span><span class="n">UserMapper</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">rows</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">updateUserAgeById</span><span class="o">(</span><span class="n">180</span><span class="o">,</span> <span class="n">1</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">rows</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ‰∏ÄÂÆöË¶ÅÊèê‰∫§
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">session</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="n">session</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊàêÂäüÂêéÔºåid ‰∏∫ 1 ÁöÑÁî®Êà∑Âπ¥ÈæÑÂ∑≤ÁªèË¢´Êõ¥Êñ∞‰∏∫ 180„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">+----+-------------+-----+--------+
</span></span><span class="line"><span class="cl">| id | username    | age | score  |
</span></span><span class="line"><span class="cl">+----+-------------+-----+--------+
</span></span><span class="line"><span class="cl">| 1  | peter       | 180 | 100    |
</span></span><span class="line"><span class="cl">+----+-------------+-----+--------+
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="‰æã2-Êõ¥Êñ∞Áî®Êà∑ÂêçÁß∞ÂíåÂàÜÊï∞">‰æã2. Êõ¥Êñ∞Áî®Êà∑ÂêçÁß∞ÂíåÂàÜÊï∞</h3>
<p>ËØ∑‰ΩøÁî® MyBatis ÂÆåÊàêÂØπ imooc_user Ë°®‰∏≠Áî®Êà∑ÂêçÁß∞ÂíåÂàÜÊï∞Êõ¥Êñ∞ÁöÑÂäüËÉΩ„ÄÇ</p>
<p><strong>ÂàÜÊûêÔºö</strong></p>
<p>Âêå‰∏ä„ÄÇ</p>
<p><strong>Ê≠•È™§Ôºö</strong></p>
<p>È¶ñÂÖàÔºåÂú® UserMapper.xml ‰∏≠Ê∑ªÂä†Âè¶‰∏Ä‰∏™ update Ê†áÁ≠æÔºåÂπ∂Âú®Ê†áÁ≠æ‰∏≠ÂÜôÂÖ• SQL Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;update</span> <span class="na">id=</span><span class="s">&#34;updateUsernameAndScoreById&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  UPDATE imooc_user SET username = #{username}, score = #{score} WHERE id = #{id}
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/update&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ÂêéÂú® UserMapper.java ‰∏≠Ê∑ªÂä†‰∏äÂØπÂ∫îÁöÑÊé•Âè£ÊñπÊ≥ïÔºåÊñπÊ≥ïÊé•Âèó username„ÄÅscore Âíå id ‰∏â‰∏™ÂèÇÊï∞„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ahao.mybatis.mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Param</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@Mapper</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="kt">int</span> <span class="nf">updateUsernameAndScoreById</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;username&#34;</span><span class="o">)</span> <span class="n">String</span> <span class="n">username</span><span class="o">,</span> <span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;score&#34;</span><span class="o">)</span> <span class="n">Integer</span> <span class="n">score</span><span class="o">,</span> <span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;id&#34;</span><span class="o">)</span> <span class="n">Integer</span> <span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÁªìÊûúÔºö</strong></p>
<p>ÈÄöËøáÂ¶Ç‰∏ã‰ª£Á†ÅÔºåÊàë‰ª¨ËøêË°å updateUsernameAndScoreById Ëøô‰∏™ÊñπÊ≥ï„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">UserMapper</span> <span class="n">userMapper</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">getMapper</span><span class="o">(</span><span class="n">UserMapper</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">rows</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">updateUsernameAndScoreById</span><span class="o">(</span><span class="s">&#34;peter-gao&#34;</span><span class="o">,</span> <span class="n">1000</span><span class="o">,</span><span class="n">1</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">rows</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ‰∏ÄÂÆöË¶ÅÊèê‰∫§
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">session</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="n">session</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊàêÂäüÂêéÔºåid ‰∏∫ 1 ÁöÑÁî®Êà∑‰ø°ÊÅØÂ∑≤Ë¢´Êõ¥Êîπ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">+----+-------------+-----+--------+
</span></span><span class="line"><span class="cl">| id | username    | age | score  |
</span></span><span class="line"><span class="cl">+----+-------------+-----+--------+
</span></span><span class="line"><span class="cl">| 1  | peter-gao   | 180 | 1000   |
</span></span><span class="line"><span class="cl">+----+-------------+-----+--------+
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="Â∞èÁªì-6">Â∞èÁªì</h2>
<ul>
<li>update Ê†áÁ≠æÂπ∂Êó†Â§™Â§öÁöÑÁü•ËØÜÁÇπÔºå‰∏ªË¶ÅÁöÑÂ∑•‰ΩúÈáèÂú®‰π¶ÂÜô SQL ‰∏äÔºåÂõ†Ê≠§ËâØÂ•ΩÁöÑ SQL ÂäüÂ∫ïÂèØ‰ª•Â∏ÆÂä©‰Ω†Êõ¥Âä†Âø´ÈÄüÁöÑ‰∏äÊâã MyBatis„ÄÇ</li>
</ul>
<h1 id="mybatis-delete">MyBatis delete</h1>
<h2 id="ÂâçË®Ä-7">ÂâçË®Ä</h2>
<p>Êú¨Â∞èËäÇÔºåÊàë‰ª¨Â∞Ü‰∏ÄËµ∑Â≠¶‰π† MyBatis delete„ÄÇ</p>
<p>Âú® MyBatis ‰∏≠Ôºådelete Ê†áÁ≠æÂØπÂ∫î‰∫é SQL ËØ≠Âè•‰∏≠ÁöÑ delete Âà†Èô§„ÄÇ</p>
<h2 id="ÂÆö‰πâ-5">ÂÆö‰πâ</h2>
<blockquote>
<p>delete Ê†áÁ≠æÁî®‰∫éÊò†Â∞Ñ SQL ‰∏≠ÁöÑ<code>Âà†Èô§</code>ËØ≠Âè•„ÄÇ</p>
</blockquote>
<h2 id="ÂÆû‰æã-4">ÂÆû‰æã</h2>
<h3 id="xml-ÂÆû‰æã-4">xml ÂÆû‰æã</h3>
<p>Â¶Ç‰∏ãÔºåÊòØ‰∏Ä‰∏™ÁúüÂÆûÁöÑ delete Ê†áÁ≠æÂÆû‰æã„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;delete</span> <span class="na">id=</span><span class="s">&#34;deleteUserById&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  DELETE FROM imooc_user WHERE id = #{id}
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/delete&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊØè‰∏Ä‰∏™ delete Ê†áÁ≠æÈÉΩÂøÖÈ°ªÊúâ‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑ id Â±ûÊÄßÔºåÂú® delete Ê†áÁ≠æÂÜÖÈÉ®ÂàôÊòØ‰∏ÄÊù° SQL ËØ≠Âè•„ÄÇ</p>
<h3 id="Ê≥®Ëß£ÂÆû‰æã-4">Ê≥®Ëß£ÂÆû‰æã</h3>
<p>‰∏äÈù¢ÁöÑ delete Ê†áÁ≠æÂØπÂ∫îÁöÑÊ≥®Ëß£ÂÆû‰æãÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Delete</span><span class="o">(</span><span class="s">&#34;DELETE FROM imooc_user WHERE id = #{id}&#34;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">deleteUserById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="delete-Â±ûÊÄß">delete Â±ûÊÄß</h2>
<p>delete Ê†áÁ≠æÊîØÊåÅ‰∏Ä‰∫õÂ±ûÊÄßÊù•ÊîπÂèòÊõ¥Êñ∞ËØ≠Âè•ÁöÑË°å‰∏∫„ÄÇ</p>
<p>ÂÖ∂‰∏≠Â∏∏ËßÅ‰∏îÈáçË¶ÅÁöÑÂ±ûÊÄßÂ¶Ç‰∏ãË°®Ôºö</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th style="text-align:left">Â±ûÊÄß</th>
<th style="text-align:left">ÊèèËø∞</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">Âú®ÂëΩÂêçÁ©∫Èó¥‰∏≠ÁöÑÂîØ‰∏ÄÊ†áËØÜÁ¨¶</td>
</tr>
<tr>
<td style="text-align:left">parameterType</td>
<td style="text-align:left">ËØ≠Âè•ÁöÑÂèÇÊï∞Á±ªÂûãÔºåÈªòËÆ§ÂèØÈÄâÔºåMyBatis ‰ºöËá™Âä®Êé®Êñ≠</td>
</tr>
<tr>
<td style="text-align:left">flushCache</td>
<td style="text-align:left">ËÆæÁΩÆ‰∏∫ true ÂêéÔºåÂè™Ë¶ÅËØ≠Âè•Ë¢´Ë∞ÉÁî®ÔºåÈÉΩ‰ºöÂØºËá¥Êú¨Âú∞ÁºìÂ≠òÂíå‰∫åÁ∫ßÁºìÂ≠òË¢´Ê∏ÖÁ©∫ÔºåÈªòËÆ§‰∏∫ false</td>
</tr>
<tr>
<td style="text-align:left">timeout</td>
<td style="text-align:left">ËÆæÁΩÆË∂ÖÊó∂Êó∂Èó¥</td>
</tr>
<tr>
<td style="text-align:left">statementType</td>
<td style="text-align:left">STATEMENTÔºåPREPARED Êàñ CALLABLE ‰∏≠ÁöÑ‰∏Ä‰∏™ÔºåÈªòËÆ§‰∏∫ PREPAREDÔºàÈ¢ÑÂ§ÑÁêÜÔºâ</td>
</tr>
</tbody>
</table></div>
<h2 id="ÂÆûË∑µ-4">ÂÆûË∑µ</h2>
<h3 id="‰æã1-Ê†πÊçÆ-id-Âà†Èô§Áî®Êà∑">‰æã1. Ê†πÊçÆ id Âà†Èô§Áî®Êà∑</h3>
<p>ËØ∑‰ΩøÁî® MyBatis ÂÆåÊàêÂØπ imooc_user Ë°®‰∏≠ÈÄöËøá id Âà†Èô§Áî®Êà∑ÁöÑÂäüËÉΩ„ÄÇ</p>
<p><strong>ÂàÜÊûêÔºö</strong></p>
<p>ÊåâÁÖß MyBatis ÁöÑÂºÄÂèëÊ®°ÂºèÔºåÂÖàÂú®ÂØπÂ∫î UserMapper.xml Êñá‰ª∂‰∏≠Ê∑ªÂä†Ê†πÊçÆ id Âà†Èô§Áî®Êà∑ÁöÑ delete Ê†áÁ≠æÔºåÁÑ∂ÂêéÂú® UserMapper.java ‰∏≠Â¢ûÂä†‰∏äÂØπÂ∫îÁöÑÊñπÊ≥ïÂç≥ÂèØ„ÄÇ</p>
<p><strong>Ê≠•È™§Ôºö</strong></p>
<p>È¶ñÂÖàÔºåÂú® UserMapper.xml ‰∏≠Ê∑ªÂä† delete Ê†áÁ≠æÔºåÂπ∂Âú®Ê†áÁ≠æ‰∏≠ÂÜôÂÖ• SQL Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;delete</span> <span class="na">id=</span><span class="s">&#34;deleteUserById&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  DELETE FROM imooc_user WHERE id = #{id}
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/delete&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ÂêéÂú® UserMapper.java ‰∏≠Ê∑ªÂä†‰∏äÂØπÂ∫îÁöÑÊé•Âè£ÊñπÊ≥ïÔºåÊñπÊ≥ïÊé•Âèó id ‰∏Ä‰∏™ÂèÇÊï∞„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ahao.mybatis.mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@Mapper</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">   <span class="kt">int</span> <span class="nf">deleteUserById</span><span class="o">(</span><span class="n">Integer</span> <span class="n">id</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÁªìÊûúÔºö</strong></p>
<p>ÈÄöËøáÂ¶Ç‰∏ã‰ª£Á†ÅÔºåÊàë‰ª¨ËøêË°å deleteUserById Ëøô‰∏™ÊñπÊ≥ï„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">UserMapper</span> <span class="n">userMapper</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">getMapper</span><span class="o">(</span><span class="n">UserMapper</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">rows</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">deleteUserById</span><span class="o">(</span><span class="n">10</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">rows</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ‰∏ÄÂÆöË¶ÅÊèê‰∫§
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">session</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="n">session</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊàêÂäüÂêéÔºåid ‰∏∫ 10 ÁöÑÁî®Êà∑Â∑≤Ë¢´Âà†Èô§„ÄÇ</p>
<h3 id="‰æã2-Ê†πÊçÆÁî®Êà∑ÂêçÂà†Èô§Áî®Êà∑">‰æã2. Ê†πÊçÆÁî®Êà∑ÂêçÂà†Èô§Áî®Êà∑</h3>
<p>ËØ∑‰ΩøÁî® MyBatis ÂÆåÊàêÂØπ imooc_user Ë°®‰∏≠ÈÄöËøá<code>Áî®Êà∑Âêç</code>Âà†Èô§Áî®Êà∑ÁöÑÂäüËÉΩ„ÄÇ</p>
<p><strong>ÂàÜÊûêÔºö</strong></p>
<p>Âêå‰∏ä„ÄÇ</p>
<p><strong>Ê≠•È™§Ôºö</strong></p>
<p>È¶ñÂÖàÔºåÂú® UserMapper.xml ‰∏≠Ê∑ªÂä† delete Ê†áÁ≠æÔºåÂπ∂Âú®Ê†áÁ≠æ‰∏≠ÂÜôÂÖ• SQL Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;delete</span> <span class="na">id=</span><span class="s">&#34;deleteUserByName&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  DELETE FROM imooc_user WHERE username = #{username}
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/delete&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ÂêéÂú® UserMapper.java ‰∏≠Ê∑ªÂä†‰∏äÂØπÂ∫îÁöÑÊé•Âè£ÊñπÊ≥ïÔºåÊñπÊ≥ïÊé•Âèó username ‰∏Ä‰∏™ÂèÇÊï∞„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ahao.mybatis.mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@Mapper</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">   <span class="kt">int</span> <span class="nf">deleteUserByName</span><span class="o">(</span><span class="n">String</span> <span class="n">username</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÁªìÊûúÔºö</strong></p>
<p>ÈÄöËøáÂ¶Ç‰∏ã‰ª£Á†ÅÔºåÊàë‰ª¨ËøêË°å deleteUserByName Ëøô‰∏™ÊñπÊ≥ï„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">UserMapper</span> <span class="n">userMapper</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">getMapper</span><span class="o">(</span><span class="n">UserMapper</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">rows</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">deleteUserByName</span><span class="o">(</span><span class="s">&#34;tom&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">rows</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">session</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="n">session</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊàêÂäüÂêéÔºåÁî®Êà∑Âêç‰∏∫ tom ÁöÑÁî®Êà∑Â∑≤Ë¢´Âà†Èô§„ÄÇ</p>
<h2 id="Â∞èÁªì-7">Â∞èÁªì</h2>
<ul>
<li>delete Ê†áÁ≠æÂπ∂Êó†Â§™Â§öÁöÑÁü•ËØÜÁÇπÔºå‰∏ªË¶ÅÁöÑÂ∑•‰ΩúÈáèÂú®‰π¶ÂÜô SQL ‰∏ä„ÄÇ</li>
</ul>
<h1 id="ognl-Ë°®ËææÂºè">OGNL Ë°®ËææÂºè</h1>
<h2 id="ÂâçË®Ä-8">ÂâçË®Ä</h2>
<p>MyBatis ÁöÑÂä®ÊÄÅ SQL ÂπøÊ≥õÂ∫îÁî®Âà∞‰∫ÜOGNL Ë°®ËææÂºèÔºåOGNL Ë°®ËææÂºèÂèØ‰ª•ÁÅµÊ¥ªÁöÑÁªÑË£Ö SQL ËØ≠Âè•Ôºå‰ªéËÄåÂÆåÊàêÊõ¥Â§öÁöÑÂäüËÉΩ„ÄÇOGNL ÊòìÂ≠¶ÊòìÁî®Ôºå‰∏é Java ‰ª£Á†ÅÂá†‰πé‰∏ÄËá¥ÔºåÊú¨Â∞èËäÇÊàë‰ª¨Â∞ÜÁ≥ªÁªüÁöÑ‰ªãÁªç OGNL Ë°®ËææÂºèÂú® MyBatis ‰∏≠ÁöÑ‰ΩøÁî®„ÄÇ</p>
<h2 id="ÂÆö‰πâ-6">ÂÆö‰πâ</h2>
<blockquote>
<p>OGNL ÂÖ®Áß∞ Object-Graph Navigation LanguageÔºåÊòØ Java ‰∏≠ÁöÑ‰∏Ä‰∏™ÂºÄÊ∫êÁöÑË°®ËææÂºèËØ≠Ë®ÄÔºåÁî®‰∫éËÆøÈóÆÂØπË±°Êï∞ÊçÆ„ÄÇ</p>
</blockquote>
<h2 id="‰ªãÁªç">‰ªãÁªç</h2>
<h3 id="ÂÆû‰æã-5">ÂÆû‰æã</h3>
<p>OGNL ÊúÄÂ∏∏Áî®‰∫é if Ê†áÁ≠æ‰∏≠ÔºåÁî®‰∫éÂà§Êñ≠Êù°‰ª∂ÊòØÂê¶Êª°Ë∂≥ÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&#34;age != null&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  AND age = #{age}
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/if&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>if Ê†áÁ≠æÁöÑ test Â±ûÊÄßÂ∞±ÊòØ‰∏™ÂÖ∏ÂûãÁöÑ OGNL Ë°®ËææÂºè„ÄÇ<code>age != null</code>Ë°®Á§∫ÂΩì age ‰∏ç‰∏∫ null ÁöÑÊó∂ÂÄô if ÊàêÁ´ãÔºåÂàôÂä®ÊÄÅÁöÑÂêë SQL ‰∏≠ÊèíÂÖ•Ê†áÁ≠æÂÜÖÁöÑ SQL ‰ª£Á†ÅÊÆµ„ÄÇ</p>
<h3 id="Â∏∏ËßÅÁöÑ-ognl-Ë°®ËææÂºè">Â∏∏ËßÅÁöÑ OGNL Ë°®ËææÂºè</h3>
<p>Âú® MyBatis ‰∏≠Â∏∏ËßÅÁöÑ OGNL Ë°®ËææÂºèÂ¶Ç‰∏ãÔºö</p>
<ol>
<li>e1 or e2ÔºöÊàñÂÖ≥Á≥ª</li>
<li>e1 and e2Ôºö‰∏éÂÖ≥Á≥ª</li>
<li>e1 == e2 ÊàñËÄÖ e1 eq e2ÔºöÁõ∏Á≠â</li>
<li>e1 != e2 ÊàñËÄÖ e1 neq e2Ôºö‰∏çÁ≠â</li>
<li>e1 lt e2 Ôºõe1 &lt; e2Ôºõe1 gt e2Ôºõe1 &gt; e2Ôºõe1 lte e2Ôºõe1 &lt;= e2Ôºõe1 gte e2Ôºõe1 &gt;= e2ÔºöÊØîËæÉÂÖ≥Á≥ª</li>
<li>e1 + e2Ôºõe1 - e2Ôºõe1 * e2Ôºõe1 / e2Ôºõe1 % e2ÔºöËøêÁÆóÂÖ≥Á≥ª</li>
<li>!e ÊàñËÄÖ not eÔºöÈùûÔºåÂèñÂèç</li>
<li>e.method(args)ÔºöË∞ÉÁî®ÂØπË±°ÊñπÊ≥ï</li>
<li>e.propertyÔºöËÆøÈóÆÂ±ûÊÄßÂÄº</li>
<li>e1[e2]ÔºöËÆøÈóÆÊï∞ÁªÑ„ÄÅÈìæË°®Ôºàe2 ‰∏∫Â∫èÂè∑ÔºâÊàñËÄÖ MapÔºàe2 ‰∏∫ÈîÆÂÄºÔºâ</li>
</ol>
<p>ÂÖ∂‰∏≠ 1ÔΩû4 ‰ª•Âèä 9ÔΩû10 ÈÉΩÊòØÁâπÂà´Â∏∏Áî®ÁöÑÂá†ÁßçÊÉÖÂÜµÔºåËÄåÂÖ∂ÂÆÉÁöÑÊÉÖÂÜµ‰∏çÂà©‰∫é SQL ÁöÑÁª¥Êä§ÔºåÂõ†Ê≠§Âπ∂‰∏çÂ∏∏ËßÅ„ÄÇ</p>
<blockquote>
<p><strong>TIPSÔºö</strong> ÊèêÁ§∫Ôºå Â¶ÇÊûú‰Ω†ÁÜüÊÇâ Python ÁöÑËØùÔºå‰ºöÂèëÁé∞ OGNL Ë°®ËææÂºèÂÆåÂÖ®Â∞±ÊòØÂú®ÂÜô Python„ÄÇ</p>
</blockquote>
<h2 id="ÂÆûË∑µ-5">ÂÆûË∑µ</h2>
<p>‰∏ãÈù¢Êàë‰ª¨Â∞±Êù•‰ª•ÂÆû‰æãÊù•Áúã‰∏ÄÁúã OGNL Ë°®ËææÂºè„ÄÇ</p>
<p>Êúâ‰∏Ä‰∏™Âêç‰∏∫ pedro ÁöÑ User ÂØπË±°ÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">User</span> <span class="n">pedro</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="n">pedro</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">&#34;pedro&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">pedro</span><span class="o">.</span><span class="na">setTags</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">&#34;admin&#34;</span><span class="o">,</span> <span class="s">&#34;man&#34;</span><span class="o">));</span>
</span></span><span class="line"><span class="cl"><span class="n">pedro</span><span class="o">.</span><span class="na">setAge</span><span class="o">(</span><span class="n">23</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ËÆøÈóÆÂ±ûÊÄß">ËÆøÈóÆÂ±ûÊÄß</h3>
<p>ËÆøÈóÆÁî®Êà∑ÁöÑ username Â±ûÊÄßÔºåOGNL Ë°®ËææÂºè‰∏∫<code>pedro.username</code>ÔºåÁªìÊûú‰∏∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># pedro.username</span>
</span></span><span class="line"><span class="cl">pedro
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ËÆøÈóÆÂàóË°®">ËÆøÈóÆÂàóË°®</h3>
<p>ËÆøÈóÆÁî®Êà∑ÁöÑÁ¨¨‰∏Ä‰∏™Ê†áÁ≠æÔºåOGNL Ë°®ËææÂºè‰∏∫<code>pedro.tags[0]</code>ÔºåÁªìÊûú‰∏∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># pedro.tags[0]</span>
</span></span><span class="line"><span class="cl">admin
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÊØîËæÉ">ÊØîËæÉ</h3>
<p>ÊØîËæÉÁî®Êà∑Ê†áÁ≠æÈïøÂ∫¶ÊòØÂê¶Â§ß‰∫é 1ÔºåOGNL Ë°®ËææÂºè‰∏∫<code>pedro.tags[0]</code>ÔºåÁªìÊûú‰∏∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># pedro.tags.size &gt; 1</span>
</span></span><span class="line"><span class="cl"><span class="nb">true</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ËøêÁÆó">ËøêÁÆó</h3>
<p>Áî®Êà∑Âπ¥ÈæÑÂä†‰∏ä‰∏Ä‰∏™Êï¥Êï∞ 22ÔºåOGNL Ë°®ËææÂºè‰∏∫<code>pedro.age + 22</code>ÔºåÁªìÊûú‰∏∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># pedro.age + 22</span>
</span></span><span class="line"><span class="cl"><span class="m">45</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÊñπÊ≥ïË∞ÉÁî®">ÊñπÊ≥ïË∞ÉÁî®</h3>
<p>Â∞ÜÁî®Êà∑Âπ¥ÈæÑÂÖ®ÈÉ®Â§ßÂÜôÔºåOGNL Ë°®ËææÂºè‰∏∫<code>pedro.username.toUpperCase</code>ÔºåÁªìÊûú‰∏∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># pedro.username.toUpperCase</span>
</span></span><span class="line"><span class="cl">PEDRO
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="Â∞èÁªì-8">Â∞èÁªì</h2>
<ul>
<li>OGNL Ë°®ËææÂºèÊòØ MyBatis Âä®ÊÄÅ SQL ÁöÑÊ†∏ÂøÉÔºåÂ∞èÂ∑ßÁ≤æËá¥Âç¥ÂäüËÉΩÂº∫Â§ßÔºåÊòìÂ≠¶ÊòìÁî®„ÄÇ</li>
</ul>
<h1 id="mybatis-if-ÂíåÂ§öÊï∞ÊçÆÂ∫ìÊîØÊåÅ">MyBatis if ÂíåÂ§öÊï∞ÊçÆÂ∫ìÊîØÊåÅ</h1>
<h2 id="ÂâçË®Ä-9">ÂâçË®Ä</h2>
<p>Âä®ÊÄÅ SQL ÊòØ MyBatis ÊúÄÊ†áÂøóÊÄßÁöÑÁâπÊÄß‰πã‰∏Ä„ÄÇÂú®ÂÖ∂ÂÆÉÊ°ÜÊû∂‰∏≠Ôºå‰Ω†ÂèØËÉΩÈúÄË¶ÅÊ†πÊçÆ‰∏çÂêåÁöÑÊù°‰ª∂Êù•ÊãºÊé• SQLÔºåËæóËΩ¨Âú®Á¨¶Âè∑‰∏éÊù°‰ª∂ÁöÑÂà§Êñ≠‰∏äÔºåÂ§ÑÁêÜËµ∑Êù•È∫ªÁÉ¶ËÄå‰∏îÊòìÈîôÔºåËÄå MyBatis ÁöÑÂä®ÊÄÅ SQL ÂèØ‰ª•ËÆ©Êàë‰ª¨ÊëÜËÑ±ËøôÁßçÁóõËã¶ÔºåÁÆÄÂçïËÄåÂèàÈ´òÊïàÁöÑ‰π¶ÂÜô SQL„ÄÇ</p>
<p>MyBatis Âä®ÊÄÅ SQL Áî± OGNL Ë°®ËææÂºèÂíåÊù°‰ª∂Ê†áÁ≠æ‰∏§ÈÉ® ÂàÜÁªÑÊàêÔºåÊàë‰ª¨Â∞Ü‰ºöÂàÜ‰∏∫Â§ö‰∏™Â∞èËäÇËøõË°å‰ªãÁªç„ÄÇ</p>
<p>OGNL Ë°®ËææÂºèÊòØÂä®ÊÄÅ SQL ÁöÑÂü∫Á°ÄÔºåÂ¶ÇÊûú‰Ω†Ëøò‰∏ç‰∫ÜËß£ÔºåËØ∑Âä°ÂøÖÁÇπÂáªÂ≠¶‰π†‰∏Ä‰∏ã„ÄÇÊù°‰ª∂Ê†áÁ≠æÈÉ®ÂàÜÊàë‰ª¨Â∞Ü‰ºöÂú®<code>Âõõ‰∏™</code>Â∞èËäÇ‰∏≠ÂàÜÂà´‰ªãÁªçÔºåÂÆÉ‰ª¨ÂàÜÂà´ÊòØMyBatis if ÂíåÂ§öÊï∞ÊçÆÂ∫ìÊîØÊåÅÔºàÊú¨Â∞èËäÇÔºâÔºåMyBatis chooseÂíåbindÂ∞èËäÇÔºåMyBatis where„ÄÅset„ÄÅtrimÂ∞èËäÇÂíåMyBatis foreachÂ∞èËäÇ„ÄÇ</p>
<p>Êú¨Â∞èËäÇÔºåÊàë‰ª¨ÂÖàÊù•Â≠¶‰π†ÊúÄÂü∫Á°ÄÁöÑÊù°‰ª∂Ê†áÁ≠æ ifÔºå‰ª•ÂèäÂ¶Ç‰Ωï‰ΩøÁî® if Êù•ËÆ© MyBatis Êù•ÊîØÊåÅÂ§öÊï∞ÊçÆÂ∫ì„ÄÇ</p>
<h2 id="ÂÆö‰πâ-7">ÂÆö‰πâ</h2>
<blockquote>
<p><code>if</code> Â∏∏Áî®‰∫é where ËØ≠Âè•‰∏≠ÔºåÈÄöËøáÂà§Êñ≠ÂèÇÊï∞Êù•ÂÜ≥ÂÆöÂú® select ËØ≠Âè•‰∏≠ÊòØÂê¶‰ΩøÁî®Êüê‰∏™Êü•ËØ¢Êù°‰ª∂ÔºåÊàñËÄÖÂú® update ËØ≠Âè•‰∏≠Âà§Êñ≠ÊòØÂê¶Êõ¥Êñ∞‰∏Ä‰∏™Â≠óÊÆµÔºåËøòÂèØ‰ª•Âú® insert ËØ≠Âè•‰∏≠ÂÜ≥ÂÆöÊòØÂê¶ÊèíÂÖ•‰∏Ä‰∏™Êª°Ë∂≥Êù°‰ª∂ÁöÑÂÄº„ÄÇ</p>
</blockquote>
<h2 id="ÂÆû‰æã-6">ÂÆû‰æã</h2>
<p>Êàë‰ª¨‰ª•‰∏Ä‰∏™ÂÆûÈôÖÁöÑ‰æãÂ≠êÊù•Áúã‰∏Ä‰∏ã if ÊòØÂ¶Ç‰ΩïÂ∑•‰ΩúÁöÑ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&#34;selectUserByAgeAndScore&#34;</span> <span class="na">parameterType=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span> <span class="na">resultMap=</span><span class="s">&#34;userMap&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  SELECT * FROM imooc_user
</span></span><span class="line"><span class="cl">  WHERE age = #{age}
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&#34;score != null&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    AND score = #{score}
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/if&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú® if Ê†áÁ≠æ‰∏≠Ôºåtest Â±ûÊÄßÊòØ OGNL ÁöÑÂà§Êñ≠Ë°®ËææÂºè„ÄÇ</p>
<p>selectUserByAgeAndScore ÁöÑ‰ΩúÁî®ÊòØÈÄöËøáÁî®Êà∑Âπ¥ÈæÑÂíåÁßØÂàÜÊù•Êü•ËØ¢Áî®Êà∑ÔºåÂΩì score ÂÄº‰∏∫ null Êó∂Ôºåif Âà§Êñ≠‰∏çÊàêÁ´ãÔºåÊ≠§Êó∂ÁîüÊàêÁöÑ SQL ËØ≠Âè•‰∏∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">imooc_user</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ËÄåÂΩì if ÊàêÁ´ãÊó∂ÔºåÁîüÊàêÁöÑ SQL ËØ≠Âè•‰∏∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">imooc_user</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÄöËøáËøôÊ†∑Êù°‰ª∂Âà§Êñ≠ÊñπÂºèÔºåMyBatis ËÉΩÊ†πÊçÆÂÆûÈôÖÊÉÖÂÜµÊù•Âä®ÊÄÅÁîüÊàê SQL ËØ≠Âè•„ÄÇ</p>
<h2 id="ÂÆûË∑µ-6">ÂÆûË∑µ</h2>
<h3 id="‰æã1Âä®ÊÄÅÊü•ËØ¢Áî®Êà∑">‰æã1„ÄÅÂä®ÊÄÅÊü•ËØ¢Áî®Êà∑</h3>
<p>ËØ∑‰ΩøÁî® MyBatis ÂÆåÊàêÂØπ imooc_user Ë°®Âä®ÊÄÅÊü•ËØ¢Áî®Êà∑ÁöÑÂäüËÉΩÔºå username‰∏∫ÂøÖÈ°ªÁöÑÊü•ËØ¢Êù°‰ª∂ÔºåÂπ¥ÈæÑÂíåÁßØÂàÜËã•‰∏∫ null Âàô‰∏ç‰ΩøÁî®ËØ•Â≠óÊÆµËøõË°åËøáÊª§„ÄÇ</p>
<p><strong>ÂàÜÊûêÔºö</strong></p>
<p>ÊåâÁÖß MyBatis ÁöÑÂºÄÂèëÊ®°ÂºèÔºåÂÖàÂú® UserMapper.xml Êñá‰ª∂‰∏≠Ê∑ªÂä†Âä®ÊÄÅÊü•ËØ¢Áî®Êà∑ÁöÑ select Ê†áÁ≠æÔºåÁÑ∂ÂêéÂú® UserMapper.java ‰∏≠Â¢ûÂä†‰∏äÂØπÂ∫îÁöÑÊñπÊ≥ï„ÄÇ</p>
<p><strong>Ê≠•È™§Ôºö</strong></p>
<p>È¶ñÂÖàÔºåÂú® UserMapper.xml ‰∏≠Ê∑ªÂä† select Ê†áÁ≠æÔºåÂπ∂Âú®Ê†áÁ≠æ‰∏≠ÂÜôÂÖ• SQLÔºå‰ΩøÁî® if Êù•Âà§Êñ≠Â±ûÊÄßÂÄºÊòØÂê¶‰∏∫ nullÔºåËã•‰∏∫ nullÔºåÂàô‰∏ç‰ΩøÁî®ËØ•Â≠óÊÆµËøõË°åÊü•ËØ¢„ÄÇÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&#34;selectUserByNameCondition&#34;</span> <span class="na">parameterType=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="na">resultType=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  SELECT * FROM imooc_user
</span></span><span class="line"><span class="cl">  WHERE username = #{username}
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&#34;age != null&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    AND age = #{age}
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/if&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&#34;score != null&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    AND score = #{score}
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/if&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÄöËøá if ÂØπÂ±ûÊÄßÁöÑÂà§Êñ≠ÔºåSQL ÁöÑËøáÊª§Êù°‰ª∂Â∞±‰ºöÂèëÁîüÁõ∏Â∫îÁöÑÂèòÂåñ„ÄÇ</p>
<p>ÁÑ∂ÂêéÂú® UserMapper.java ‰∏≠Ê∑ªÂä†‰∏äÂØπÂ∫îÁöÑÊé•Âè£ÊñπÊ≥ïÔºåÊñπÊ≥ïÊé•Âèó UserÂØπË±°‰Ωú‰∏∫ÂèÇÊï∞„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ahao.mybatis.mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.ahao.mybatis.model.User</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@Mapper</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">   <span class="n">User</span> <span class="nf">selectUserByNameCondition</span><span class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÁªìÊûúÔºö</strong></p>
<p>ÈÄöËøáÂ¶Ç‰∏ã‰ª£Á†ÅÔºåÊàë‰ª¨ËøêË°å selectUserByNameCondition Ëøô‰∏™ÊñπÊ≥ï„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">UserMapper</span> <span class="n">userMapper</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">getMapper</span><span class="o">(</span><span class="n">UserMapper</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">User</span> <span class="n">condition</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="n">condition</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">&#34;pedro&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">condition</span><span class="o">.</span><span class="na">setScore</span><span class="o">(</span><span class="n">200</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">User</span> <span class="n">pedro</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectUserByNameCondition</span><span class="o">(</span><span class="n">condition</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">pedro</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>condition ÂØπË±° username Âíå score Â±ûÊÄßÂùá‰∏ç‰∏∫Á©∫ÔºåËÄå age Â±ûÊÄß‰∏∫Á©∫ÔºåÂõ†Ê≠§ÊúÄÂêéÊâÄÊâßË°åÁöÑ SQL ‰∏∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">imooc_user</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">username</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="w"> 
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÊàêÂäüÂêéÔºåÁªìÊûú‰∏∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">User<span class="o">{</span><span class="nv">id</span><span class="o">=</span>2, <span class="nv">username</span><span class="o">=</span><span class="s1">&#39;pedro&#39;</span>, <span class="nv">age</span><span class="o">=</span>24, <span class="nv">score</span><span class="o">=</span>200<span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="Â§öÊï∞ÊçÆÂ∫ìÊîØÊåÅ">Â§öÊï∞ÊçÆÂ∫ìÊîØÊåÅ</h2>
<p>MyBatis ÂèØ‰ª•Ê†πÊçÆ‰∏çÂêåÁöÑÊï∞ÊçÆÂ∫ìÂéÇÂïÜÊâßË°å‰∏çÂêåÁöÑËØ≠Âè•ÔºåËøôÁßçÂ§öÂéÇÂïÜÁöÑÊîØÊåÅÊòØÂü∫‰∫éÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑ databaseId„ÄÇ</p>
<h3 id="ÈÖçÁΩÆ">ÈÖçÁΩÆ</h3>
<p>È¶ñÂÖàÂú® MyBatis ÁöÑÂÖ®Â±ÄÈÖçÁΩÆÊñá‰ª∂‰∏≠Ê∑ªÂä†Â¶Ç‰∏ãÈÖçÁΩÆÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE configuration
</span></span></span><span class="line"><span class="cl"><span class="cp">  PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">  &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;databaseIdProvider</span> <span class="na">type=</span><span class="s">&#34;DB_VENDOR&#34;</span> <span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú® configuration ‰∏≠Âä†ÂÖ• databaseIdProvider ÂêéÔºåËøòÈúÄË¶ÅÂú® databaseIdProvider Ê†áÁ≠æ‰∏≠Ê∑ªÂä†‰∏äÈúÄË¶Å‰ΩøÁî®Âà∞ÁöÑÊï∞ÊçÆÂ∫ìÂêçÁß∞ÔºåÂ¶ÇÔºöSQL Server„ÄÇÊØè‰∏Ä‰∏™ property Â±ûÊÄßÈÉΩ‰ª£Ë°®‰∫Ü‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÔºåname Ë°®Á§∫Êï∞ÊçÆÂ∫ìÂéÇÂïÜÂêçÁß∞Ôºåvalue Áî®Êù•ËÆæÁΩÆÂà´Âêç„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE configuration
</span></span></span><span class="line"><span class="cl"><span class="cp">  PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">  &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;databaseIdProvider</span> <span class="na">type=</span><span class="s">&#34;DB_VENDOR&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;SQL Server&#34;</span> <span class="na">value=</span><span class="s">&#34;sqlserver&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;MySQL&#34;</span> <span class="na">value=</span><span class="s">&#34;mysql&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;PostgreSQL&#34;</span> <span class="na">value=</span><span class="s">&#34;postgre&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/databaseIdProvider&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="‰ΩøÁî®">‰ΩøÁî®</h3>
<p>ÈÖçÁΩÆÂÆåÊØïÂêéÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•Âú® mapper xml Êñá‰ª∂‰∏≠ÔºåÈÄöËøá if Êù•Âà§Êñ≠ÂΩìÂâçÁöÑÊï∞ÊçÆÂ∫ìÂéÇÂïÜÔºå‰ªéËÄåÂä®ÊÄÅÁîüÊàê‰∏çÂêåÊï∞ÊçÆÂ∫ìÁöÑ SQL„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåPostgreSQL ÊîØÊåÅ‰ΩøÁî® <code>||</code>Êù•ÊãºÊé•Â≠óÁ¨¶‰∏≤ÔºåËÄå MySQL ÈúÄË¶Å‰ΩøÁî® <code>concat</code>ÂáΩÊï∞Êù•ÊãºÊé•Â≠óÁ¨¶‰∏≤„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÂ¶ÇÊûúÂú®Ê®°Á≥äÊü•ËØ¢ÁöÑÊó∂ÂÄôÔºå‰∏çÂêåÁöÑÊï∞ÊçÆÂ∫ìÂéÇÂïÜÈúÄË¶Å‰∏çÂêåÁöÑ SQL ËØ≠Âè•ÔºåÈÄöËøá if Êù•Âà§Êñ≠Êï∞ÊçÆÂ∫ìÂéÇÂïÜÊù•ÁîüÊàêÂØπ‰∫éÁöÑ SQL ËØ≠Âè•„ÄÇ</p>
<p>Â¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&#34;selectUserByLikeName&#34;</span> <span class="na">resultType=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  SELECT * FROM imooc_user
</span></span><span class="line"><span class="cl">  WHERE username LIKE
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&#34;_databaseId == &#39;mysql&#39;&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    CONCAT(&#39;%&#39;,#{username},&#39;%&#39;)
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/if&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&#34;_databaseId == &#39;postgre&#39;&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    &#39;%&#39; || #{username} || &#39;%&#39;
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/if&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê≥®ÊÑèÔºåËøôÈáå _databaseId ÂèÇÊï∞ÊòØÁî± MyBatis Êèê‰æõÁöÑÂÜÖÁΩÆÂèÇÊï∞ÔºåÂØπÂ∫î‰∫é databaseIdProvider ‰∏≠ÈÖçÁΩÆÁöÑÊï∞ÊçÆÂ∫ìÂêçÁß∞„ÄÇ</p>
<p>ÈÄöËøá databaseIdProvider ÈÖçÁΩÆÔºåÂç≥Êó∂Êï∞ÊçÆÂ∫ìÂéÇÂïÜ‰πãÈó¥Â≠òÂú®Â∑ÆÂºÇÔºå‰ΩÜ‰ªçÁÑ∂ÂèØ‰ª•ÈÄöËøáÂä®ÊÄÅ SQL ÁöÑÂΩ¢ÂºèÊù•ÊîØÊåÅÂ§öÊï∞ÊçÆÂ∫ì„ÄÇ</p>
<h2 id="Â∞èÁªì-9">Â∞èÁªì</h2>
<ul>
<li>if ÁÆÄÂçï‰∏îÂ•ΩÁî®ÔºåÊòØÂä®ÊÄÅ SQL ‰∏≠ÁöÑÊúÄÂü∫Á°ÄÁöÑÊ†áÁ≠æÔºå‰∏ÄÁúã‰æø‰ºö„ÄÇ</li>
<li>Â§öÊï∞ÊçÆÂ∫ìÊîØÊåÅÁöÑÂ∫îÁî®Âú∫ÊôØÂÖ∂ÂÆûËæÉÂ∞ëÔºå‰ΩÜÂ¶ÇÊûúÁúüÁöÑÈúÄË¶ÅÔºå‰πüÂèØÈÄöËøá MyBatis Êù•Êñπ‰æøÁöÑÂÆûÁé∞„ÄÇ</li>
</ul>
<h1 id="mybatis-choose-Âíå-bind">MyBatis choose Âíå bind</h1>
<h2 id="ÂâçË®Ä-10">ÂâçË®Ä</h2>
<p>Âú®‰∏ä‰∏ÄÂ∞èËäÇ‰∏≠ÔºåÊàë‰ª¨‰ªãÁªç‰∫Ü MyBatis Âä®ÊÄÅ SQL ‰∏≠ÊúÄÂü∫Á°ÄÁöÑÊ†áÁ≠æ‚Äî‚Äîif Ê†áÁ≠æÔºåÊú¨Â∞èËäÇÊàë‰ª¨Â∞Ü‰∏ÄËµ∑Â≠¶‰π† choose Âíå bind Ê†áÁ≠æ„ÄÇ</p>
<p>choose Ê†áÁ≠æÊòØ if Ê†áÁ≠æÁöÑÂ¢ûÂº∫ÁâàÔºåÈÄÇÁî®‰∫éÊõ¥Âä†Â§çÊùÇÁöÑÊù°‰ª∂Âà§Êñ≠ÈÄªËæëÔºõËÄåbind Ê†áÁ≠æÂàôÂèØ‰ª•Âú® OGNL ‰∏ä‰∏ãÊñáÁéØÂ¢É‰∏≠Êñ∞ÁªëÂÆö‰∏Ä‰∏™ÂèòÈáèÔºå‰æõÂêéÈù¢ÁöÑ SQL ‰ΩøÁî®„ÄÇ</p>
<h2 id="ÂÆö‰πâ-8">ÂÆö‰πâ</h2>
<blockquote>
<p><code>choose</code> Ê†áÁ≠æÁõ∏ÂΩì‰∫éÁºñÁ®ãËØ≠Ë®Ä if‚Ä¶else ËØ≠Âè•ÔºåÁî®‰∫éÂä®ÊÄÅ SQL ‰∏≠ÁöÑÂ§öÊù°‰ª∂Âà§Êñ≠ÔºåÊòØ if Ê†áÁ≠æÁöÑÂ¢ûÂº∫Áâà„ÄÇ</p>
<p><code>bind</code> Ê†áÁ≠æÂèØ‰ª•Âú®Âä®ÊÄÅ SQL ‰∏≠ÈÄöËøá OGNL Ë°®ËææÂºèÊù•ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂèòÈáèÁªëÂÆöÂà∞‰∏ä‰∏ãÊñá‰∏≠Ôºå‰æõÂêéÁª≠ÁöÑ SQL ‰ΩøÁî®„ÄÇ</p>
</blockquote>
<h2 id="ÂÆû‰æã-7">ÂÆû‰æã</h2>
<p>‰∏ãÈù¢ÊòØ‰∏Ä‰∏™ËûçÂêà‰∫Ü choose Âíå bind Ê†áÁ≠æÁöÑÂÆû‰æãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&#34;selectUserByLikeName&#34;</span> <span class="na">resultType=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  SELECT * FROM imooc_user
</span></span><span class="line"><span class="cl">  WHERE username LIKE
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;choose&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">&#34;_databaseId == &#39;mysql&#39;&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">      CONCAT(&#39;%&#39;,#{username},&#39;%&#39;)
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/when&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">&#34;_databaseId == &#39;postgre&#39;&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">      &#39;%&#39; || #{username} || &#39;%&#39;
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/when&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;otherwise&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;bind</span> <span class="na">name=</span><span class="s">&#34;usernameLike&#34;</span> <span class="na">value=</span><span class="s">&#34;&#39;%&#39; + username + &#39;%&#39;&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">      #{usernameLike}
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/otherwise&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/choose&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÄöËøá choose Ê†áÁ≠æÊù•Âà§Êñ≠ÂΩìÂâçÁöÑÊï∞ÊçÆÂ∫ìÂéÇÂïÜÔºåÂ¶ÇÊûúÊòØ MySQL Êï∞ÊçÆÂ∫ìÔºåÂàôË∞ÉÁî®<code>CONCAT</code>ÂáΩÊï∞Êù•ÊãºÊé• % Âíå usernameÔºåÂ¶ÇÊûúÊòØ PostgreSQL Êï∞ÊçÆÂ∫ìÔºåÂàô‰ΩøÁî®Êìç‰ΩúÁ¨¶<code>||</code>Êù•ÊãºÊé•ÔºåÂ¶ÇÊûúÊòØÂÖ∂ÂÆÉÁ±ªÂûãÁöÑÊï∞ÊçÆÂ∫ìÔºåÂàôÁõ¥Êé•ÈÄöËøá OGNL Ë°®ËææÂºèÊù•ÁªëÂÆö‰∏Ä‰∏™Êñ∞ÁöÑÂèòÈáè usernameLike„ÄÇ</p>
<p>Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºåchoose ÊòØ‰∏Ä‰∏™Êù°‰ª∂ÈÄâÊã©Ê†áÁ≠æÔºåÁ¨¨‰∏Ä‰∏™ when Áõ∏ÂΩì‰∫é if Âà§Êñ≠ÔºåÁ¨¨‰∫å‰∏™ when Áõ∏ÂΩì‰∫é else ifÔºåÊúÄÂêéÁöÑ otherwise Áõ∏ÂΩì‰∫é else„ÄÇÊØîËµ∑ if Ê†áÁ≠æÔºåchoose Ê†áÁ≠æÊó†ÁñëÊõ¥‰∏∫ÊòìÁî®ÔºåÈÄÇÁî®‰∫éÂêå‰∏ÄÊù°‰ª∂ÁöÑÂ§öÊ¨°Âà§Êñ≠ÈÄªËæë„ÄÇ</p>
<h2 id="ÂÆûË∑µ-7">ÂÆûË∑µ</h2>
<h3 id="‰æã1-Â§öÊù°‰ª∂Êü•ËØ¢Áî®Êà∑">‰æã1. Â§öÊù°‰ª∂Êü•ËØ¢Áî®Êà∑</h3>
<p>ËØ∑‰ΩøÁî® MyBatis ÂÆåÊàêÂØπ imooc_user Ë°®Â§öÊù°‰ª∂Êü•ËØ¢Áî®Êà∑ÁöÑÂäüËÉΩÔºåÂ¶ÇÊûú id ‰∏ç‰∏∫Á©∫ÂàôÁõ¥Êé•‰ΩøÁî® id Êü•ËØ¢Áî®Êà∑ÔºåÂê¶Âàô‰ΩøÁî® username Êü•ËØ¢Áî®Êà∑ÔºåÂ¶ÇÊûú username ‰πü‰∏∫Á©∫ÔºåÂàôÁõ¥Êé•Êü•ËØ¢ÂÖ®ÈÉ®Áî®Êà∑„ÄÇ</p>
<p><strong>ÂàÜÊûêÔºö</strong></p>
<p>ÊåâÁÖß MyBatis ÁöÑÂºÄÂèëÊ®°ÂºèÔºåÈúÄÂÖàÂú® UserMapper.xml Êñá‰ª∂‰∏≠Ê∑ªÂä†Â§öÊù°‰ª∂Êü•ËØ¢Áî®Êà∑ÁöÑ select Ê†áÁ≠æÔºåÁÑ∂ÂêéÂú® UserMapper.java ‰∏≠Ê∑ªÂä†‰∏äÂØπÂ∫îÁöÑÊñπÊ≥ï„ÄÇ</p>
<p><strong>Ê≠•È™§Ôºö</strong></p>
<p>È¶ñÂÖàÔºåÂú® UserMapper.xml ‰∏≠Ê∑ªÂä† select Ê†áÁ≠æÔºåÂπ∂Âú®Ê†áÁ≠æ‰∏≠ÂÜôÂÖ• SQLÔºå‰ΩøÁî® choose ‰∏≠ÁöÑ when Ê†áÁ≠æÊù•‰æùÊ¨°Âà§Êñ≠ id Âíå username ÊòØÂê¶‰∏∫ nullÔºåËã•Âùá‰∏∫ nullÔºåÂàôÂú® otherwise ‰∏≠Ê∑ªÂä†‰∏ä‰∏Ä‰∏™Ê∞∏ÂÅáÁöÑÂÄº„ÄÇÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&#34;selectUserByIdOrName&#34;</span> <span class="na">resultType=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  SELECT * FROM imooc_user
</span></span><span class="line"><span class="cl">  WHERE
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;choose&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">&#34;id != null&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">      id = #{id}
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/when&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;when</span> <span class="na">test=</span><span class="s">&#34;username != null&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">      username = #{username}
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/when&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;otherwise&gt;</span>
</span></span><span class="line"><span class="cl">      1 = 0
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/otherwise&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/choose&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÈáå‰ΩøÁî®‰∫Ü<code>1 = 0</code>‰Ωú‰∏∫Êù°‰ª∂Âà§Êñ≠ÁöÑÊ∞∏ÂÅáÂÄº„ÄÇ</p>
<p>ÁÑ∂ÂêéÂú® UserMapper.java ‰∏≠Ê∑ªÂä†‰∏äÂØπÂ∫îÁöÑÊé•Âè£ÊñπÊ≥ïÔºåÊñπÊ≥ïÊé•Âèó id Âíå username ‰∏§‰∏™ÂèÇÊï∞ÔºåÈÉΩÂèØ‰∏∫Á©∫„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ahao.mybatis.mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.ahao.mybatis.model.User</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@Mapper</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">   <span class="n">User</span> <span class="nf">selectUserByIdOrName</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;id&#34;</span><span class="o">)</span> <span class="n">Integer</span> <span class="n">id</span><span class="o">,</span> <span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;username&#34;</span><span class="o">)</span> <span class="n">String</span> <span class="n">username</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÁªìÊûúÔºö</strong></p>
<p>ÈÄöËøáÂ¶Ç‰∏ã‰ª£Á†ÅÔºåÊàë‰ª¨ËøêË°å selectUserByIdOrName Ëøô‰∏™ÊñπÊ≥ï„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">UserMapper</span> <span class="n">userMapper</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">getMapper</span><span class="o">(</span><span class="n">UserMapper</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">User</span> <span class="n">pedro</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectUserByIdOrName</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">pedro</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>id Âíå username ‰∏§‰∏™Â±ûÊÄßÂùá‰∏∫Á©∫ÔºåÂõ†Ê≠§ÊâÄÊâßË°åÁöÑ SQL ‰∏∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">imooc_user</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> 
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÊàêÂäüÂêéÔºåÁªìÊûú‰∏∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">null
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="‰æã2-Êü•ËØ¢Â∞èÂÜôÂêçÁß∞ÂÆ¢Êà∑">‰æã2. Êü•ËØ¢Â∞èÂÜôÂêçÁß∞ÂÆ¢Êà∑</h3>
<p>ËØ∑‰ΩøÁî® MyBatis ÂÆåÊàêÂØπ imooc_user Ë°®Êü•ËØ¢Â∞èÂÜôÂêçÁß∞ÂÆ¢Êà∑ÁöÑÂäüËÉΩÔºåÂ∞ÜÂêçÁß∞Â∞èÂÜôÂêéÂÜçËøõË°åÊü•ËØ¢„ÄÇ</p>
<p><strong>ÂàÜÊûêÔºö</strong></p>
<p>Âêå‰∏ä„ÄÇ</p>
<p><strong>Ê≠•È™§Ôºö</strong></p>
<p>È¶ñÂÖàÔºåÂú® UserMapper.xml ‰∏≠Ê∑ªÂä† select Ê†áÁ≠æÔºåÂπ∂Âú®Ê†áÁ≠æ‰∏≠ÂÜôÂÖ• SQLÔºå‰ΩøÁî® bind Ê†áÁ≠æÂ∞ÜÂèÇÊï∞Â∞èÂÜôÂåñÊàê‰∏Ä‰∏™Êñ∞ÁöÑÂèòÈáè lowercaseName„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&#34;selectUsernameLowercase&#34;</span> <span class="na">resultType=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;bind</span> <span class="na">name=</span><span class="s">&#34;lowercaseName&#34;</span> <span class="na">value=</span><span class="s">&#34;username.toLowercase&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">  SELECT * FROM imooc_user
</span></span><span class="line"><span class="cl">  WHERE username = #{lowercaseName}
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ÂêéÂú® UserMapper.java ‰∏≠Ê∑ªÂä†‰∏äÂØπÂ∫îÁöÑÊé•Âè£ÊñπÊ≥ïÔºåÊñπÊ≥ïÊé•Âèó username ‰∏Ä‰∏™ÂèÇÊï∞„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ahao.mybatis.mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.ahao.mybatis.model.User</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@Mapper</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">   <span class="n">User</span> <span class="nf">selectUsernameLowercase</span><span class="o">(</span><span class="n">String</span> <span class="n">username</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÁªìÊûúÔºö</strong></p>
<p>ÈÄöËøáÂ¶Ç‰∏ã‰ª£Á†ÅÔºåÊàë‰ª¨ËøêË°å selectUsernameLowercase Ëøô‰∏™ÊñπÊ≥ï„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">UserMapper</span> <span class="n">userMapper</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">getMapper</span><span class="o">(</span><span class="n">UserMapper</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">User</span> <span class="n">pedro</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectUsernameLowercase</span><span class="o">(</span><span class="s">&#34;PEDRO&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">pedro</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊàêÂäüÂêéÔºåÁªìÊûú‰∏∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">User<span class="o">{</span><span class="nv">id</span><span class="o">=</span>2, <span class="nv">username</span><span class="o">=</span><span class="s1">&#39;pedro&#39;</span>, <span class="nv">age</span><span class="o">=</span>24, <span class="nv">score</span><span class="o">=</span>200<span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="Â∞èÁªì-10">Â∞èÁªì</h2>
<ul>
<li>bind Ê†áÁ≠æËôΩÁÑ∂ÂèØ‰ª•ÈÄöËøá OGNL Ë°®ËææÂºèÂú®‰∏ä‰∏ãÊñá‰∏≠ÁªëÂÆö‰∏Ä‰∏™Êñ∞ÁöÑÂèòÈáèÔºå‰ΩÜÂú®ÂÆûÈôÖÂ∫îÁî®ÊâÄËßÅ‰∏çÂ§öÔºåÊàë‰ª¨Â∏åÊúõÂú®‰ª£Á†ÅÂ±ÇÈù¢‰∏äÂ§ÑÁêÜÂ•ΩÂèÇÊï∞ÔºåËøôÊ†∑Êó¢Êñπ‰æøÁª¥Êä§Ôºå‰πüÊõ¥ÊúâÂà©‰∫éËøÅÁßª„ÄÇ</li>
<li>choose Ê†áÁ≠æÊòØ‰∏Ä‰∏™Â¢ûÂº∫ÁâàÁöÑ if Ê†áÁ≠æÔºåÈÄÇÁî®‰∫éÊõ¥Âä†Â§çÊùÇÁöÑÈÄªËæëÂà§Êñ≠Âú∫ÊôØ„ÄÇ</li>
</ul>
<h1 id="mybatis-wheresettrim">MyBatis where„ÄÅset„ÄÅtrim</h1>
<h2 id="ÂâçË®Ä-11">ÂâçË®Ä</h2>
<p>Âú®ÂâçÈù¢ÁöÑÂ∞èËäÇ‰∏≠ÔºåÊàë‰ª¨‰∏ÄËµ∑Â≠¶‰π†‰∫Ü if Ê†áÁ≠æÔºåÂú®ÈÄöËøá if Âà§Êñ≠Âä®ÊÄÅÊèíÂÖ•ÊàñÊü•ËØ¢ÁöÑÊó∂ÂÄôÂÆπÊòì‰∫ßÁîüÂ§ö‰ΩôÁöÑÂâçÁºÄÔºàÂ¶Ç WHEREÔºâÊàñÂêéÁºÄÔºàÂ¶Ç , ÔºâÔºå‰∏∫‰∫ÜËß£ÂÜ≥ËøôÁ±ªÈóÆÈ¢ò MyBatis Êèê‰æõ‰∫Ü where„ÄÅset„ÄÅtrim ‰∏â‰∏™ÂÆûÁî®ÁöÑÊ†áÁ≠æ„ÄÇ</p>
<p>ÂÖ∂‰∏≠ where Âíå set Ê†áÁ≠æÈÉΩÊòØ trim Ê†áÁ≠æÁöÑ‰∏ÄÁßçÁâπÊÆäÊÉÖÂÜµÔºå‰∏çËøá‰ΩøÁî®È¢ëÁéáÈùûÂ∏∏È´òÔºåÂõ†Ê≠§Ë¢´ÂçïÁã¨ÂÆö‰πâÊàê‰∫ÜÊ†áÁ≠æ„ÄÇÊú¨Â∞èËäÇÊàë‰ª¨Â∞Ü‰∏ÄËµ∑Êù•Â≠¶‰π†ÂÆÉ‰ª¨„ÄÇ</p>
<h2 id="ÂÆö‰πâ-9">ÂÆö‰πâ</h2>
<blockquote>
<p><code>where</code>„ÄÅ<code>set</code>„ÄÅ<code>trim</code> ‰∏â‰∏™Ê†áÁ≠æÈÉΩÊòØ‰∏∫‰∫ÜËß£ÂÜ≥ MyBatis Âú®Âä®ÊÄÅÁîüÊàê SQL Êó∂Ôºå‰∫ßÁîü‰∫ÜÂ§ö‰ΩôÁöÑÂâçÁºÄÂíåÂêéÁºÄÁöÑÈóÆÈ¢ò„ÄÇ</p>
</blockquote>
<h2 id="ÂÆû‰æã-8">ÂÆû‰æã</h2>
<h3 id="where-ÂÆû‰æã">where ÂÆû‰æã</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&#34;selectUserByIdAndName&#34;</span> <span class="na">resultType=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  SELECT * FROM imooc_user
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;where&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&#34;id != null&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">      id = #{id}
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/if&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&#34;username != null&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">      AND username = #{username}
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/if&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/where&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºåid Âíå username ÂùáÈùûÂõ∫ÂÆöÁöÑËøáÊª§ÂèÇÊï∞ÔºåÂè™ÊúâÂΩìÂÖ∂‰∏ç‰∏∫ null Êó∂Êâç‰ºöÂä†ÂÖ•Âà∞ SQL ËØ≠Âè•‰∏≠„ÄÇÊ≠§Â§Ñ where Ê†áÁ≠æÁöÑ‰ΩúÁî®Â§ßÊ¶ÇÊúâÂ¶Ç‰∏ã 3 ‰∏™Ôºö</p>
<ol>
<li>Âú® id Âíå username ÈÉΩ‰∏∫Á©∫ÁöÑÊÉÖÂÜµ‰∏ãÔºåwhere Ê†áÁ≠æ‰∏ç‰ºö‰∫ßÁîü‰ªª‰Ωï SQL ‰ª£Á†ÅÊÆµÔºåÊúÄÂêéÁöÑ SQL ËØ≠Âè•‰∏∫Ôºö<code>SELECT * FROM imooc_user</code>Ôºõ</li>
<li>Âú® id ‰∏ç‰∏∫Á©∫Ôºåusername ‰∏∫Á©∫ÁöÑÊÉÖÂÜµ‰∏ãÔºåÊàñËÄÖÂú® id ‰∏ç‰∏∫Á©∫Ôºåusername ‰πü‰∏ç‰∏∫Á©∫ÁöÑÊÉÖÂÜµ‰∏ãÔºåwhere Ê†áÁ≠æ‰ºöËá™Âä®Áªô SQL ‰ª£Á†ÅÊÆµÊ∑ªÂä†‰∏ä WHERE ÂâçÁºÄÔºõ</li>
<li>Âú® id ‰∏∫Á©∫Ôºåusername ‰∏ç‰∏∫Á©∫ÁöÑÊÉÖÂÜµ‰∏ãÔºåwhere Ê†áÁ≠æ‰ºöËá™ÂÆöÂéªÈô§ AND ÂâçÁºÄÔºåÊ≠§Êó∂ÁîüÊàêÁöÑ SQL ËØ≠Âè•‰∏∫Ôºö <code>SELECT * FROM imooc_user WHERE username = ?</code>„ÄÇ</li>
</ol>
<h3 id="set-ÂÆû‰æã">set ÂÆû‰æã</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;update</span> <span class="na">id=</span><span class="s">&#34;updateUsernameAndScoreById&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  UPDATE imooc_user
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;set&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&#34;username != null&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">      username = #{username},
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/if&gt;</span>
</span></span><span class="line"><span class="cl">    id = #{id}
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/set&gt;</span>
</span></span><span class="line"><span class="cl">  WHERE id = #{id}
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/update&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>set Ê†áÁ≠æ‰ºöËá™Âä®Âú® SQL ËØ≠Âè•‰∏≠Ê∑ªÂä†‰∏äÁõ∏Â∫îÁöÑ SET ÂâçÁºÄÔºåÂπ∂Ê†πÊçÆÈáåÈù¢ÁöÑÊù°‰ª∂Âä®ÊÄÅÂú∞Ê∑ªÂä†Áõ∏Â∫îÁöÑÂ≠óÊÆµ„ÄÇ</p>
<p>Áî±‰∫é SQL update ÁöÑËØ≠Ê≥ïÈóÆÈ¢òÔºåËã• set Ê†áÁ≠æÈáåÈù¢Êù°‰ª∂Âùá‰∏çÊª°Ë∂≥ÔºåÊ≠§Êó∂ set Ê†áÁ≠æ‰πü‰∏ç‰ºöÊ∑ªÂä†‰∏ä SET ÂâçÁºÄÔºå‰ΩÜÊ≠§Êó∂ SQL ‰ºöÊä•ËØ≠Ê≥ïÈîôËØØÔºåÊâÄ‰ª• set Ê†áÁ≠æ‰∏≠ËøòÊòØÂæóÊúâ‰∏Ä‰∏™ÂøÖÁÑ∂Â≠òÂú®ÁöÑËµãÂÄº„ÄÇ</p>
<h3 id="trim-ÂÆû‰æã">trim ÂÆû‰æã</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;update</span> <span class="na">id=</span><span class="s">&#34;updateUsernameAndScoreById&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  UPDATE imooc_user
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;trim</span> <span class="na">prefix=</span><span class="s">&#34;SET&#34;</span> <span class="na">suffixOverrides=</span><span class="s">&#34;,&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&#34;username != null&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">      username = #{username},
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/if&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&#34;id != null&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">      id = #{id}
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/if&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/trim&gt;</span>
</span></span><span class="line"><span class="cl">  WHERE id = #{id}
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/update&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÈáåÁöÑ trim ÂÆû‰æãÂÆûÁé∞‰∫Ü‰∏é set ÂÆû‰æãÂêåÊ†∑ÁöÑÂäüËÉΩÔºåset Ê†áÁ≠æÊòØ trim Ê†áÁ≠æÁöÑ‰∏ÄÁßçÁâπÊÆäÊÉÖÂÜµ„ÄÇ</p>
<p>trim Ê†áÁ≠æÂÖ±Êúâ 4 ‰∏™Â±ûÊÄßÔºåÂÆÉ‰ª¨ÁöÑ‰ΩúÁî®ÂàÜÂà´Â¶Ç‰∏ãÔºö</p>
<ul>
<li><strong>prefixÔºö</strong> ÂâçÁºÄÂ±ûÊÄßÔºåËã•Ê†áÁ≠æÂÜÖ‰∏ç‰∏∫Á©∫ÂàôÂú® SQL ‰∏≠Ê∑ªÂä†‰∏äÂâçÁºÄÔºõ</li>
<li><strong>prefixOverridesÔºö</strong> ÂâçÁºÄË¶ÜÁõñÂ±ûÊÄßÔºåËã•Ê†áÁ≠æ‰∏≠ÊúâÂ§ö‰ΩôÁöÑÂâçÁºÄÔºåÂ∞Ü‰ºöË¢´Ë¶ÜÁõñÔºàÂÖ∂ÂÆûÂ∞±ÊòØ‰∏¢ÂºÉËØ•ÂâçÁºÄÔºâÔºõ</li>
<li><strong>suffixÔºö</strong> ÂêéÁºÄÂ±ûÊÄßÔºåËã•Ê†áÁ≠æÂÜÖ‰∏ç‰∏∫Á©∫ÂàôÂú® SQL ‰∏≠Ê∑ªÂä†‰∏äÂêéÁºÄÔºõ</li>
<li><strong>suffixOverridesÔºö</strong> ÂêéÁºÄË¶ÜÁõñÂ±ûÊÄßÔºåËã•Ê†áÁ≠æ‰∏≠ÊúâÂ§ö‰ΩôÁöÑÂêéÁºÄÔºåÂ∞Ü‰ºöË¢´Ë¶ÜÁõñÔºàÂÖ∂ÂÆûÂ∞±ÊòØ‰∏¢ÂºÉËØ•ÂêéÁºÄÔºâ„ÄÇ</li>
</ul>
<p>Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºåtrim Ê†áÁ≠æÁöÑÂâçÁºÄ‰∏∫<code>SET</code>ÔºåÂêéÁºÄË¶ÜÁõñÂ±ûÊÄß‰∏∫<code>,</code>ÔºåÊâÄ‰ª•Âú®Ê†áÁ≠æÂÜÖ‰∏ç‰∏∫Á©∫ÁöÑÊÉÖÂÜµ‰∏ãÁªô SQL ËØ≠Âè•Ê∑ªÂä†‰∫Ü SET ÂÖ≥ÈîÆÂ≠óÔºå‰∏îÊ†áÁ≠æÂÜÖËã•ÊúâÂ§ö‰ΩôÁöÑ<code>,</code>ÂêéÁºÄ‰πü‰ºöË¢´‰∏¢ÂºÉ„ÄÇ</p>
<h2 id="ÂÆûË∑µ-8">ÂÆûË∑µ</h2>
<h3 id="‰æã1-Âä®ÊÄÅÊèíÂÖ•Áî®Êà∑">‰æã1. Âä®ÊÄÅÊèíÂÖ•Áî®Êà∑</h3>
<p>ËØ∑‰ΩøÁî® MyBatis ÂÆåÊàêÂØπ imooc_user Ë°®Âä®ÊÄÅÊèíÂÖ•Áî®Êà∑ÁöÑÂäüËÉΩÔºåËã•Áî®Êà∑Â±ûÊÄßÂÄº‰∏ç‰∏∫ null ÂàôÊèíÂÖ•ËØ•Â≠óÊÆµÔºåÂê¶Âàô‰∏çÊèíÂÖ•Â≠óÊÆµ„ÄÇ</p>
<p><strong>ÂàÜÊûêÔºö</strong></p>
<p>ÊåâÁÖß MyBatis ÁöÑÂºÄÂèëÊ®°ÂºèÔºåÂÖàÂú® UserMapper.xml Êñá‰ª∂‰∏≠Ê∑ªÂä†Âä®ÊÄÅÊèíÂÖ•Áî®Êà∑ÁöÑ insert Ê†áÁ≠æÔºåÁÑ∂ÂêéÂú® UserMapper.java ‰∏≠Ê∑ªÂä†‰∏äÂØπÂ∫îÁöÑÊñπÊ≥ï„ÄÇ</p>
<p><strong>Ê≠•È™§Ôºö</strong></p>
<p>È¶ñÂÖàÔºåÂú® UserMapper.xml ‰∏≠Ê∑ªÂä† insert Ê†áÁ≠æÔºåÂπ∂Âú®Ê†áÁ≠æ‰∏≠ÂÜôÂÖ• SQLÔºå‰ΩøÁî® trim Ê†áÁ≠æÊù•Âä®ÊÄÅÂà§Êñ≠Â±ûÊÄßÊòØÂê¶‰∏∫Á©∫ÔºåËã•‰∏ç‰∏∫Á©∫ÂàôÊèíÂÖ•ËØ•Â≠óÊÆµ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;insert</span> <span class="na">id=</span><span class="s">&#34;insertUserDynamic&#34;</span> <span class="na">parameterType=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  INSERT INTO imooc_user
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;trim</span> <span class="na">prefix=</span><span class="s">&#34;(&#34;</span> <span class="na">suffix=</span><span class="s">&#34;)&#34;</span> <span class="na">suffixOverrides=</span><span class="s">&#34;,&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&#34;username != null&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">      username,
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/if&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&#34;age != null&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">      age,
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/if&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&#34;score != null&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">      score,
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/if&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/trim&gt;</span>
</span></span><span class="line"><span class="cl">  VALUES
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;trim</span> <span class="na">prefix=</span><span class="s">&#34;(&#34;</span> <span class="na">suffix=</span><span class="s">&#34;)&#34;</span> <span class="na">suffixOverrides=</span><span class="s">&#34;,&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&#34;username != null&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">      #{username},
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/if&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&#34;age != null&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">      #{age},
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/if&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;if</span> <span class="na">test=</span><span class="s">&#34;score != null&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">      #{score},
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/if&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/trim&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/insert&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÈáåÔºåÊàë‰ª¨‰ΩøÁî®‰∫Ü‰∏§‰∏™ trim Ê†áÁ≠æÔºå‰∏Ä‰∏™Áî®Êù•Âä®ÊÄÅÂÜôÂÖ•Â≠óÊÆµÂêçÔºåÂè¶‰∏Ä‰∏™Áî®Êù•Âä®ÊÄÅÂÜôÂÖ•Â≠óÊÆµÂÄºÔºõtrim Ê†áÁ≠æÁöÑÂâçÁºÄ‰∏∫<code>(</code>,ÂêéÁºÄ‰∏∫<code>)</code>ÔºåÂΩìÂá∫Áé∞Â§ö‰ΩôÁöÑ<code>,</code>Êó∂Ôºå‰ºöÈÄöËøáÂêéÁºÄË¶ÜÁõñÂ±ûÊÄßÊù•‰∏¢ÂºÉ„ÄÇ</p>
<p>ÁÑ∂ÂêéÂú® UserMapper.java ‰∏≠Ê∑ªÂä†‰∏äÂØπÂ∫îÁöÑÊé•Âè£ÊñπÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ahao.mybatis.mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.ahao.mybatis.model.User</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@Mapper</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">   <span class="kt">int</span> <span class="nf">insertUserDynamic</span><span class="o">(</span><span class="n">User</span> <span class="n">user</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÁªìÊûúÔºö</strong></p>
<p>ÈÄöËøáÂ¶Ç‰∏ã‰ª£Á†ÅÔºåÊàë‰ª¨ËøêË°å insertUserDynamic Ëøô‰∏™ÊñπÊ≥ï„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">UserMapper</span> <span class="n">userMapper</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">getMapper</span><span class="o">(</span><span class="n">UserMapper</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="n">user</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">&#34;dynamic&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">user</span><span class="o">.</span><span class="na">setScore</span><span class="o">(</span><span class="n">100</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">rows</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">insertUserDynamic</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">rows</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊàêÂäüÂêéÔºåÁªìÊûú‰∏∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="m">1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>TIPS:</strong> Ê≥®ÊÑèÔºåÂú® username„ÄÅscore Âíå age Âùá‰∏∫ null Êó∂Ôºå insertUserDynamic ‰ºöÊä• SQL ËØ≠Ê≥ïÈîôËØØÔºå‰ΩÜÁêÜËÆ∫‰∏äËã•ÊòØÊâÄÊúâÂ±ûÊÄßÂùá‰∏∫Á©∫ÔºåÈÇ£‰πà‰πü‰∏çÂ∫îËØ•ÊèíÂÖ•„ÄÇ</p>
</blockquote>
<h2 id="Â∞èÁªì-11">Â∞èÁªì</h2>
<ul>
<li>where„ÄÅset ‰ª•Âèä trim Â∞Ü MyBatis ÁöÑÂä®ÊÄÅ SQL ÂèëÊå•Âà∞‰∫ÜÊûÅËá¥Ôºå‰∏∫ÂºÄÂèëËÄÖËäÇÁúÅ‰∫ÜÂ§ßÈáèÁöÑÁ≤æÂäõÂíåÊó∂Èó¥„ÄÇ</li>
<li>trim Ê†áÁ≠æÊòØ MyBatis ‰∏≠ÊúÄ‰∏∫Âº∫Â§ßÁöÑ‰∏Ä‰∏™Ê†áÁ≠æÔºå‰ΩøÁî®ÂÆÉÂèØ‰ª•Êñπ‰æøÁöÑÂÆåÊàê SQL Âä®ÊÄÅÊèíÂÖ•ÂíåÂä®ÊÄÅÊõ¥Êñ∞„ÄÇ</li>
</ul>
<h1 id="mybatis-foreach">MyBatis foreach</h1>
<h2 id="ÂâçË®Ä-12">ÂâçË®Ä</h2>
<p>Âú® MyBatis ‰∏≠ÔºåÂ∏∏Â∏∏‰ºöÈÅáÂà∞ÈõÜÂêàÁ±ªÂûãÁöÑÂèÇÊï∞ÔºåËôΩÁÑ∂Êàë‰ª¨ÂèØ‰ª•ÈÄöËøá OGNL Ë°®ËææÂºèÊù•ËÆøÈóÆÈõÜÂêàÁöÑÊüê‰∏Ä‰∏™ÂÖÉÁ¥†Ôºå‰ΩÜÊòØ OGNL Ë°®ËææÂºèÊó†Ê≥ïÈÅçÂéÜÈõÜÂêà„ÄÇforeach Ê†áÁ≠æÂ∞±ÊòØ‰∏ìÈó®Áî®Êù•Ëß£ÂÜ≥ËøôÁ±ªÈóÆÈ¢òÁöÑÔºåÊú¨Â∞èËäÇÊàë‰ª¨Â∞±Êù•‰∏ÄËµ∑Â≠¶‰π†ÂÆÉ„ÄÇ</p>
<h2 id="ÂÆö‰πâ-10">ÂÆö‰πâ</h2>
<blockquote>
<p><code>foreach</code> Ê†áÁ≠æÁî®Êù•ÈÅçÂéÜÊï∞ÁªÑ„ÄÅÂàóË°®Âíå Map Á≠âÈõÜÂêàÂèÇÊï∞ÔºåÂ∏∏‰∏é in ÂÖ≥ÈîÆÂ≠óÊê≠ÈÖç‰ΩøÁî®„ÄÇ</p>
</blockquote>
<h2 id="ÂÆû‰æã-9">ÂÆû‰æã</h2>
<p>Êàë‰ª¨‰ª• 3 ‰∏™‰æãÂ≠êÊù•Áúã‰∏ÄÁúã foreach ÊòØÂ¶Ç‰ΩïÈÅçÂéÜÂàóË°®„ÄÅÊï∞ÁªÑÂíå Map ÁöÑ„ÄÇ</p>
<h3 id="ÈÅçÂéÜÂàóË°®">ÈÅçÂéÜÂàóË°®</h3>
<p>xmlÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&#34;selectUserInIds&#34;</span> <span class="na">resultType=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  SELECT * FROM imooc_user
</span></span><span class="line"><span class="cl">  WHERE id IN
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;foreach</span> <span class="na">collection=</span><span class="s">&#34;list&#34;</span> <span class="na">open=</span><span class="s">&#34;(&#34;</span> <span class="na">close=</span><span class="s">&#34;)&#34;</span> <span class="na">separator=</span><span class="s">&#34;,&#34;</span> <span class="na">item=</span><span class="s">&#34;item&#34;</span> <span class="na">index=</span><span class="s">&#34;index&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    #{item}
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/foreach&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>JavaÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="nf">selectUserInIds</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">ids</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏äÈù¢ÊòØ selectUserInIds ÊñπÊ≥ïÂú® java Âíå xml ‰∏≠ÂØπÂ∫îÁöÑ‰ª£Á†ÅÊÆµ„ÄÇ</p>
<p>foreach Ê†áÁ≠æÂÖ±Êúâ 6 ‰∏™Â±ûÊÄßÔºåÂÆÉ‰ª¨ÁöÑ‰ΩúÁî®ÂàÜÂà´‰∏∫Ôºö</p>
<ul>
<li><strong>collectionÔºö</strong> Ë¢´ÈÅçÂéÜÈõÜÂêàÂèÇÊï∞ÁöÑÂêçÁß∞ÔºåÂ¶Ç listÔºõ</li>
<li><strong>openÔºö</strong> ÈÅçÂéÜÂºÄÂßãÊó∂ÊèíÂÖ•Âà∞ SQL ‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÂ¶Ç ( Ôºõ</li>
<li><strong>closeÔºö</strong> ÈÅçÂéÜÁªìÊùüÊó∂ÊèíÂÖ•Âà∞ SQL ‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÂ¶Ç ) Ôºõ</li>
<li><strong>separatorÔºö</strong> ÂàÜÂâ≤Á¨¶ÔºåÂú®ÊØè‰∏™ÂÖÉÁ¥†ÁöÑÂêéÈù¢ÈÉΩ‰ºöÊèíÂÖ•ÂàÜÂâ≤Á¨¶Ôºõ</li>
<li><strong>itemÔºö</strong> ÂÖÉÁ¥†ÂÄºÔºåÈÅçÂéÜÈõÜÂêàÊó∂ÂÖÉÁ¥†ÁöÑÂÄºÔºõ</li>
<li><strong>indexÔºö</strong> ÂÖÉÁ¥†Â∫èÂàóÔºåÈÅçÂéÜÈõÜÂêàÊó∂ÂÖÉÁ¥†ÁöÑÂ∫èÂàó„ÄÇ</li>
</ul>
<p>ÂΩì selectUserInIds ÊñπÊ≥ïÁöÑÂèÇÊï∞ ids ‰∏∫<code>Arrays.asList(1, 2)</code>Êó∂ÔºåÁîüÊàêÁöÑ SQL ËØ≠Âè•‰∏∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">SELECT * FROM imooc_user WHERE id IN ( 1 , 2 ) 
</span></span></code></pre></td></tr></table>
</div>
</div><p>foreach Ê†áÁ≠æÁöÑ collection Â±ûÊÄßÂú®Êé•ÂèóÂèÇÊï∞ÂêçÊúâ‰∏§ÁßçÊÉÖÂÜµÔºö‰∏Ä„ÄÅÂåøÂêçÂèÇÊï∞ÔºåÂΩìÂú® java ÊñπÊ≥ï‰∏≠Ê≤°ÊúâÈÄöËøá @Param Ê≥®Ëß£ÊåáÂÆöÂèÇÊï∞ÂêçÊó∂ÔºåÂàóË°®Á±ªÂûãÁöÑ‰ΩøÁî®ÈªòËÆ§ÂèÇÊï∞Âêç list„ÄÇ‰∫å„ÄÅÂÖ∑ÂêçÂèÇÊï∞Ôºåjava ÊñπÊ≥ï‰∏≠‰ΩøÁî®‰∫Ü@Param Ê≥®Ëß£ÊåáÂÆö‰∫ÜÂèÇÊï∞ÂêçÁß∞ÔºåÂàô foreach ‰∏≠ÁöÑ collection Â±ûÊÄßÂøÖÈ°ª‰∏∫ÂèÇÊï∞ÂêçÔºåÂ¶ÇÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="nf">selectUserInIds</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;ids&#34;</span><span class="o">)</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">ids</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">foreach</span> <span class="n">collection</span><span class="o">=</span><span class="s">&#34;ids&#34;</span> <span class="n">open</span><span class="o">=</span><span class="s">&#34;(&#34;</span> <span class="n">close</span><span class="o">=</span><span class="s">&#34;)&#34;</span> <span class="n">separator</span><span class="o">=</span><span class="s">&#34;,&#34;</span> <span class="n">item</span><span class="o">=</span><span class="s">&#34;item&#34;</span> <span class="n">index</span><span class="o">=</span><span class="s">&#34;index&#34;</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="err">#</span><span class="o">{</span><span class="n">item</span><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">foreach</span><span class="o">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êàë‰ª¨Êé®Ëçê‰Ω†‰∏∫ÂàóË°®Á±ªÂûãÂèÇÊï∞Áî®Ê≥®Ëß£ÊåáÂÆö‰∏Ä‰∏™ÂêçÁß∞ÔºåËÆ©‰ΩøÁî®ËØ•ÂêçÁß∞Êù•ÈÅçÂéÜÔºåÊñπ‰æø‰ª£Á†ÅÁª¥Êä§ÂíåÈòÖËØª„ÄÇ</p>
<h3 id="ÈÅçÂéÜÊï∞ÁªÑ">ÈÅçÂéÜÊï∞ÁªÑ</h3>
<p>ÂΩì Java ÊñπÊ≥ï‰ΩøÁî®ÁöÑÂèÇÊï∞Á±ªÂûã‰∏∫Êï∞ÁªÑÊó∂ÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="nf">selectUserInIds</span><span class="o">(</span><span class="n">Integer</span><span class="o">[]</span> <span class="n">ids</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â¶ÇÊûú ids ÂèÇÊï∞‰ΩøÁî® @Param Ê≥®Ëß£ÊåáÂÆö‰∫ÜÂèÇÊï∞ÂêçÁß∞ÔºåÂàô foreach Ê†áÁ≠æ‰∏≠ÁöÑ collection Â±ûÊÄßÂøÖÈ°ª‰∏∫ËØ•ÂêçÁß∞Ôºõ‰ΩÜËã•Êú™ÊåáÂÆöÂêçÁß∞ÔºåÂàôÂú® foreach Ê†áÁ≠æ‰∏≠‰ΩøÁî®ÈªòËÆ§Êï∞ÁªÑÂêçÁß∞ arrayÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&#34;selectUserInIds&#34;</span> <span class="na">resultType=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  SELECT * FROM imooc_user
</span></span><span class="line"><span class="cl">  WHERE id IN
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;foreach</span> <span class="na">collection=</span><span class="s">&#34;array&#34;</span> <span class="na">open=</span><span class="s">&#34;(&#34;</span> <span class="na">close=</span><span class="s">&#34;)&#34;</span> <span class="na">separator=</span><span class="s">&#34;,&#34;</span> <span class="na">item=</span><span class="s">&#34;item&#34;</span> <span class="na">index=</span><span class="s">&#34;index&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    #{item}
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/foreach&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÈÅçÂéÜ-map">ÈÅçÂéÜ Map</h3>
<p>ÂΩì Java ÊñπÊ≥ï‰ΩøÁî®ÁöÑÂèÇÊï∞Á±ªÂûã‰∏∫ Map Êó∂ÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">updateUserById</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;params&#34;</span><span class="o">)</span> <span class="n">Map</span> <span class="n">map</span><span class="o">,</span> <span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;id&#34;</span><span class="o">)</span> <span class="n">Integer</span> <span class="n">id</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰ΩøÁî® foreach Ê†áÁ≠æÈÅçÂéÜ Map Êó∂Ôºåcollection Â±ûÊÄßÂÄº‰∏∫Ê≥®Ëß£ÊåáÂÆöÁöÑÂèÇÊï∞ÂêçÔºåÂç≥ paramsÔºå‰∏î item ÊòØ Map ÁöÑÈîÆÂÄºÔºåindex ÊòØÈîÆÂêç„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;update</span> <span class="na">id=</span><span class="s">&#34;updateUserById&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  UPDATE imooc_user
</span></span><span class="line"><span class="cl">  SET
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;foreach</span> <span class="na">collection=</span><span class="s">&#34;params&#34;</span> <span class="na">item=</span><span class="s">&#34;val&#34;</span> <span class="na">index=</span><span class="s">&#34;key&#34;</span> <span class="na">separator=</span><span class="s">&#34;,&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    ${key} = #{val}
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/foreach&gt;</span>
</span></span><span class="line"><span class="cl">  WHERE id = #{id}
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/update&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Ê≥®ÊÑèÔºö</strong> Áî±‰∫é key ÊòØÂ≠óÊÆµÂêçÁß∞ÔºåÂõ†Ê≠§‰∏çËÉΩ‰ΩøÁî®<code>#{}</code>‰Ωú‰∏∫Âç†‰ΩçÁ¨¶ÔºåÂè™ËÉΩ‰ΩøÁî®<code>${}</code>Âú®Â≠óÁ¨¶‰∏≤‰∏≠ÊõøÊç¢„ÄÇ</p>
<p>updateUserById ÁîüÊàêÁöÑ SQL ËØ≠Âè•Â§ßËá¥Â¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">imooc_user</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">?</span><span class="w"> 
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ÂÆûË∑µ-9">ÂÆûË∑µ</h2>
<h3 id="‰æã1-‰ΩøÁî®ÂêçÁß∞ÊâπÈáèÊü•ËØ¢Áî®Êà∑">‰æã1. ‰ΩøÁî®ÂêçÁß∞ÊâπÈáèÊü•ËØ¢Áî®Êà∑</h3>
<p>ËØ∑‰ΩøÁî® MyBatis ÂÆåÊàêÂØπ imooc_user Ë°®‰ΩøÁî®ÂêçÁß∞ÊâπÈáèÊü•ËØ¢Áî®Êà∑ÁöÑÂäüËÉΩÔºåÂèÇÊï∞‰∏∫‰∏Ä‰∏™ÂêçÁß∞ÂàóË°®Ôºå‰ΩøÁî® in ÂÖ≥ÈîÆÂ≠óËøõË°åÊü•ËØ¢„ÄÇ</p>
<p><strong>ÂàÜÊûêÔºö</strong></p>
<p>ÊåâÁÖß MyBatis ÁöÑÂºÄÂèëÊ®°ÂºèÔºåÂÖàÂú® UserMapper.xml Êñá‰ª∂‰∏≠Ê∑ªÂä†‰ΩøÁî®ÂêçÁß∞ÊâπÈáèÊü•ËØ¢Áî®Êà∑ÁöÑ select Ê†áÁ≠æÔºåÁÑ∂ÂêéÂú® UserMapper.java ‰∏≠Ê∑ªÂä†‰∏äÂØπÂ∫îÁöÑÊñπÊ≥ï„ÄÇ</p>
<p><strong>Ê≠•È™§Ôºö</strong></p>
<p>È¶ñÂÖàÔºåÂú® UserMapper.xml ‰∏≠Ê∑ªÂä† select Ê†áÁ≠æÔºåÂπ∂Âú®Ê†áÁ≠æ‰∏≠ÂÜôÂÖ• SQLÔºå‰ΩøÁî® foreach Ê†áÁ≠æÊù•ÈÅçÂéÜÂêçÁß∞ÂàóË°®„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">&#34;selectUserInNames&#34;</span> <span class="na">resultType=</span><span class="s">&#34;com.ahao.mybatis.model.User&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  SELECT * FROM imooc_user
</span></span><span class="line"><span class="cl">  WHERE username IN
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;foreach</span> <span class="na">collection=</span><span class="s">&#34;names&#34;</span> <span class="na">open=</span><span class="s">&#34;(&#34;</span> <span class="na">close=</span><span class="s">&#34;)&#34;</span> <span class="na">separator=</span><span class="s">&#34;,&#34;</span> <span class="na">item=</span><span class="s">&#34;item&#34;</span> <span class="na">index=</span><span class="s">&#34;index&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    #{item}
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/foreach&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ÂêéÂú® UserMapper.java ‰∏≠Ê∑ªÂä†‰∏äÂØπÂ∫îÁöÑÊé•Âè£ÊñπÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ahao.mybatis.mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.ahao.mybatis.model.User</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@Mapper</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">   <span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="nf">selectUserInNames</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;names&#34;</span><span class="o">)</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">names</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÁªìÊûúÔºö</strong></p>
<p>ÈÄöËøáÂ¶Ç‰∏ã‰ª£Á†ÅÔºåÊàë‰ª¨ËøêË°å selectUserInNames Ëøô‰∏™ÊñπÊ≥ï„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">UserMapper</span> <span class="n">userMapper</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">getMapper</span><span class="o">(</span><span class="n">UserMapper</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">users</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectUserInNames</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">&#34;pedro&#34;</span><span class="o">,</span> <span class="s">&#34;peter&#34;</span><span class="o">));</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">users</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊàêÂäüÂêéÔºåÁªìÊûú‰∏∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>User<span class="o">{</span><span class="nv">id</span><span class="o">=</span>1, <span class="nv">username</span><span class="o">=</span><span class="s1">&#39;peter&#39;</span>, <span class="nv">age</span><span class="o">=</span>18, <span class="nv">score</span><span class="o">=</span>100<span class="o">}</span>, User<span class="o">{</span><span class="nv">id</span><span class="o">=</span>2, <span class="nv">username</span><span class="o">=</span><span class="s1">&#39;pedro&#39;</span>, <span class="nv">age</span><span class="o">=</span>24, <span class="nv">score</span><span class="o">=</span>200<span class="o">}]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="‰æã2-ÊâπÈáèÊèíÂÖ•Áî®Êà∑">‰æã2. ÊâπÈáèÊèíÂÖ•Áî®Êà∑</h3>
<p>ËØ∑‰ΩøÁî® MyBatis ÂÆåÊàêÂØπ imooc_user Ë°®ÊâπÈáèÊèíÂÖ•Áî®Êà∑ÁöÑÂäüËÉΩÔºåÂèÇÊï∞‰∏∫‰∏Ä‰∏™Áî®Êà∑ÂàóË°®„ÄÇ</p>
<p><strong>ÂàÜÊûêÔºö</strong></p>
<p>Âêå‰∏ä„ÄÇ</p>
<p><strong>Ê≠•È™§Ôºö</strong></p>
<p>È¶ñÂÖàÔºåÂú® UserMapper.xml ‰∏≠Ê∑ªÂä† insert Ê†áÁ≠æÔºåÂπ∂Âú®Ê†áÁ≠æ‰∏≠ÂÜôÂÖ• SQLÔºå‰ΩøÁî® foreach Ê†áÁ≠æÊù•ÈÅçÂéÜÁî®Êà∑ÂàóË°®„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;insert</span> <span class="na">id=</span><span class="s">&#34;insertUsers&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">  INSERT INTO imooc_user(username,age,score)
</span></span><span class="line"><span class="cl">  VALUES
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;foreach</span> <span class="na">collection=</span><span class="s">&#34;users&#34;</span> <span class="na">item=</span><span class="s">&#34;user&#34;</span> <span class="na">separator=</span><span class="s">&#34;,&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    (#{user.username}, #{user.age}, #{user.score})
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/foreach&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/insert&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê≥®ÊÑèÔºåËøôÈáåÈÅçÂéÜ users ÂæóÂà∞ÁöÑÂçï‰ΩçÊòØ userÔºåuser ÊòØ‰∏Ä‰∏™ÂØπË±°ÔºåÂõ†Ê≠§ÂøÖÈ°ªÈÄöËøá OGNL Ë°®ËææÂºèÊù•Âèñ user ÁöÑÂ±ûÊÄß„ÄÇ</p>
<p>ÁÑ∂ÂêéÂú® UserMapper.java ‰∏≠Ê∑ªÂä†‰∏äÂØπÂ∫îÁöÑÊé•Âè£ÊñπÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ahao.mybatis.mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.ahao.mybatis.model.User</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@Mapper</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">   <span class="kt">int</span> <span class="nf">insertUsers</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;users&#34;</span><span class="o">)</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span> <span class="n">users</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÁªìÊûúÔºö</strong></p>
<p>ÈÄöËøáÂ¶Ç‰∏ã‰ª£Á†ÅÔºåÊàë‰ª¨ËøêË°å insertUsers Ëøô‰∏™ÊñπÊ≥ï„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">User</span> <span class="n">user1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="n">user1</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">&#34;user1&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">user1</span><span class="o">.</span><span class="na">setScore</span><span class="o">(</span><span class="n">100</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">user1</span><span class="o">.</span><span class="na">setAge</span><span class="o">(</span><span class="n">0</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">User</span> <span class="n">user2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">User</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="n">user2</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">&#34;user2&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">user2</span><span class="o">.</span><span class="na">setScore</span><span class="o">(</span><span class="n">210</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">user2</span><span class="o">.</span><span class="na">setAge</span><span class="o">(</span><span class="n">20</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">rows</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">insertUsers</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">user1</span><span class="o">,</span> <span class="n">user2</span><span class="o">));</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">rows</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊàêÂäüÂêéÔºåÁªìÊûú‰∏∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="m">2</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="Â∞èÁªì-12">Â∞èÁªì</h2>
<ul>
<li>foreach Ê†áÁ≠æÊòØ‰ΩøÁî®ÈùûÂ∏∏ÂπøÊ≥õÁöÑ‰∏Ä‰∏™Ê†áÁ≠æÔºåÂΩì‰ΩøÁî® SQL ËøõË°åÊâπÈáèÊèíÂÖ•„ÄÅÊü•ËØ¢Êó∂ÈÉΩÈúÄË¶Å‰ΩøÁî®Âà∞ÂÆÉ„ÄÇ</li>
<li>ÂàóË°®ÈÅçÂéÜÁöÑ‰ΩøÁî®ÊúÄ‰∏∫ÂπøÊ≥õÔºåÊï∞ÁªÑÂíå Map ÂàôÁõ∏ÂØπËæÉÂ∞ë„ÄÇ</li>
</ul>
<h1 id="mybatis-script">MyBatis script</h1>
<h2 id="ÂâçË®Ä-13">ÂâçË®Ä</h2>
<p>ÂâçÈù¢‰∏ÄÁ≥ªÂàóÂä®ÊÄÅ SQL Â∞èËäÇÁöÑÂ≠¶‰π†‰∏≠ÔºåÊàë‰ª¨ÈÉΩÊòØÂú® xml ‰∏≠‰π¶ÂÜô SQL ÁöÑ„ÄÇÊ≥®Ëß£Êó†Ê≥ïÂèëÊå• MyBatis Âä®ÊÄÅ SQL ÁöÑÁúüÊ≠£Â®ÅÂäõÔºå‰ΩÜÊòØ if„ÄÅchoose„ÄÅbind„ÄÅwhere Á≠âÊ†áÁ≠æËøòÊòØÂèØ‰ª•Âú®Ê≥®Ëß£‰∏≠‰ΩøÁî®ÁöÑ„ÄÇ</p>
<p>MyBatis ÂÆòÊñπÊñáÊ°£ÂØπ‰∫éÊ≠§ÁöÑ‰ªãÁªçÂè™ÊúâÂØ•ÂØ•‰∏ÄÂè•ËØùÂíå‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÔºåÂú®ÂÆûÈôÖÁöÑÂ∫îÁî®‰∏≠‰πüÂá†‰πéÊ≤°Êúâ‰∫∫ËøôÊ†∑ÂéªÂÅöÔºåÂõ†‰∏∫ÂÆÉÁ°ÆÂÆû‰∏çÂ§™ÁæéËßÇÔºå‰ΩÜÊòØËÄÉËôëÂà∞Ëøô‰∏™Áü•ËØÜÁÇπÂπ∂‰∏çÂ§çÊùÇÔºå‰πüÊûÅÊúâÂèØËÉΩÊàê‰∏∫‰∏Ä‰∏™ÂàÅÈíªÁöÑÈù¢ËØïÁÇπÔºåÊàë‰ª¨ËøòÊòØ‰∏ÄËµ∑Êù•Â≠¶‰π†‰∏Ä‰∏ã„ÄÇ</p>
<h2 id="ÂÆû‰æã-10">ÂÆû‰æã</h2>
<p>Âú®Ê≥®Ëß£‰∏≠‰ΩøÁî®Âä®ÊÄÅ SQL ÂÖ∂ÂÆûÂçÅÂàÜÁÆÄÂçïÔºåÂè™ÈúÄÂú®Âä®ÊÄÅ SQL ËØ≠Âè•ÁöÑÂ§ñÈù¢ÂåÖ‰∏ä‰∏ÄÂ±Ç<code>script</code>Ê†áÁ≠æÂç≥ÂèØ„ÄÇÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Select</span><span class="o">({</span><span class="s">&#34;&lt;script&gt;&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;SELECT * FROM imooc_user&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;    WHERE&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;    &lt;choose&gt;&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;      &lt;when test=&#39;id != null&#39;&gt;&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;        id = #{id}&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;      &lt;/when&gt;&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;      &lt;when test=&#39;username != null&#39;&gt;&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;        username = #{username}&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;      &lt;/when&gt;&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;      &lt;otherwise&gt;&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;        1 = 0&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;      &lt;/otherwise&gt;&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;    &lt;/choose&gt;&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">   <span class="s">&#34;&lt;/script&gt;&#34;</span><span class="o">})</span>
</span></span><span class="line"><span class="cl"><span class="n">User</span> <span class="nf">selectUserByIdOrName</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;id&#34;</span><span class="o">)</span> <span class="n">Integer</span> <span class="n">id</span><span class="o">,</span> <span class="nd">@Param</span><span class="o">(</span><span class="s">&#34;username&#34;</span><span class="o">)</span> <span class="n">String</span> <span class="n">username</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú® Select Ê≥®Ëß£‰∏≠ÔºåÊàë‰ª¨Ê≤°ÊúâÁõ¥Êé•ÂÜôÂÖ• SQLÔºåËÄåÊòØÂú®ÊúÄÂ§ñÂ±ÇÂ•ó‰∏ä‰∏Ä‰∏™ script Ê†áÁ≠æÔºåËøôÈáåËÄÉËôëÂà∞ SQL ËØ≠Âè•ÁöÑÁæéËßÇÊÄßÔºåÊàë‰ª¨ÊääËØ≠Âè•ÂàÜÊàê‰∫ÜÂ≠óÁ¨¶‰∏≤Êï∞ÁªÑÊù•‰π¶ÂÜôÔºåMyBatis ‰ºöËá™Âä®Â∞ÜÂÖ∂ÊãºÊé•Êàê‰∏Ä‰∏™ÂÆåÊï¥ÁöÑËØ≠Âè•„ÄÇ</p>
<h2 id="ÂÆûË∑µ-10">ÂÆûË∑µ</h2>
<h3 id="‰æã1-Êü•ËØ¢Â∞èÂÜôÂêçÁß∞ÂÆ¢Êà∑">‰æã1. Êü•ËØ¢Â∞èÂÜôÂêçÁß∞ÂÆ¢Êà∑</h3>
<p>ËØ∑‰ΩøÁî® MyBatis ÂÆåÊàêÂØπ imooc_user Ë°®Êü•ËØ¢Â∞èÂÜôÂêçÁß∞ÂÆ¢Êà∑ÁöÑÂäüËÉΩÔºåÂ∞ÜÂêçÁß∞Â∞èÂÜôÂêéÂÜçËøõË°åÊü•ËØ¢„ÄÇ</p>
<p><strong>ÂàÜÊûêÔºö</strong></p>
<p>‰ΩøÁî®Êú¨Â∞èËäÇÊâÄÂ≠¶ÁöÑÁü•ËØÜÔºåÁõ¥Êé•Âú® UserMapper.java Êé•Âè£‰∏äÊ∑ªÂä†ÊñπÊ≥ïÔºåÂπ∂‰ΩøÁî® Select Ê≥®Ëß£Âç≥ÂèØ„ÄÇ</p>
<p><strong>Ê≠•È™§Ôºö</strong></p>
<p>Âú® UserMapper.java ‰∏≠Ê∑ªÂä†‰∏äÂØπÂ∫îÁöÑÊé•Âè£ÊñπÊ≥ïÔºåÊñπÊ≥ïÊé•Âèó username ‰∏Ä‰∏™ÂèÇÊï∞„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">com.ahao.mybatis.mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.ibatis.annotations.Mapper</span><span class="o">;</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.ahao.mybatis.model.User</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@Mapper</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">UserMapper</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="nd">@Select</span><span class="o">({</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;&lt;script&gt;&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;&lt;bind name=\&#34;lowercaseName\&#34; value=\&#34;username.toLowercase\&#34;/&gt;&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;SELECT * FROM imooc_user&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;WHERE username = #{lowercaseName}&#34;</span><span class="o">,</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;&lt;/script&gt;&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="o">})</span>
</span></span><span class="line"><span class="cl">  <span class="n">User</span> <span class="nf">selectUsernameLowercase</span><span class="o">(</span><span class="n">String</span> <span class="n">username</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÁªìÊûúÔºö</strong></p>
<p>ÈÄöËøáÂ¶Ç‰∏ã‰ª£Á†ÅÔºåÊàë‰ª¨ËøêË°å selectUsernameLowercase Ëøô‰∏™ÊñπÊ≥ï„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">UserMapper</span> <span class="n">userMapper</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="na">getMapper</span><span class="o">(</span><span class="n">UserMapper</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">User</span> <span class="n">pedro</span> <span class="o">=</span> <span class="n">userMapper</span><span class="o">.</span><span class="na">selectUsernameLowercase</span><span class="o">(</span><span class="s">&#34;PEDRO&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">pedro</span><span class="o">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊàêÂäüÂêéÔºåÁªìÊûú‰∏∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">User<span class="o">{</span><span class="nv">id</span><span class="o">=</span>2, <span class="nv">username</span><span class="o">=</span><span class="s1">&#39;pedro&#39;</span>, <span class="nv">age</span><span class="o">=</span>24, <span class="nv">score</span><span class="o">=</span>200<span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="Â∞èÁªì-13">Â∞èÁªì</h2>
<ul>
<li>ÈÄöËøá scirpt Ê†áÁ≠æÔºåÊàë‰ª¨ÂèØ‰ª•Âú®Ê≥®Ëß£‰∏≠‰ΩøÁî®Âä®ÊÄÅ SQL ÁöÑËØ∏Â§öÊ†áÁ≠æÔºåÊûÅÂ§ßÂú∞Â¢ûÂº∫‰∫ÜÊ≥®Ëß£ÁöÑËÉΩÂäõÔºå‰ΩÜÁõ∏ÂØπ‰∫é xml ËøôÁßçÊõ¥‰∏∫‰ºòÈõÖÁöÑÊñπÂºèÔºåÊó†ÁñëÊòØÂêéËÄÖÊõ¥‰Ω≥ÔºåÂõ†Ê≠§Êàë‰ª¨Êàë‰ª¨Âº∫ÂäõÊé®Ëçê‰Ω†‰ΩøÁî® xml ÁöÑÊñπÂºè„ÄÇ</li>
</ul>
<h1 id="mybatis-ÈÖçÁΩÆ‰ªãÁªç">MyBatis ÈÖçÁΩÆ‰ªãÁªç</h1>
<h2 id="ÂâçË®Ä-14">ÂâçË®Ä</h2>
<p>MyBatis ÁöÑÈÖçÁΩÆÂçÅÂàÜÈáçË¶ÅÔºåÂÆÉÁõ¥Êé•Â∑¶Âè≥ MyBatis ÁöÑË°å‰∏∫„ÄÇÊàë‰ª¨ÂèØ‰ª•Â∞Ü MyBatis ÈÖçÁΩÆÂàÜ‰∏∫<code>‰∏§Â§ßÈÉ®ÂàÜ</code>ÔºåÁ¨¨‰∏ÄÈÉ®ÂàÜÊòØ mapperÔºå‰πüÂ∞±ÊòØÂÆπÁ∫≥ SQL ËØ≠Âè•ÁöÑ.xmlÊñá‰ª∂ÔºåÂè¶‰∏ÄÈÉ®ÂàÜÊòØ configuration Ôºå‰πüÂ∞±ÊòØÂâçÈù¢Â∞èËäÇÊèêÂà∞ÁöÑ mybatis-config.xml Êñá‰ª∂„ÄÇ</p>
<p>Êú¨Â∞èËäÇÔºåÊàë‰ª¨Â∞Ü‰ªãÁªç configuration ‰∏≠Â∏∏ËßÅ‰∏îÊúâÁî®ÁöÑÈÖçÁΩÆÈ°π„ÄÇ</p>
<h2 id="ÁªìÊûÑ">ÁªìÊûÑ</h2>
<p>MyBatis ‰ª• .xml ‰Ωú‰∏∫ÈÖçÁΩÆÊñá‰ª∂Ôºå‰∏î‰ª• configuration ‰Ωú‰∏∫ÈÖçÁΩÆÁöÑÊ†πËäÇÁÇπ„ÄÇÂú® configuration ‰∏ãÊúâËØ∏Â§öÈÖçÁΩÆÈ°πÔºåÂÆÉ‰ª¨ÁöÑÁªìÊûÑÂ¶Ç‰∏ãÔºö</p>
<p>configurationÔºàÈÖçÁΩÆÔºâ</p>
<ul>
<li>propertiesÔºàÂ±ûÊÄßÔºâ</li>
<li>settingsÔºàËÆæÁΩÆÔºâ</li>
<li>typeAliasesÔºàÁ±ªÂûãÂà´ÂêçÔºâ</li>
<li>typeHandlersÔºàÁ±ªÂûãÂ§ÑÁêÜÂô®Ôºâ</li>
<li>objectFactoryÔºàÂØπË±°Â∑•ÂéÇÔºâ</li>
<li>pluginsÔºàÊèí‰ª∂Ôºâ</li>
<li>environmentsÔºàÁéØÂ¢ÉÈÖçÁΩÆÔºâ
<ul>
<li>environmentÔºàÁéØÂ¢ÉÂèòÈáèÔºâ
<ul>
<li>transactionManagerÔºà‰∫ãÂä°ÁÆ°ÁêÜÂô®Ôºâ</li>
<li>dataSourceÔºàÊï∞ÊçÆÊ∫êÔºâ</li>
</ul>
</li>
</ul>
</li>
<li>databaseIdProviderÔºàÊï∞ÊçÆÂ∫ìÂéÇÂïÜÊ†áËØÜÔºâ</li>
<li>mappersÔºàÊò†Â∞ÑÂô®Ôºâ</li>
</ul>
<p>MyBatis configuration ÂÖ± 9 È°πÔºåÂÖ∂‰∏≠‰∏Ä‰∫õÈÖçÁΩÆÂú®ÂâçÈù¢ÁöÑÂ∞èËäÇ‰∏≠Â∑≤Áªè‰ªãÁªçÂà∞‰∫ÜÔºå‰∏ãÈù¢Êàë‰ª¨Â∞ÜÂàÜÂà´‰ªãÁªçÊØè‰∏ÄÈ°πÈÖçÁΩÆ„ÄÇ</p>
<h2 id="Â±ûÊÄß-properties">Â±ûÊÄß properties</h2>
<p>ÈÄöËøá properties ÈÖçÁΩÆÔºåÊàë‰ª¨ÂèØ‰ª•Â∞Ü‰∏Ä‰∫õÈáçË¶ÅÁöÑÈÖçÁΩÆÂ±ûÊÄß<code>ÊäΩÁ¶ª</code>Âà∞ÂÖ∂ÂÆÉÁöÑ .properties Êñá‰ª∂„ÄÇ</p>
<p>ÊØîÂ¶ÇÔºådataSource ‰∏≠ÁöÑÊï∞ÊçÆÂ∫ì url„ÄÅÁî®Êà∑ÂêçÂíåÂØÜÁ†ÅÔºåÊàë‰ª¨ÂèØ‰ª•ÂçïÁã¨‰ª• datasource.properties Êñá‰ª∂Êù•Â≠òÂÇ®ÔºåÁÑ∂ÂêéÂú® mybatis-config.xml Êñá‰ª∂‰∏≠ÂØºÂÖ•‰ΩøÁî®„ÄÇ</p>
<p>Âú® resources ÁõÆÂΩï‰∏ãÊñ∞Âª∫ datasource.properties Êñá‰ª∂ÔºåÂπ∂Â°´ÂÖ•‰ª•‰∏ãÂÜÖÂÆπÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">url=jdbc:mysql://localhost:3306/imooc?useSSL=false
</span></span><span class="line"><span class="cl">username=root
</span></span><span class="line"><span class="cl">password=123456
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ÂêéÂú® mybatis-config.xml Êñá‰ª∂‰∏≠ÈÄöËøá properties ÈÖçÁΩÆÊù•ÂºïÂÖ• datasource.properties Êñá‰ª∂Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE configuration
</span></span></span><span class="line"><span class="cl"><span class="cp">  PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">  &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="c">&lt;!--  ÂºïÂÖ•datasource.properties  --&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;properties</span> <span class="na">resource=</span><span class="s">&#34;datasource.properties&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;environments</span> <span class="na">default=</span><span class="s">&#34;development&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;environment</span> <span class="na">id=</span><span class="s">&#34;development&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;transactionManager</span> <span class="na">type=</span><span class="s">&#34;JDBC&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;dataSource</span> <span class="na">type=</span><span class="s">&#34;POOLED&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;driver&#34;</span> <span class="na">value=</span><span class="s">&#34;com.mysql.cj.jdbc.Driver&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!--  Âç†‰ΩçÁ¨¶Âä®ÊÄÅÊõøÊç¢ÈÖçÁΩÆ --&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;url&#34;</span> <span class="na">value=</span><span class="s">&#34;${url}&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;username&#34;</span> <span class="na">value=</span><span class="s">&#34;${username}&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;password&#34;</span> <span class="na">value=</span><span class="s">&#34;${password}&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;/dataSource&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/environment&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/environments&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÄöËøá properties ‰∏≠ÁöÑ resource Â±ûÊÄßÂºïÂÖ• datasource.properties ÂêéÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•‰ΩøÁî®Âç†‰ΩçÁ¨¶ÁöÑÊñπÂºèÂéªÂä®ÊÄÅÊõøÊç¢ÈÖçÁΩÆÔºåÂ¶Ç <code>${url}</code>ÔºåË°®Á§∫‰ªé datasource.properties Êñá‰ª∂‰∏≠ÂèñÂá∫ url È°πÂπ∂Â°´ÂÖÖÂú®Ê≠§Â§Ñ„ÄÇ</p>
<p>ÂÆÉ‰ª¨Âú®ÁõÆÂΩï‰∏≠ÁöÑ‰ΩçÁΩÆÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">src/main/resources
</span></span><span class="line"><span class="cl">‚îú‚îÄ‚îÄ datasource.properties
</span></span><span class="line"><span class="cl">‚îú‚îÄ‚îÄ mybatis-config.xml
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ËÆæÁΩÆ-settings">ËÆæÁΩÆ settings</h2>
<p>MyBatis Êèê‰æõ‰∫Ü settings Êù•ËÆæÁΩÆ‰∏Ä‰∫õ‰∏ªË¶ÅÁöÑÂèÇÊï∞ÔºåÂÆÉ‰ª¨‰ºöÁõ¥Êé•ÁöÑÊîπÂèò MyBatis ÁöÑËøêË°åÊó∂Ë°å‰∏∫„ÄÇ</p>
<p>settings ÂÖ±ÊúâÂçÅÂá†È°πÔºåÊàë‰ª¨ÁΩóÂàó‰∏Ä‰∫õÂ∏∏Áî®ÁöÑÔºö</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th style="text-align:left">ËÆæÁΩÆÂêç</th>
<th style="text-align:left">ÊèèËø∞</th>
<th style="text-align:left">ÂèØÈÄâÂÄº</th>
<th style="text-align:left">ÈªòËÆ§ÂÄº</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">cacheEnabled</td>
<td style="text-align:left">ÂÖ®Â±ÄÂú∞ÂºÄÂêØÊàñÂÖ≥Èó≠ÊâÄÊúâ mapper ‰∏≠ÁöÑÁºìÂ≠ò</td>
<td style="text-align:left">true | false</td>
<td style="text-align:left">true</td>
</tr>
<tr>
<td style="text-align:left">lazyLoadingEnabled</td>
<td style="text-align:left">Âª∂ËøüÂä†ËΩΩÁöÑÂÖ®Â±ÄÂºÄÂÖ≥ÔºåÂΩìÂºÄÂêØÊó∂ÔºåÊâÄÊúâÂÖ≥ËÅîÂØπË±°ÈÉΩ‰ºöÂª∂ËøüÂä†ËΩΩ</td>
<td style="text-align:left">true | false</td>
<td style="text-align:left">false</td>
</tr>
<tr>
<td style="text-align:left">defaultStatementTimeout</td>
<td style="text-align:left">ËÆæÁΩÆÊï∞ÊçÆÂ∫ìÊü•ËØ¢Ë∂ÖÊó∂Êó∂Èó¥</td>
<td style="text-align:left">‰ªªÊÑèÊ≠£Êï¥Êï∞</td>
<td style="text-align:left">null</td>
</tr>
<tr>
<td style="text-align:left">mapUnderscoreToCamelCase</td>
<td style="text-align:left">ÊòØÂê¶ÂºÄÂêØËá™Âä®È©ºÂ≥∞ÂëΩÂêçËßÑÂàôÔºàcamel caseÔºâÊò†Â∞Ñ</td>
<td style="text-align:left">true ÔΩúfalse</td>
<td style="text-align:left">false</td>
</tr>
<tr>
<td style="text-align:left">localCacheScope</td>
<td style="text-align:left">MyBatis‰ºöÈªòËÆ§ÁºìÂ≠ò‰ºöËØù‰∏≠ÁöÑÊü•ËØ¢ÔºåÂç≥ SESSIONÔºåËã•Êó†ÈúÄÁºìÂ≠òÂàôËÆæÁΩÆ‰∏∫ STATEMENT</td>
<td style="text-align:left">SESSION ÔΩú STATEMENT</td>
<td style="text-align:left">SESSION</td>
</tr>
<tr>
<td style="text-align:left">defaultEnumTypeHandler</td>
<td style="text-align:left">ÊåáÂÆö Enum ‰ΩøÁî®ÁöÑÈªòËÆ§ TypeHandler</td>
<td style="text-align:left">Java Á±ªÁöÑÂÖ®Ë∑ØÂæÑ</td>
<td style="text-align:left">org.apache.ibatis. type.EnumTypeHandler</td>
</tr>
<tr>
<td style="text-align:left">logPrefix</td>
<td style="text-align:left">ÊåáÂÆö MyBatis Êó•ÂøóÂêçÁß∞ÂâçÁºÄ</td>
<td style="text-align:left">‰ªª‰ΩïÂ≠óÁ¨¶‰∏≤</td>
<td style="text-align:left">Êú™ËÆæÁΩÆ</td>
</tr>
<tr>
<td style="text-align:left">logImpl</td>
<td style="text-align:left">ÊåáÂÆö MyBatis Êó•ÂøóÁöÑÂÆûÁé∞ÔºåÊú™ÊåáÂÆöÊó∂Â∞ÜËá™Âä®Êü•Êâæ</td>
<td style="text-align:left">SLF4J ÔΩú LOG4JÔΩúLOG4J2ÔΩúJDK_LOGGINGÔΩúCOMMONS_LOGGINGÔΩúSTDOUT_LOGGINGÔΩúNO_LOGGING</td>
<td style="text-align:left">Êú™ËÆæÁΩÆ</td>
</tr>
<tr>
<td style="text-align:left">proxyFactory</td>
<td style="text-align:left">ÊåáÂÆö Mybatis ÂàõÂª∫ÂÖ∑ÊúâÂª∂ËøüÂä†ËΩΩËÉΩÂäõÁöÑÂØπË±°ÊâÄÁî®Âà∞ÁöÑ‰ª£ÁêÜÂ∑•ÂÖ∑</td>
<td style="text-align:left">CGLIB ÔΩú JAVASSIST</td>
<td style="text-align:left">JAVASSIST</td>
</tr>
</tbody>
</table></div>
<p>ÂΩì‰ΩøÁî®ÂÆÉ‰ª¨Êó∂Ôºå‰Ω†Âè™ÈúÄË¶ÅÂú® mybatis-config.xml ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÊâìÂºÄÁõ∏Â∫îÁöÑÈÖçÁΩÆ„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåÊàë‰ª¨ÂºÄÂêØ‰∫Ü‰∏ãÂàíÁ∫øËΩ¨È©ºÂ≥∞ÁöÑÈÖçÁΩÆÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE configuration
</span></span></span><span class="line"><span class="cl"><span class="cp">  PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">  &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;settings&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;setting</span> <span class="na">name=</span><span class="s">&#34;mapUnderscoreToCamelCase&#34;</span> <span class="na">value=</span><span class="s">&#34;true&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/settings&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="Âà´Âêç-typealiases">Âà´Âêç typeAliases</h2>
<p>MyBatis Âú®ÊåáÂÆö Java Á±ªÊó∂ÈúÄË¶Å‰ΩøÁî®Âà∞Á±ªÁöÑÂÖ®Ë∑ØÂæÑÔºåÂ¶Ç com.ahao.mybatis.model.BlogÔºåtypeAliases ÂèØ‰ª•‰∏∫ÂÖ®Ë∑ØÂæÑÂÆö‰πâ‰∏Ä‰∏™Âà´ÂêçÔºåËøôÊ†∑Â∞±ËÉΩÂáèÂ∞ë‰∏ÄÂÆöÁöÑÈáçÂ§çÂ∑•‰Ωú„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåÂ∞Ü com.ahao.mybatis.model.Blog ÁöÑÂà´ÂêçÂÆö‰πâ‰∏∫ BlogÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE configuration
</span></span></span><span class="line"><span class="cl"><span class="cp">  PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">  &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;typeAliases&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;typeAlias</span> <span class="na">type=</span><span class="s">&#34;com.ahao.mybatis.model.Blog&#34;</span> <span class="na">alias=</span><span class="s">&#34;Blog&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/typeAliases&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>MyBatis ËøòÊîØÊåÅ‰∏∫‰∏Ä‰∏™ÂåÖ‰∏ãÊâÄÊúâÁ±ªÂÆö‰πâÂà´ÂêçÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE configuration
</span></span></span><span class="line"><span class="cl"><span class="cp">  PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">  &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;typeAliases&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;package</span> <span class="na">name=</span><span class="s">&#34;com.ahao.mybatis.model&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/typeAliases&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÊ†∑Âú® com.ahao.mybatis.model ÂåÖ‰∏≠ÁöÑÊâÄÊúâÁ±ªÈÉΩÊúâ‰∫ÜÂà´ÂêçÔºåÊØè‰∏™Á±ªÁöÑÂà´ÂêçÈÉΩÊòØÂÖ∂Á±ªÁöÑÂêçÁß∞È¶ñÂ≠óÊØçÂ∞èÂÜôÔºåÂ¶Ç Author Á±ªÁöÑÂà´Âêç‰∏∫ author„ÄÇ</p>
<h2 id="Á±ªÂûãÂ§ÑÁêÜÂô®-typehandlers">Á±ªÂûãÂ§ÑÁêÜÂô® typeHandlers</h2>
<p>Á±ªÂûãÂ§ÑÁêÜÂô®Êàë‰ª¨Â∞ÜÂú®Á±ªÂûãÂ§ÑÁêÜÂô®Â∞èËäÇ‰∏≠ÂÜçËØ¶ÁªÜ‰ªãÁªç„ÄÇ</p>
<h2 id="ÂØπË±°Â∑•ÂéÇ-objectfactory">ÂØπË±°Â∑•ÂéÇ objectFactory</h2>
<p>MyBatis ÊØèÊ¨°ÂàõÂª∫ÁªìÊûúÂØπË±°ÁöÑÊñ∞ÂÆû‰æãÊó∂ÔºåÂÆÉÈÉΩ‰ºö‰ΩøÁî®‰∏Ä‰∏™ÂØπË±°Â∑•ÂéÇÔºàObjectFactoryÔºâÊù•ÂÆåÊàê„ÄÇMyBatis ÈªòËÆ§ÁöÑÂØπË±°Â∑•ÂéÇ‰ªÖ‰ªÖÂè™ÊòØÂÆû‰æãÂåñÁõÆÊ†áÁ±ªÔºåÊàë‰ª¨ÂèØ‰ª•Ëá™ÂÆö‰πâ‰∏Ä‰∏™ÂØπË±°Â∑•ÂéÇÁ±ªÊù•Ë¶ÜÁõñÈªòËÆ§ÁöÑÂØπË±°Â∑•ÂéÇ„ÄÇ</p>
<p>ÈÖçÁΩÆÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE configuration
</span></span></span><span class="line"><span class="cl"><span class="cp">  PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">  &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;objectFactory</span> <span class="na">type=</span><span class="s">&#34;org.mybatis.example.ExampleObjectFactory&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁªùÂ§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºåËøô‰∏™Êìç‰ΩúÈÉΩÊòØÊûÅÂÖ∂Âç±Èô©ÁöÑÔºåÊîπÂèò‰∫Ü MyBatis ÈªòËÆ§ÁöÑÂØπË±°ÂàõÂª∫Ë°å‰∏∫ÂèØËÉΩ‰ºöÂ∏¶Êù•‰∏ÄÂÆöÁöÑÂÖºÂÆπÈîôËØØÔºåÊâÄ‰ª•Êàë‰ª¨‰∏çÂÅöËøáÂ§ö‰ªãÁªçÔºåÂ¶ÇÊûú‰Ω†Á°ÆÂÆûÈúÄË¶ÅÂÆÉÔºåÂèØ‰ª•Êü•ÈòÖÁõ∏ÂÖ≥ÁöÑËµÑÊñô„ÄÇ</p>
<h2 id="Êèí‰ª∂-plugins">Êèí‰ª∂ plugins</h2>
<p>Êèí‰ª∂Êàë‰ª¨Â∞ÜÂú®Êèí‰ª∂Â∞èËäÇ‰∏≠ÂÜçËØ¶ÁªÜ‰ªãÁªç„ÄÇ</p>
<h2 id="ÁéØÂ¢ÉÈÖçÁΩÆ-environments">ÁéØÂ¢ÉÈÖçÁΩÆ environments</h2>
<p>ÁéØÂ¢ÉÈÖçÁΩÆÊòØÊúÄ‰∏∫Â§çÊùÇÁöÑ‰∏ÄÈ°πÈÖçÁΩÆÔºåMyBatis Êèê‰æõ‰∫ÜÂ§öÁéØÂ¢ÉÈÖçÁΩÆÊú∫Âà∂Ôºå‰æãÂ¶ÇÔºöÂºÄÂèëÁéØÂ¢ÉÂíåÁîü‰∫ßÁéØÂ¢É‰∏äÁöÑÊï∞ÊçÆÂ∫ìÈÖçÁΩÆÂ∞±Â§ßÊ¶ÇÁéá‰∏ç‰∏ÄÊ†∑„ÄÇ</p>
<p>ÊØè‰∏™ environment ÈÉΩÊúâ‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑ id Â≠óÊÆµÔºå‰∏î environments ÈúÄË¶ÅÊèê‰æõ‰∏Ä‰∏™ÈªòËÆ§ÁéØÂ¢ÉÔºåÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; ?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE configuration
</span></span></span><span class="line"><span class="cl"><span class="cp">  PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">  &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;configuration&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;environments</span> <span class="na">default=</span><span class="s">&#34;development&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;environment</span> <span class="na">id=</span><span class="s">&#34;development&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;transactionManager</span> <span class="na">type=</span><span class="s">&#34;JDBC&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;dataSource</span> <span class="na">type=</span><span class="s">&#34;POOLED&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;driver&#34;</span> <span class="na">value=</span><span class="s">&#34;com.mysql.cj.jdbc.Driver&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;url&#34;</span> <span class="na">value=</span><span class="s">&#34;jdbc:mysql://localhost:3306/imooc?useSSL=false&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;username&#34;</span> <span class="na">value=</span><span class="s">&#34;root&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&#34;password&#34;</span> <span class="na">value=</span><span class="s">&#34;123456&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;/dataSource&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/environment&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;/environments&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®ÊØè‰∏™ environment ‰∏ãÂèàÊúâ‰∏§‰∏™Â≠êÈÖçÁΩÆÈ°πÔºåÂÆÉ‰ª¨ÂàÜÂà´Ë¥üË¥£ÁÆ°ÁêÜ‰∫ãÂä°ÂíåÊï∞ÊçÆÊ∫ê„ÄÇ</p>
<h3 id="‰∫ãÂä°ÁÆ°ÁêÜÂô®-transactionmanager">‰∫ãÂä°ÁÆ°ÁêÜÂô® transactionManager</h3>
<p>Âú® xml Êñá‰ª∂‰∏≠ÂØπÂ∫î <code>&lt;transactionManager type=&quot;JDBC&quot;/&gt;</code>ÔºåÂÖ∂‰∏≠ type Â±ûÊÄßÂØπÂ∫î‰∫Ü‰∫ãÂä°ÁÆ°ÁêÜÂô®ÁöÑ‰∏§ÁßçÁ±ªÂûãÔºåÂàÜÂà´ÊòØJDBCÂíåMANAGED„ÄÇ</p>
<ul>
<li>JDBC ÔºöÁõ¥Êé•‰ΩøÁî®‰∫Ü JDBC ÁöÑÊèê‰∫§ÂíåÂõûÊªöÊú∫Âà∂„ÄÇ</li>
<li>MANAGEDÔºöËÆ©ÂÆπÂô®Êù•ÁÆ°ÁêÜ‰∫ãÂä°ÁöÑÊï¥‰∏™ÁîüÂëΩÂë®ÊúüÔºå‰æãÂ¶Ç spring ÂÆπÂô®„ÄÇ</li>
</ul>
<blockquote>
<p><strong>ÊèêÁ§∫Ôºö</strong> Â¶ÇÊûú‰Ω†‰ΩøÁî® spring ‰Ωú‰∏∫ÂÆπÂô®ÔºåÈÇ£‰πà transactionManager ‰ºöË¢´Ëá™Âä®ÈÖçÁΩÆ‰∏îÂèØÁî®„ÄÇ</p>
</blockquote>
<h3 id="Êï∞ÊçÆÊ∫ê-datasource">Êï∞ÊçÆÊ∫ê dataSource</h3>
<p>Âú® xml Êñá‰ª∂‰∏≠ÂØπÂ∫î<code>&lt;dataSource type=&quot;POOLED&quot;&gt;</code>ÔºåÂÖ∂‰∏≠ type Â±ûÊÄß‰ª£Ë°®‰∫ÜÊï∞ÊçÆÊ∫êÁöÑÁ±ªÂûãÔºåÂèØÈÄâÁöÑÊúâ‰∏âÁßçÁ±ªÂûãÔºåÂ¶Ç‰∏ãÔºö</p>
<ul>
<li>UNPOOLEDÔºöÈùûÊ±†ÂåñÊï∞ÊçÆÊ∫êÔºåÊØèÊ¨°‰ΩøÁî®Êó∂ÊâìÂºÄÔºåÁªìÊùüÂêéÂÖ≥Èó≠Ôºå‰∏çÊé®Ëçê„ÄÇ</li>
<li>POOLEDÔºöÊ±†ÂåñÊï∞ÊçÆÊ∫êÔºåËøûÊé•Ê±†ÁÆ°ÁêÜËøûÊé•ÔºåÊé®Ëçê„ÄÇ</li>
<li>JNDIÔºöÂú® EJB ËøôÁ±ªÂÆπÂô®‰∏≠‰ΩøÁî®ÔºåÂá†‰πé‰∏çÁî®„ÄÇ</li>
</ul>
<h2 id="Êï∞ÊçÆÂ∫ìÂéÇÂïÜÊ†áËØÜ-databaseidprovider">Êï∞ÊçÆÂ∫ìÂéÇÂïÜÊ†áËØÜ databaseIdProvider</h2>
<p>Â§öÊï∞ÊçÆÊ∫êÊîØÊåÅÊàë‰ª¨Â∞ÜÂú®Â§öÊï∞ÊçÆÊ∫êÊîØÊåÅÂ∞èËäÇ‰∏≠ËØ¶ÁªÜ‰ªãÁªç„ÄÇ</p>
<h2 id="Êò†Â∞ÑÂô®-mappers">Êò†Â∞ÑÂô® mappers</h2>
<p>ÈÄöËøá mappers ÈÖçÁΩÆÔºåÊàë‰ª¨ÂèØ‰ª•ÊåáÂÆöÊâÄÂØπÂ∫î SQL Êò†Â∞ÑÊñá‰ª∂ÔºåËøôÊ†∑ MyBatis ÊâçËÉΩÊâæÂà∞Âè¶‰∏ÄÈÉ®ÂàÜÁöÑ SQL ÈÖçÁΩÆÊñá‰ª∂„ÄÇ</p>
<p>mappers ÂèØ‰ª•ÂåÖÂê´Â§ö‰∏™ mapperÔºåmapper ÁöÑÂä†ËΩΩÂÖ±Êúâ <code>4</code> ÁßçÊñπÂºè„ÄÇ</p>
<h3 id="Áõ∏ÂØπÁ±ªË∑ØÂæÑ">Áõ∏ÂØπÁ±ªË∑ØÂæÑ</h3>
<p>ÈÄöËøá resource Â±ûÊÄßÊåáÂÆö mapper .xml Êñá‰ª∂ÊâÄÂØπÂ∫îÁöÑÁ±ªË∑ØÂæÑ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;mappers&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;mapper</span> <span class="na">resource=</span><span class="s">&#34;com/imooc/mybatis/mapper/UserMapper.xml&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/mappers&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="urlË∑ØÂæÑ">URLË∑ØÂæÑ</h3>
<p>ÈÄöËøá url Â±ûÊÄßÊåáÂÆö mapper .xml Êñá‰ª∂ÊâÄÂØπÂ∫îÁöÑÊñá‰ª∂Ë∑ØÂæÑ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;mappers&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;mapper</span> <span class="na">url=</span><span class="s">&#34;file:///mapper/UserMapper.xml&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/mappers&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Á±ªË∑ØÂæÑ">Á±ªË∑ØÂæÑ</h3>
<p>ÈÄöËøá class Â±ûÊÄßÊåáÂÆö mapper Á±ªÊâÄÂØπÂ∫îÁöÑÁ±ªË∑ØÂæÑ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;mappers&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;mapper</span> <span class="na">class=</span><span class="s">&#34;com.ahao.mybatis.mapper.UserMapper&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/mappers&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂåÖË∑ØÂæÑ">ÂåÖË∑ØÂæÑ</h3>
<p>ÈÄöËøáÂà∂ÂÆöÂåÖË∑ØÂæÑÔºåÂ∞ÜÂåÖ‰∏≠ÁöÑÊâÄÊúâÊé•Âè£Á±ªËá™Âä®Êâ´Êèè‰∏∫ mapper„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;mappers&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;package</span> <span class="na">name=</span><span class="s">&#34;com.ahao.mybatis.mapper&#34;</span><span class="nt">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/mappers&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="Â∞èÁªì-14">Â∞èÁªì</h2>
<ul>
<li>MyBatis ÁöÑÈÖçÁΩÆÊòØÊØîËæÉÂ§öÁöÑÔºåÊú¨Â∞èËäÇÂàó‰∏æ‰∫Ü‰∏Ä‰∫õ<code>Â∏∏Áî®‰∏îÈáçË¶Å</code>ÁöÑÈÖçÁΩÆÔºåÂ¶ÇÊûú‰Ω†Ëøò‰∏çÊª°Ë∂≥ÔºåÂèØ‰ª•ÈòÖËØªËøôÈáåÁöÑÂÆòÊñπ<a class="link" href="https://mybatis.org/mybatis-3/zh/configuration.html#properties"  target="_blank" rel="noopener"
    >ÈÖçÁΩÆÊñáÊ°£</a>„ÄÇ</li>
<li>MyBatis ÁöÑÂè¶‰∏ÄÈÉ®ÂàÜ SQL ÈÖçÁΩÆËôΩÁÑ∂ÂàÜÊï£Âú®‰∫ÜÂåÖ‰∏≠Ôºå‰ΩÜÈÄöËøá mappers Ëøô‰∏™‰∏≠Èó¥Ê°•Ê¢ÅÔºå‰∫åËÄÖÂèàÁ¥ßÂØÜÁöÑÁªìÂêàÂú®‰∏ÄËµ∑‰∫Ü„ÄÇ</li>
<li>Âú®ÁúüÂÆûÁöÑÂºÄÂèë‰∏≠Ôºå‰ºöÊúâ‰∏ìÈó®ÁöÑÁ±ªÂ∫ìÊù•Êèê‰æõËøô‰∫õÈÖçÁΩÆÔºå‰ΩÜ‰Ω†ÈúÄË¶Å‰∫ÜËß£ÂÆÉ‰ª¨Ôºå‰ª•‰æøÂú®ÈúÄË¶ÅÊó∂ËøÖÈÄü‰ΩúÂá∫ÂèçÂ∫î„ÄÇ</li>
</ul>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    <section class="article-lastmod">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



        <span>
            ÊúÄÂêéÊõ¥Êñ∞‰∫é 2022Âπ¥3Êúà18Êó• 08:28 UTC
        </span>
    </section></footer>


    
</article>

    

    

<aside class="related-contents--wrapper">
    <h2 class="section-title">Áõ∏ÂÖ≥ÊñáÁ´†</h2>
    <div class="related-contents">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/posts/mybatisplusspringboot%E7%89%88--2022/">
        
        
            <div class="article-image">
                
                    <img src="/1.jpg" loading="lazy" data-key="" data-hash="/1.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">MyBatisPlus(SpringBootÁâà)--2022</h2>
        </div>
    </a>
</article>
            
                
<article class="has-image">
    <a href="/posts/mybatis-%E5%AE%9E%E6%88%98%E7%AF%87/">
        
        
            <div class="article-image">
                
                    <img src="/20.jpg" loading="lazy" data-key="" data-hash="/20.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">MyBatis ÂÆûÊàòÁØá</h2>
        </div>
    </a>
</article>
            
                
<article class="has-image">
    <a href="/posts/mybatis-%E9%AB%98%E7%BA%A7%E7%AF%87/">
        
        
            <div class="article-image">
                
                    <img src="/19.jpg" loading="lazy" data-key="" data-hash="/19.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">MyBatis È´òÁ∫ßÁØá</h2>
        </div>
    </a>
</article>
            
        </div>
    </div>
</aside>

     
    
        
    <script src='//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js'></script>
<div id="waline" class="waline-container"></div>
<style>
    .waline-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
    .waline-container .vcount {
        color: var(--card-text-color-main);
    }
</style><script>
    
    new Waline({"dark":"html[data-scheme=\"dark\"]","el":"#waline","emoji":["https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/bilibili","https://cdn.jsdelivr.net/gh/walinejs/emojis/qq","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/tieba","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/weibo","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/tw-emoji","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/alus"],"lang":"zh-CN","locale":{"admin":"Admin"},"requiredMeta":["name","email","url"],"serverURL":"https://blog-api-2w7xkqg6y-ahaomin.vercel.app/","visitor":true});
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2022 ahao&#39;s Blog
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        ‰∏ªÈ¢ò <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.10.0">Stack</a></b> Áî± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> ËÆæËÆ°
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path></svg>
        </div>
        <h2 class="widget-title section-title">ÁõÆÂΩï</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#ÂâçË®Ä">ÂâçË®Ä</a></li>
    <li><a href="#Êñ∞Âª∫È°πÁõÆ">Êñ∞Âª∫È°πÁõÆ</a></li>
    <li><a href="#Ê∑ªÂä†‰æùËµñ">Ê∑ªÂä†‰æùËµñ</a></li>
    <li><a href="#Êï∞ÊçÆÂáÜÂ§á">Êï∞ÊçÆÂáÜÂ§á</a></li>
    <li><a href="#Â∞èÁªì">Â∞èÁªì</a></li>
  </ol>

  <ol>
    <li><a href="#ÂâçË®Ä-1">ÂâçË®Ä</a></li>
    <li><a href="#ÁºñÁ®ãÂºè‰ΩøÁî®">ÁºñÁ®ãÂºè‰ΩøÁî®</a>
      <ol>
        <li><a href="#ÂêØÂä®-mybatis">ÂêØÂä® MyBatis</a></li>
        <li><a href="#‰ΩøÁî®ÊµÅÁ®ã">‰ΩøÁî®ÊµÅÁ®ã</a></li>
      </ol>
    </li>
    <li><a href="#ÈÖçÁΩÆÂºè‰ΩøÁî®">ÈÖçÁΩÆÂºè‰ΩøÁî®</a>
      <ol>
        <li><a href="#ÈÖçÁΩÆÊñá‰ª∂">ÈÖçÁΩÆÊñá‰ª∂</a></li>
        <li><a href="#ÂêØÂä®-mybatis-1">ÂêØÂä® MyBatis</a></li>
        <li><a href="#‰ΩøÁî®ÊµÅÁ®ã-1">‰ΩøÁî®ÊµÅÁ®ã</a></li>
      </ol>
    </li>
    <li><a href="#Â∞èÁªì-1">Â∞èÁªì</a></li>
  </ol>

  <ol>
    <li><a href="#ÂâçË®Ä-2">ÂâçË®Ä</a></li>
    <li><a href="#ÂÆö‰πâ">ÂÆö‰πâ</a></li>
    <li><a href="#Êñ∞Âª∫-mapper">Êñ∞Âª∫ mapper</a>
      <ol>
        <li><a href="#Ê≥®Ëß£ÊñπÂºè">Ê≥®Ëß£ÊñπÂºè</a></li>
        <li><a href="#xml-ÊñπÂºè">XML ÊñπÂºè</a></li>
      </ol>
    </li>
    <li><a href="#‰ΩøÁî®-mapper">‰ΩøÁî® mapper</a>
      <ol>
        <li><a href="#mapper-ÈÖçÁΩÆ">mapper ÈÖçÁΩÆ</a></li>
        <li><a href="#‰ª£Á†ÅË∞ÉÁî®">‰ª£Á†ÅË∞ÉÁî®</a></li>
        <li><a href="#ÊÄªÁªì">ÊÄªÁªì</a></li>
      </ol>
    </li>
    <li><a href="#Â∞èÁªì-2">Â∞èÁªì</a></li>
  </ol>

  <ol>
    <li><a href="#ÂâçË®Ä-3">ÂâçË®Ä</a></li>
    <li><a href="#ÂÆö‰πâ-1">ÂÆö‰πâ</a></li>
    <li><a href="#ÂÆû‰æã">ÂÆû‰æã</a>
      <ol>
        <li><a href="#xml-ÂÆû‰æã">xml ÂÆû‰æã</a></li>
        <li><a href="#ÂèÇÊï∞Á¨¶Âè∑">ÂèÇÊï∞Á¨¶Âè∑</a></li>
        <li><a href="#Ê≥®Ëß£ÂÆû‰æã">Ê≥®Ëß£ÂÆû‰æã</a></li>
      </ol>
    </li>
    <li><a href="#select-Â±ûÊÄß">select Â±ûÊÄß</a></li>
    <li><a href="#ÂèÇÊï∞">ÂèÇÊï∞</a>
      <ol>
        <li><a href="#ÂØπË±°ÂèÇÊï∞">ÂØπË±°ÂèÇÊï∞</a></li>
        <li><a href="#ÂèÇÊï∞ÈÖçÁΩÆ">ÂèÇÊï∞ÈÖçÁΩÆ</a></li>
      </ol>
    </li>
    <li><a href="#ÂÆûË∑µ">ÂÆûË∑µ</a>
      <ol>
        <li><a href="#‰æã1-ÈÄöËøáÂπ¥ÈæÑÂíåÂàÜÊï∞Êü•ËØ¢Áî®Êà∑">‰æã1. ÈÄöËøáÂπ¥ÈæÑÂíåÂàÜÊï∞Êü•ËØ¢Áî®Êà∑</a></li>
      </ol>
    </li>
    <li><a href="#Â∞èÁªì-3">Â∞èÁªì</a></li>
  </ol>

  <ol>
    <li><a href="#ÂâçË®Ä-4">ÂâçË®Ä</a></li>
    <li><a href="#ÂÆö‰πâ-2">ÂÆö‰πâ</a></li>
    <li><a href="#ÂÆû‰æã-1">ÂÆû‰æã</a>
      <ol>
        <li><a href="#resultmap-ÂÆû‰æã">resultMap ÂÆû‰æã</a>
          <ol>
            <li><a href="#xml-ÂÆû‰æã-1">xml ÂÆû‰æã</a></li>
            <li><a href="#Ê≥®Ëß£ÂÆû‰æã-1">Ê≥®Ëß£ÂÆû‰æã</a></li>
          </ol>
        </li>
        <li><a href="#sql-ÂÆû‰æã">SQL ÂÆû‰æã</a></li>
      </ol>
    </li>
    <li><a href="#ÂÆûË∑µ-1">ÂÆûË∑µ</a>
      <ol>
        <li><a href="#‰æã1-Êü•ËØ¢Áî®Êà∑ÂßìÂêçÂíåÂπ¥ÈæÑ">‰æã1. Êü•ËØ¢Áî®Êà∑ÂßìÂêçÂíåÂπ¥ÈæÑ</a></li>
      </ol>
    </li>
    <li><a href="#Â∞èÁªì-4">Â∞èÁªì</a></li>
  </ol>

  <ol>
    <li><a href="#ÂâçË®Ä-5">ÂâçË®Ä</a></li>
    <li><a href="#ÂÆö‰πâ-3">ÂÆö‰πâ</a></li>
    <li><a href="#ÂÆû‰æã-2">ÂÆû‰æã</a>
      <ol>
        <li><a href="#xml-ÂÆû‰æã-2">xml ÂÆû‰æã</a></li>
        <li><a href="#Ê≥®Ëß£ÂÆû‰æã-2">Ê≥®Ëß£ÂÆû‰æã</a></li>
      </ol>
    </li>
    <li><a href="#insert-Â±ûÊÄß">insert Â±ûÊÄß</a></li>
    <li><a href="#ËøîÂõû‰∏ªÈîÆ">ËøîÂõû‰∏ªÈîÆ</a>
      <ol>
        <li><a href="#Ëá™Â¢û‰∏ªÈîÆ">Ëá™Â¢û‰∏ªÈîÆ</a>
          <ol>
            <li><a href="#xml-ÊñπÂºè-1">xml ÊñπÂºè</a></li>
            <li><a href="#Ê≥®Ëß£ÊñπÂºè-1">Ê≥®Ëß£ÊñπÂºè</a></li>
          </ol>
        </li>
        <li><a href="#selectkey-Ê†áÁ≠æ">selectKey Ê†áÁ≠æ</a>
          <ol>
            <li><a href="#xml-ÊñπÂºè-2">xml ÊñπÂºè</a></li>
            <li><a href="#Ê≥®Ëß£ÊñπÂºè-2">Ê≥®Ëß£ÊñπÂºè</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#ÂÆûË∑µ-2">ÂÆûË∑µ</a>
      <ol>
        <li><a href="#‰æã1-ÊèíÂÖ•Áî®Êà∑">‰æã1. ÊèíÂÖ•Áî®Êà∑</a></li>
      </ol>
    </li>
    <li><a href="#Â∞èÁªì-5">Â∞èÁªì</a></li>
  </ol>

  <ol>
    <li><a href="#ÂâçË®Ä-6">ÂâçË®Ä</a></li>
    <li><a href="#ÂÆö‰πâ-4">ÂÆö‰πâ</a></li>
    <li><a href="#ÂÆû‰æã-3">ÂÆû‰æã</a>
      <ol>
        <li><a href="#xml-ÂÆû‰æã-3">xml ÂÆû‰æã</a></li>
        <li><a href="#Ê≥®Ëß£ÂÆû‰æã-3">Ê≥®Ëß£ÂÆû‰æã</a></li>
      </ol>
    </li>
    <li><a href="#update-Â±ûÊÄß">update Â±ûÊÄß</a></li>
    <li><a href="#ÂÆûË∑µ-3">ÂÆûË∑µ</a>
      <ol>
        <li><a href="#‰æã1-Êõ¥Êñ∞Áî®Êà∑Âπ¥ÈæÑ">‰æã1. Êõ¥Êñ∞Áî®Êà∑Âπ¥ÈæÑ</a></li>
        <li><a href="#‰æã2-Êõ¥Êñ∞Áî®Êà∑ÂêçÁß∞ÂíåÂàÜÊï∞">‰æã2. Êõ¥Êñ∞Áî®Êà∑ÂêçÁß∞ÂíåÂàÜÊï∞</a></li>
      </ol>
    </li>
    <li><a href="#Â∞èÁªì-6">Â∞èÁªì</a></li>
  </ol>

  <ol>
    <li><a href="#ÂâçË®Ä-7">ÂâçË®Ä</a></li>
    <li><a href="#ÂÆö‰πâ-5">ÂÆö‰πâ</a></li>
    <li><a href="#ÂÆû‰æã-4">ÂÆû‰æã</a>
      <ol>
        <li><a href="#xml-ÂÆû‰æã-4">xml ÂÆû‰æã</a></li>
        <li><a href="#Ê≥®Ëß£ÂÆû‰æã-4">Ê≥®Ëß£ÂÆû‰æã</a></li>
      </ol>
    </li>
    <li><a href="#delete-Â±ûÊÄß">delete Â±ûÊÄß</a></li>
    <li><a href="#ÂÆûË∑µ-4">ÂÆûË∑µ</a>
      <ol>
        <li><a href="#‰æã1-Ê†πÊçÆ-id-Âà†Èô§Áî®Êà∑">‰æã1. Ê†πÊçÆ id Âà†Èô§Áî®Êà∑</a></li>
        <li><a href="#‰æã2-Ê†πÊçÆÁî®Êà∑ÂêçÂà†Èô§Áî®Êà∑">‰æã2. Ê†πÊçÆÁî®Êà∑ÂêçÂà†Èô§Áî®Êà∑</a></li>
      </ol>
    </li>
    <li><a href="#Â∞èÁªì-7">Â∞èÁªì</a></li>
  </ol>

  <ol>
    <li><a href="#ÂâçË®Ä-8">ÂâçË®Ä</a></li>
    <li><a href="#ÂÆö‰πâ-6">ÂÆö‰πâ</a></li>
    <li><a href="#‰ªãÁªç">‰ªãÁªç</a>
      <ol>
        <li><a href="#ÂÆû‰æã-5">ÂÆû‰æã</a></li>
        <li><a href="#Â∏∏ËßÅÁöÑ-ognl-Ë°®ËææÂºè">Â∏∏ËßÅÁöÑ OGNL Ë°®ËææÂºè</a></li>
      </ol>
    </li>
    <li><a href="#ÂÆûË∑µ-5">ÂÆûË∑µ</a>
      <ol>
        <li><a href="#ËÆøÈóÆÂ±ûÊÄß">ËÆøÈóÆÂ±ûÊÄß</a></li>
        <li><a href="#ËÆøÈóÆÂàóË°®">ËÆøÈóÆÂàóË°®</a></li>
        <li><a href="#ÊØîËæÉ">ÊØîËæÉ</a></li>
        <li><a href="#ËøêÁÆó">ËøêÁÆó</a></li>
        <li><a href="#ÊñπÊ≥ïË∞ÉÁî®">ÊñπÊ≥ïË∞ÉÁî®</a></li>
      </ol>
    </li>
    <li><a href="#Â∞èÁªì-8">Â∞èÁªì</a></li>
  </ol>

  <ol>
    <li><a href="#ÂâçË®Ä-9">ÂâçË®Ä</a></li>
    <li><a href="#ÂÆö‰πâ-7">ÂÆö‰πâ</a></li>
    <li><a href="#ÂÆû‰æã-6">ÂÆû‰æã</a></li>
    <li><a href="#ÂÆûË∑µ-6">ÂÆûË∑µ</a>
      <ol>
        <li><a href="#‰æã1Âä®ÊÄÅÊü•ËØ¢Áî®Êà∑">‰æã1„ÄÅÂä®ÊÄÅÊü•ËØ¢Áî®Êà∑</a></li>
      </ol>
    </li>
    <li><a href="#Â§öÊï∞ÊçÆÂ∫ìÊîØÊåÅ">Â§öÊï∞ÊçÆÂ∫ìÊîØÊåÅ</a>
      <ol>
        <li><a href="#ÈÖçÁΩÆ">ÈÖçÁΩÆ</a></li>
        <li><a href="#‰ΩøÁî®">‰ΩøÁî®</a></li>
      </ol>
    </li>
    <li><a href="#Â∞èÁªì-9">Â∞èÁªì</a></li>
  </ol>

  <ol>
    <li><a href="#ÂâçË®Ä-10">ÂâçË®Ä</a></li>
    <li><a href="#ÂÆö‰πâ-8">ÂÆö‰πâ</a></li>
    <li><a href="#ÂÆû‰æã-7">ÂÆû‰æã</a></li>
    <li><a href="#ÂÆûË∑µ-7">ÂÆûË∑µ</a>
      <ol>
        <li><a href="#‰æã1-Â§öÊù°‰ª∂Êü•ËØ¢Áî®Êà∑">‰æã1. Â§öÊù°‰ª∂Êü•ËØ¢Áî®Êà∑</a></li>
        <li><a href="#‰æã2-Êü•ËØ¢Â∞èÂÜôÂêçÁß∞ÂÆ¢Êà∑">‰æã2. Êü•ËØ¢Â∞èÂÜôÂêçÁß∞ÂÆ¢Êà∑</a></li>
      </ol>
    </li>
    <li><a href="#Â∞èÁªì-10">Â∞èÁªì</a></li>
  </ol>

  <ol>
    <li><a href="#ÂâçË®Ä-11">ÂâçË®Ä</a></li>
    <li><a href="#ÂÆö‰πâ-9">ÂÆö‰πâ</a></li>
    <li><a href="#ÂÆû‰æã-8">ÂÆû‰æã</a>
      <ol>
        <li><a href="#where-ÂÆû‰æã">where ÂÆû‰æã</a></li>
        <li><a href="#set-ÂÆû‰æã">set ÂÆû‰æã</a></li>
        <li><a href="#trim-ÂÆû‰æã">trim ÂÆû‰æã</a></li>
      </ol>
    </li>
    <li><a href="#ÂÆûË∑µ-8">ÂÆûË∑µ</a>
      <ol>
        <li><a href="#‰æã1-Âä®ÊÄÅÊèíÂÖ•Áî®Êà∑">‰æã1. Âä®ÊÄÅÊèíÂÖ•Áî®Êà∑</a></li>
      </ol>
    </li>
    <li><a href="#Â∞èÁªì-11">Â∞èÁªì</a></li>
  </ol>

  <ol>
    <li><a href="#ÂâçË®Ä-12">ÂâçË®Ä</a></li>
    <li><a href="#ÂÆö‰πâ-10">ÂÆö‰πâ</a></li>
    <li><a href="#ÂÆû‰æã-9">ÂÆû‰æã</a>
      <ol>
        <li><a href="#ÈÅçÂéÜÂàóË°®">ÈÅçÂéÜÂàóË°®</a></li>
        <li><a href="#ÈÅçÂéÜÊï∞ÁªÑ">ÈÅçÂéÜÊï∞ÁªÑ</a></li>
        <li><a href="#ÈÅçÂéÜ-map">ÈÅçÂéÜ Map</a></li>
      </ol>
    </li>
    <li><a href="#ÂÆûË∑µ-9">ÂÆûË∑µ</a>
      <ol>
        <li><a href="#‰æã1-‰ΩøÁî®ÂêçÁß∞ÊâπÈáèÊü•ËØ¢Áî®Êà∑">‰æã1. ‰ΩøÁî®ÂêçÁß∞ÊâπÈáèÊü•ËØ¢Áî®Êà∑</a></li>
        <li><a href="#‰æã2-ÊâπÈáèÊèíÂÖ•Áî®Êà∑">‰æã2. ÊâπÈáèÊèíÂÖ•Áî®Êà∑</a></li>
      </ol>
    </li>
    <li><a href="#Â∞èÁªì-12">Â∞èÁªì</a></li>
  </ol>

  <ol>
    <li><a href="#ÂâçË®Ä-13">ÂâçË®Ä</a></li>
    <li><a href="#ÂÆû‰æã-10">ÂÆû‰æã</a></li>
    <li><a href="#ÂÆûË∑µ-10">ÂÆûË∑µ</a>
      <ol>
        <li><a href="#‰æã1-Êü•ËØ¢Â∞èÂÜôÂêçÁß∞ÂÆ¢Êà∑">‰æã1. Êü•ËØ¢Â∞èÂÜôÂêçÁß∞ÂÆ¢Êà∑</a></li>
      </ol>
    </li>
    <li><a href="#Â∞èÁªì-13">Â∞èÁªì</a></li>
  </ol>

  <ol>
    <li><a href="#ÂâçË®Ä-14">ÂâçË®Ä</a></li>
    <li><a href="#ÁªìÊûÑ">ÁªìÊûÑ</a></li>
    <li><a href="#Â±ûÊÄß-properties">Â±ûÊÄß properties</a></li>
    <li><a href="#ËÆæÁΩÆ-settings">ËÆæÁΩÆ settings</a></li>
    <li><a href="#Âà´Âêç-typealiases">Âà´Âêç typeAliases</a></li>
    <li><a href="#Á±ªÂûãÂ§ÑÁêÜÂô®-typehandlers">Á±ªÂûãÂ§ÑÁêÜÂô® typeHandlers</a></li>
    <li><a href="#ÂØπË±°Â∑•ÂéÇ-objectfactory">ÂØπË±°Â∑•ÂéÇ objectFactory</a></li>
    <li><a href="#Êèí‰ª∂-plugins">Êèí‰ª∂ plugins</a></li>
    <li><a href="#ÁéØÂ¢ÉÈÖçÁΩÆ-environments">ÁéØÂ¢ÉÈÖçÁΩÆ environments</a>
      <ol>
        <li><a href="#‰∫ãÂä°ÁÆ°ÁêÜÂô®-transactionmanager">‰∫ãÂä°ÁÆ°ÁêÜÂô® transactionManager</a></li>
        <li><a href="#Êï∞ÊçÆÊ∫ê-datasource">Êï∞ÊçÆÊ∫ê dataSource</a></li>
      </ol>
    </li>
    <li><a href="#Êï∞ÊçÆÂ∫ìÂéÇÂïÜÊ†áËØÜ-databaseidprovider">Êï∞ÊçÆÂ∫ìÂéÇÂïÜÊ†áËØÜ databaseIdProvider</a></li>
    <li><a href="#Êò†Â∞ÑÂô®-mappers">Êò†Â∞ÑÂô® mappers</a>
      <ol>
        <li><a href="#Áõ∏ÂØπÁ±ªË∑ØÂæÑ">Áõ∏ÂØπÁ±ªË∑ØÂæÑ</a></li>
        <li><a href="#urlË∑ØÂæÑ">URLË∑ØÂæÑ</a></li>
        <li><a href="#Á±ªË∑ØÂæÑ">Á±ªË∑ØÂæÑ</a></li>
        <li><a href="#ÂåÖË∑ØÂæÑ">ÂåÖË∑ØÂæÑ</a></li>
      </ol>
    </li>
    <li><a href="#Â∞èÁªì-14">Â∞èÁªì</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
